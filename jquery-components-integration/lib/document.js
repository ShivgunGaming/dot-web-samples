(function(Wt){typeof define=="function"&&define.amd?define(Wt):Wt()})(function(){"use strict";var gu=Object.defineProperty;var vu=(Wt,ht,se)=>ht in Wt?gu(Wt,ht,{enumerable:!0,configurable:!0,writable:!0,value:se}):Wt[ht]=se;var Dt=(Wt,ht,se)=>(vu(Wt,typeof ht!="symbol"?ht+"":ht,se),se);var Wt,ht,se,Se,dr,pr,je={},mr=[],ia=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function qt(e,n){for(var t in n)e[t]=n[t];return e}function _r(e){var n=e.parentNode;n&&n.removeChild(e)}function $t(e,n,t){var i,a,r,o={};for(r in n)r=="key"?i=n[r]:r=="ref"?a=n[r]:o[r]=n[r];if(arguments.length>2&&(o.children=arguments.length>3?Wt.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)o[r]===void 0&&(o[r]=e.defaultProps[r]);return Ee(e,o,i,a,null)}function Ee(e,n,t,i,a){var r={type:e,props:n,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a==null?++se:a};return a==null&&ht.vnode!=null&&ht.vnode(r),r}function aa(){return{current:null}}function Vt(e){return e.children}function Yt(e,n){this.props=e,this.context=n}function Ae(e,n){if(n==null)return e.__?Ae(e.__,e.__.__k.indexOf(e)+1):null;for(var t;n<e.__k.length;n++)if((t=e.__k[n])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?Ae(e):null}function gr(e){var n,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((t=e.__k[n])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return gr(e)}}function Tn(e){(!e.__d&&(e.__d=!0)&&Se.push(e)&&!$e.__r++||dr!==ht.debounceRendering)&&((dr=ht.debounceRendering)||setTimeout)($e)}function $e(){for(var e;$e.__r=Se.length;)e=Se.sort(function(n,t){return n.__v.__b-t.__v.__b}),Se=[],e.some(function(n){var t,i,a,r,o,s;n.__d&&(o=(r=(t=n).__v).__e,(s=t.__P)&&(i=[],(a=qt({},r)).__v=r.__v+1,On(s,r,a,t.__n,s.ownerSVGElement!==void 0,r.__h!=null?[o]:null,i,o==null?Ae(r):o,r.__h),Sr(i,r),r.__e!=o&&gr(r)))})}function vr(e,n,t,i,a,r,o,s,h,y){var l,w,k,c,v,p,m,g=i&&i.__k||mr,C=g.length;for(t.__k=[],l=0;l<n.length;l++)if((c=t.__k[l]=(c=n[l])==null||typeof c=="boolean"?null:typeof c=="string"||typeof c=="number"||typeof c=="bigint"?Ee(null,c,null,null,c):Array.isArray(c)?Ee(Vt,{children:c},null,null,null):c.__b>0?Ee(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c)!=null){if(c.__=t,c.__b=t.__b+1,(k=g[l])===null||k&&c.key==k.key&&c.type===k.type)g[l]=void 0;else for(w=0;w<C;w++){if((k=g[w])&&c.key==k.key&&c.type===k.type){g[w]=void 0;break}k=null}On(e,c,k=k||je,a,r,o,s,h,y),v=c.__e,(w=c.ref)&&k.ref!=w&&(m||(m=[]),k.ref&&m.push(k.ref,null,c),m.push(w,c.__c||v,c)),v!=null?(p==null&&(p=v),typeof c.type=="function"&&c.__k===k.__k?c.__d=h=yr(c,h,e):h=wr(e,c,k,g,v,h),typeof t.type=="function"&&(t.__d=h)):h&&k.__e==h&&h.parentNode!=e&&(h=Ae(k))}for(t.__e=p,l=C;l--;)g[l]!=null&&Ar(g[l],g[l]);if(m)for(l=0;l<m.length;l++)Er(m[l],m[++l],m[++l])}function yr(e,n,t){for(var i,a=e.__k,r=0;a&&r<a.length;r++)(i=a[r])&&(i.__=e,n=typeof i.type=="function"?yr(i,n,t):wr(t,i,i,a,i.__e,n));return n}function Qt(e,n){return n=n||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(t){Qt(t,n)}):n.push(e)),n}function wr(e,n,t,i,a,r){var o,s,h;if(n.__d!==void 0)o=n.__d,n.__d=void 0;else if(t==null||a!=r||a.parentNode==null)t:if(r==null||r.parentNode!==e)e.appendChild(a),o=null;else{for(s=r,h=0;(s=s.nextSibling)&&h<i.length;h+=2)if(s==a)break t;e.insertBefore(a,r),o=r}return o!==void 0?o:a.nextSibling}function oa(e,n,t,i,a){var r;for(r in t)r==="children"||r==="key"||r in n||We(e,r,null,t[r],i);for(r in n)a&&typeof n[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||t[r]===n[r]||We(e,r,n[r],t[r],i)}function br(e,n,t){n[0]==="-"?e.setProperty(n,t):e[n]=t==null?"":typeof t!="number"||ia.test(n)?t:t+"px"}function We(e,n,t,i,a){var r;t:if(n==="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(n in i)t&&n in t||br(e.style,n,"");if(t)for(n in t)i&&t[n]===i[n]||br(e.style,n,t[n])}else if(n[0]==="o"&&n[1]==="n")r=n!==(n=n.replace(/Capture$/,"")),n=n.toLowerCase()in e?n.toLowerCase().slice(2):n.slice(2),e.l||(e.l={}),e.l[n+r]=t,t?i||e.addEventListener(n,r?kr:Cr,r):e.removeEventListener(n,r?kr:Cr,r);else if(n!=="dangerouslySetInnerHTML"){if(a)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!=="href"&&n!=="list"&&n!=="form"&&n!=="tabIndex"&&n!=="download"&&n in e)try{e[n]=t==null?"":t;break t}catch{}typeof t=="function"||(t==null||t===!1&&n.indexOf("-")==-1?e.removeAttribute(n):e.setAttribute(n,t))}}function Cr(e){this.l[e.type+!1](ht.event?ht.event(e):e)}function kr(e){this.l[e.type+!0](ht.event?ht.event(e):e)}function On(e,n,t,i,a,r,o,s,h){var y,l,w,k,c,v,p,m,g,C,x,O,A,W,j,K=n.type;if(n.constructor!==void 0)return null;t.__h!=null&&(h=t.__h,s=n.__e=t.__e,n.__h=null,r=[s]),(y=ht.__b)&&y(n);try{t:if(typeof K=="function"){if(m=n.props,g=(y=K.contextType)&&i[y.__c],C=y?g?g.props.value:y.__:i,t.__c?p=(l=n.__c=t.__c).__=l.__E:("prototype"in K&&K.prototype.render?n.__c=l=new K(m,C):(n.__c=l=new Yt(m,C),l.constructor=K,l.render=ua),g&&g.sub(l),l.props=m,l.state||(l.state={}),l.context=C,l.__n=i,w=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),K.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=qt({},l.__s)),qt(l.__s,K.getDerivedStateFromProps(m,l.__s))),k=l.props,c=l.state,w)K.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(K.getDerivedStateFromProps==null&&m!==k&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(m,C),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(m,l.__s,C)===!1||n.__v===t.__v){for(l.props=m,l.state=l.__s,n.__v!==t.__v&&(l.__d=!1),l.__v=n,n.__e=t.__e,n.__k=t.__k,n.__k.forEach(function(M){M&&(M.__=n)}),x=0;x<l._sb.length;x++)l.__h.push(l._sb[x]);l._sb=[],l.__h.length&&o.push(l);break t}l.componentWillUpdate!=null&&l.componentWillUpdate(m,l.__s,C),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(k,c,v)})}if(l.context=C,l.props=m,l.__v=n,l.__P=e,O=ht.__r,A=0,"prototype"in K&&K.prototype.render){for(l.state=l.__s,l.__d=!1,O&&O(n),y=l.render(l.props,l.state,l.context),W=0;W<l._sb.length;W++)l.__h.push(l._sb[W]);l._sb=[]}else do l.__d=!1,O&&O(n),y=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++A<25);l.state=l.__s,l.getChildContext!=null&&(i=qt(qt({},i),l.getChildContext())),w||l.getSnapshotBeforeUpdate==null||(v=l.getSnapshotBeforeUpdate(k,c)),j=y!=null&&y.type===Vt&&y.key==null?y.props.children:y,vr(e,Array.isArray(j)?j:[j],n,t,i,a,r,o,s,h),l.base=n.__e,n.__h=null,l.__h.length&&o.push(l),p&&(l.__E=l.__=null),l.__e=!1}else r==null&&n.__v===t.__v?(n.__k=t.__k,n.__e=t.__e):n.__e=sa(t.__e,n,t,i,a,r,o,h);(y=ht.diffed)&&y(n)}catch(M){n.__v=null,(h||r!=null)&&(n.__e=s,n.__h=!!h,r[r.indexOf(s)]=null),ht.__e(M,n,t)}}function Sr(e,n){ht.__c&&ht.__c(n,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(i){i.call(t)})}catch(i){ht.__e(i,t.__v)}})}function sa(e,n,t,i,a,r,o,s){var h,y,l,w=t.props,k=n.props,c=n.type,v=0;if(c==="svg"&&(a=!0),r!=null){for(;v<r.length;v++)if((h=r[v])&&"setAttribute"in h==!!c&&(c?h.localName===c:h.nodeType===3)){e=h,r[v]=null;break}}if(e==null){if(c===null)return document.createTextNode(k);e=a?document.createElementNS("http://www.w3.org/2000/svg",c):document.createElement(c,k.is&&k),r=null,s=!1}if(c===null)w===k||s&&e.data===k||(e.data=k);else{if(r=r&&Wt.call(e.childNodes),y=(w=t.props||je).dangerouslySetInnerHTML,l=k.dangerouslySetInnerHTML,!s){if(r!=null)for(w={},v=0;v<e.attributes.length;v++)w[e.attributes[v].name]=e.attributes[v].value;(l||y)&&(l&&(y&&l.__html==y.__html||l.__html===e.innerHTML)||(e.innerHTML=l&&l.__html||""))}if(oa(e,k,w,a,s),l)n.__k=[];else if(v=n.props.children,vr(e,Array.isArray(v)?v:[v],n,t,i,a&&c!=="foreignObject",r,o,r?r[0]:t.__k&&Ae(t,0),s),r!=null)for(v=r.length;v--;)r[v]!=null&&_r(r[v]);s||("value"in k&&(v=k.value)!==void 0&&(v!==e.value||c==="progress"&&!v||c==="option"&&v!==w.value)&&We(e,"value",v,w.value,!1),"checked"in k&&(v=k.checked)!==void 0&&v!==e.checked&&We(e,"checked",v,w.checked,!1))}return e}function Er(e,n,t){try{typeof e=="function"?e(n):e.current=n}catch(i){ht.__e(i,t)}}function Ar(e,n,t){var i,a;if(ht.unmount&&ht.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||Er(i,null,n)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){ht.__e(r,n)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(a=0;a<i.length;a++)i[a]&&Ar(i[a],n,t||typeof e.type!="function");t||e.__e==null||_r(e.__e),e.__=e.__e=e.__d=void 0}function ua(e,n,t){return this.constructor(e,t)}function ue(e,n,t){var i,a,r;ht.__&&ht.__(e,n),a=(i=typeof t=="function")?null:t&&t.__k||n.__k,r=[],On(n,e=(!i&&t||n).__k=$t(Vt,null,[e]),a||je,je,n.ownerSVGElement!==void 0,!i&&t?[t]:a?null:n.firstChild?Wt.call(n.childNodes):null,r,!i&&t?t:a?a.__e:n.firstChild,i),Sr(r,e)}function In(e,n){ue(e,n,In)}function Rn(e,n,t){var i,a,r,o=qt({},e.props);for(r in n)r=="key"?i=n[r]:r=="ref"?a=n[r]:o[r]=n[r];return arguments.length>2&&(o.children=arguments.length>3?Wt.call(arguments,2):t),Ee(e.type,o,i||e.key,a||e.ref,null)}function Dn(e,n){var t={__c:n="__cC"+pr++,__:e,Consumer:function(i,a){return i.children(a)},Provider:function(i){var a,r;return this.getChildContext||(a=[],(r={})[n]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&a.some(Tn)},this.sub=function(o){a.push(o);var s=o.componentWillUnmount;o.componentWillUnmount=function(){a.splice(a.indexOf(o),1),s&&s.call(o)}}),i.children}};return t.Provider.__=t.Consumer.contextType=t}Wt=mr.slice,ht={__e:function(e,n,t,i){for(var a,r,o;n=n.__;)if((a=n.__c)&&!a.__)try{if((r=a.constructor)&&r.getDerivedStateFromError!=null&&(a.setState(r.getDerivedStateFromError(e)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,i||{}),o=a.__d),o)return a.__E=a}catch(s){e=s}throw e}},se=0,Yt.prototype.setState=function(e,n){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=qt({},this.state),typeof e=="function"&&(e=e(qt({},t),this.props)),e&&qt(t,e),e!=null&&this.__v&&(n&&this._sb.push(n),Tn(this))},Yt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Tn(this))},Yt.prototype.render=Vt,Se=[],$e.__r=0,pr=0;function Nn(){return(Nn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}function ca(e){this.getChildContext=function(){return e.context};var n=e.children,t=function(i,a){if(i==null)return{};var r,o,s={},h=Object.keys(i);for(o=0;o<h.length;o++)a.indexOf(r=h[o])>=0||(s[r]=i[r]);return s}(e,["context","children"]);return Rn(n,t)}function la(){var e=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(e),this._vdom=$t(ca,Nn({},this._props,{context:e.detail.context}),function n(t,i){if(t.nodeType===3)return t.data;if(t.nodeType!==1)return null;var a=[],r={},o=0,s=t.attributes,h=t.childNodes;for(o=s.length;o--;)s[o].name!=="slot"&&(r[s[o].name]=s[o].value,r[xr(s[o].name)]=s[o].value);for(o=h.length;o--;){var y=n(h[o],null),l=h[o].slot;l?r[l]=$t(Tr,{name:l},y):a[o]=y}var w=i?$t(Tr,null,a):a;return $t(i||t.nodeName.toLowerCase(),r,w)}(this,this._vdomComponent)),(this.hasAttribute("hydrate")?In:ue)(this._vdom,this._root)}function xr(e){return e.replace(/-(\w)/g,function(n,t){return t?t.toUpperCase():""})}function ha(e,n,t){if(this._vdom){var i={};i[e]=t=t==null?void 0:t,i[xr(e)]=t,this._vdom=Rn(this._vdom,i),ue(this._vdom,this._root)}}function fa(){ue(this._vdom=null,this._root)}function Tr(e,n){var t=this;return $t("slot",Nn({},e,{ref:function(i){i?(t.ref=i,t._listener||(t._listener=function(a){a.stopPropagation(),a.detail.context=n},i.addEventListener("_preact",t._listener))):t.ref.removeEventListener("_preact",t._listener)}}))}function da(e,n,t,i){function a(){var r=Reflect.construct(HTMLElement,[],a);return r._vdomComponent=e,r._root=i&&i.shadow?r.attachShadow({mode:"open"}):r,r}return(a.prototype=Object.create(HTMLElement.prototype)).constructor=a,a.prototype.connectedCallback=la,a.prototype.attributeChangedCallback=ha,a.prototype.disconnectedCallback=fa,t=t||e.observedAttributes||Object.keys(e.propTypes||{}),a.observedAttributes=t,t.forEach(function(r){Object.defineProperty(a.prototype,r,{get:function(){return this._vdom.props[r]},set:function(o){this._vdom?this.attributeChangedCallback(r,null,o):(this._props||(this._props={}),this._props[r]=o,this.connectedCallback());var s=typeof o;o!=null&&s!=="string"&&s!=="boolean"&&s!=="number"||this.setAttribute(r,o)}})}),customElements.define(n||e.tagName||e.displayName||e.name,a)}var He=(e=>(e.CONTINUE_DETECTION="continue-detection",e.SWITCH_CAMERA="switch-camera",e.TOGGLE_MIRROR="toggle-mirror",e))(He||{}),te=(e=>(e.CONTROL="document-auto-capture:control",e.CAMERA_PROPS_CHANGED="document-auto-capture:camera-props-changed",e.INSTRUCTION_CHANGED="document-auto-capture:instruction-changed",e.STATE_CHANGED="document-auto-capture:state-changed",e.DETECTED_DOCUMENT_CHANGED="document-auto-capture:detected-document-changed",e.VIDEO_ELEMENT_SIZE="document-auto-capture:video-element-size",e))(te||{});const pa=1.5,ma=.85,Or=1e3,_a=600,ga=(e,n)=>{document.dispatchEvent(new CustomEvent(e,{detail:n}))},ir=class{constructor(){Dt(this,"lastDetails",{});Dt(this,"delayedTime",0)}static getInstance(){return this._instance||(this._instance=new ir),this._instance}restart(){this.lastDetails={},this.delayedTime=0}isDetailChanged(n,t){return JSON.stringify(t)!==JSON.stringify(this.lastDetails[n])?(this.lastDetails[n]=t,!0):!1}dispatchCustomEventOnChange(n,t){!this.isDetailChanged(n,t)||ga(n,t)}dispatchDelayedCustomEventOnChange(n,t,i){const a=performance.now();a-this.delayedTime>i&&(this.dispatchCustomEventOnChange(n,t),this.delayedTime=a)}};let me=ir;Dt(me,"_instance");const xe=me.getInstance(),Ir=(e,n)=>{const t={instructionCode:n};xe.dispatchDelayedCustomEventOnChange(e,t,_a)},Rr=(e,n)=>{xe.dispatchCustomEventOnChange(e,n)},va=(e,n)=>{xe.dispatchCustomEventOnChange(e,n)},ya=(e,n)=>{const t={size:n};xe.dispatchCustomEventOnChange(e,t)},wa=(e,n,t)=>{const a={detectedCorners:n.confidence<t?void 0:n};xe.dispatchCustomEventOnChange(e,a)};var ce,Nt,Pn,Dr,_e=0,Nr=[],Ve=[],Pr=ht.__b,zr=ht.__r,Fr=ht.diffed,Mr=ht.__c,Br=ht.unmount;function ge(e,n){ht.__h&&ht.__h(Nt,e,_e||n),_e=0;var t=Nt.__H||(Nt.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({__V:Ve}),t.__[e]}function ee(e){return _e=1,Ur(jr,e)}function Ur(e,n,t){var i=ge(ce++,2);if(i.t=e,!i.__c&&(i.__=[t?t(n):jr(void 0,n),function(r){var o=i.__N?i.__N[0]:i.__[0],s=i.t(o,r);o!==s&&(i.__N=[s,i.__[1]],i.__c.setState({}))}],i.__c=Nt,!Nt.u)){Nt.u=!0;var a=Nt.shouldComponentUpdate;Nt.shouldComponentUpdate=function(r,o,s){if(!i.__c.__H)return!0;var h=i.__c.__H.__.filter(function(l){return l.__c});if(h.every(function(l){return!l.__N}))return!a||a.call(this,r,o,s);var y=!1;return h.forEach(function(l){if(l.__N){var w=l.__[0];l.__=l.__N,l.__N=void 0,w!==l.__[0]&&(y=!0)}}),!(!y&&i.__c.props===r)&&(!a||a.call(this,r,o,s))}}return i.__N||i.__}function Lt(e,n){var t=ge(ce++,3);!ht.__s&&Mn(t.__H,n)&&(t.__=e,t.i=n,Nt.__H.__h.push(t))}function Ye(e,n){var t=ge(ce++,4);!ht.__s&&Mn(t.__H,n)&&(t.__=e,t.i=n,Nt.__h.push(t))}function de(e){return _e=5,Ge(function(){return{current:e}},[])}function ba(e,n,t){_e=6,Ye(function(){return typeof e=="function"?(e(n()),function(){return e(null)}):e?(e.current=n(),function(){return e.current=null}):void 0},t==null?t:t.concat(e))}function Ge(e,n){var t=ge(ce++,7);return Mn(t.__H,n)?(t.__V=e(),t.i=n,t.__h=e,t.__V):t.__}function Ze(e,n){return _e=8,Ge(function(){return e},n)}function ve(e){var n=Nt.context[e.__c],t=ge(ce++,9);return t.c=e,n?(t.__==null&&(t.__=!0,n.sub(Nt)),n.props.value):e.__}function zn(e,n){ht.useDebugValue&&ht.useDebugValue(n?n(e):e)}function Ca(){var e=ge(ce++,11);return e.__||(e.__="P"+function(n){for(var t=0,i=n.length;i>0;)t=(t<<5)-t+n.charCodeAt(--i)|0;return t}(Nt.__v.__m)+ce),e.__}function ka(){for(var e;e=Nr.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Xe),e.__H.__h.forEach(Fn),e.__H.__h=[]}catch(n){e.__H.__h=[],ht.__e(n,e.__v)}}ht.__b=function(e){typeof e.type!="function"||e.__m||e.__===null?e.__m||(e.__m=e.__&&e.__.__m?e.__.__m:""):e.__m=(e.__&&e.__.__m?e.__.__m:"")+(e.__&&e.__.__k?e.__.__k.indexOf(e):0),Nt=null,Pr&&Pr(e)},ht.__r=function(e){zr&&zr(e),ce=0;var n=(Nt=e.__c).__H;n&&(Pn===Nt?(n.__h=[],Nt.__h=[],n.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=Ve,t.__N=t.i=void 0})):(n.__h.forEach(Xe),n.__h.forEach(Fn),n.__h=[])),Pn=Nt},ht.diffed=function(e){Fr&&Fr(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(Nr.push(n)!==1&&Dr===ht.requestAnimationFrame||((Dr=ht.requestAnimationFrame)||Sa)(ka)),n.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==Ve&&(t.__=t.__V),t.i=void 0,t.__V=Ve})),Pn=Nt=null},ht.__c=function(e,n){n.some(function(t){try{t.__h.forEach(Xe),t.__h=t.__h.filter(function(i){return!i.__||Fn(i)})}catch(i){n.some(function(a){a.__h&&(a.__h=[])}),n=[],ht.__e(i,t.__v)}}),Mr&&Mr(e,n)},ht.unmount=function(e){Br&&Br(e);var n,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{Xe(i)}catch(a){n=a}}),t.__H=void 0,n&&ht.__e(n,t.__v))};var Lr=typeof requestAnimationFrame=="function";function Sa(e){var n,t=function(){clearTimeout(i),Lr&&cancelAnimationFrame(n),setTimeout(e)},i=setTimeout(t,100);Lr&&(n=requestAnimationFrame(t))}function Xe(e){var n=Nt,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),Nt=n}function Fn(e){var n=Nt;e.__c=e.__(),Nt=n}function Mn(e,n){return!e||e.length!==n.length||n.some(function(t,i){return t!==e[i]})}function jr(e,n){return typeof n=="function"?n(e):n}var Ht=(e=>(e.LOADING="LOADING",e.ERROR="ERROR",e.WAITING="WAITING",e.RUNNING="RUNNING",e))(Ht||{});class zt extends Error{constructor(t,i){super(t);Dt(this,"cause");this.name="AutoCaptureError",this.cause=i}static fromCameraError(t){if(t instanceof zt)return t;let i;switch(t.name){case"OverconstrainedError":i="Minimum quality requirements are not met by your camera";break;case"NotReadableError":case"AbortError":i="The webcam is already in use by another application";break;case"NotAllowedError":i="To use your camera, you must allow permissions";break;case"NotFoundError":i="There is no camera available to you";break;default:i="An unknown camera error has occurred";break}return new zt(i,t)}}var $r=(e=>(e.DOCUMENT="document-auto-capture:dev",e.FACE="face-auto-capture:dev",e))($r||{}),Ea=0;function Mt(e,n,t,i,a){var r,o,s={};for(o in n)o=="ref"?r=n[o]:s[o]=n[o];var h={type:e,props:s,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Ea,__source:a,__self:i};if(typeof e=="function"&&(r=e.defaultProps))for(o in r)s[o]===void 0&&(s[o]=r[o]);return ht.vnode&&ht.vnode(h),h}const Bn=Dn(void 0),Aa=({children:e,onError:n,eventName:t})=>{const[i,a]=ee(Ht.LOADING),[r,o]=ee(!1),s=Ze(l=>{Rr(t,{appState:Ht.ERROR,error:l}),o(!1),n(l),a(Ht.ERROR)},[n,t]),h=Ze(l=>{Rr(t,{appState:l}),a(l)},[t]),y={appState:i,handleAppStateChange:h,handleError:s,isCameraReady:r,setIsCameraReady:o};return Mt(Bn.Provider,{value:y,children:e})},Ke=()=>{const e=ve(Bn);if(e===void 0)throw new Error("useAppStateContext must be used within a AppStateProvider");return e};var Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xa={exports:{}};/*!

  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>

  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  */(function(e,n){(function(t){e.exports=t()})(function(){return function t(i,a,r){function o(y,l){if(!a[y]){if(!i[y]){var w=typeof qe=="function"&&qe;if(!l&&w)return w(y,!0);if(s)return s(y,!0);var k=new Error("Cannot find module '"+y+"'");throw k.code="MODULE_NOT_FOUND",k}var c=a[y]={exports:{}};i[y][0].call(c.exports,function(v){var p=i[y][1][v];return o(p||v)},c,c.exports,t,i,a,r)}return a[y].exports}for(var s=typeof qe=="function"&&qe,h=0;h<r.length;h++)o(r[h]);return o}({1:[function(t,i,a){var r=t("./utils"),o=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(h){for(var y,l,w,k,c,v,p,m=[],g=0,C=h.length,x=C,O=r.getTypeOf(h)!=="string";g<h.length;)x=C-g,w=O?(y=h[g++],l=g<C?h[g++]:0,g<C?h[g++]:0):(y=h.charCodeAt(g++),l=g<C?h.charCodeAt(g++):0,g<C?h.charCodeAt(g++):0),k=y>>2,c=(3&y)<<4|l>>4,v=1<x?(15&l)<<2|w>>6:64,p=2<x?63&w:64,m.push(s.charAt(k)+s.charAt(c)+s.charAt(v)+s.charAt(p));return m.join("")},a.decode=function(h){var y,l,w,k,c,v,p=0,m=0,g="data:";if(h.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var C,x=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===s.charAt(64)&&x--,h.charAt(h.length-2)===s.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(C=o.uint8array?new Uint8Array(0|x):new Array(0|x);p<h.length;)y=s.indexOf(h.charAt(p++))<<2|(k=s.indexOf(h.charAt(p++)))>>4,l=(15&k)<<4|(c=s.indexOf(h.charAt(p++)))>>2,w=(3&c)<<6|(v=s.indexOf(h.charAt(p++))),C[m++]=y,c!==64&&(C[m++]=l),v!==64&&(C[m++]=w);return C}},{"./support":30,"./utils":32}],2:[function(t,i,a){var r=t("./external"),o=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),h=t("./stream/DataLengthProbe");function y(l,w,k,c,v){this.compressedSize=l,this.uncompressedSize=w,this.crc32=k,this.compression=c,this.compressedContent=v}y.prototype={getContentWorker:function(){var l=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),w=this;return l.on("end",function(){if(this.streamInfo.data_length!==w.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(l,w,k){return l.pipe(new s).pipe(new h("uncompressedSize")).pipe(w.compressWorker(k)).pipe(new h("compressedSize")).withStreamInfo("compression",w)},i.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,a){var r=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,a){var r=t("./utils"),o=function(){for(var s,h=[],y=0;y<256;y++){s=y;for(var l=0;l<8;l++)s=1&s?3988292384^s>>>1:s>>>1;h[y]=s}return h}();i.exports=function(s,h){return s!==void 0&&s.length?r.getTypeOf(s)!=="string"?function(y,l,w,k){var c=o,v=k+w;y^=-1;for(var p=k;p<v;p++)y=y>>>8^c[255&(y^l[p])];return-1^y}(0|h,s,s.length,0):function(y,l,w,k){var c=o,v=k+w;y^=-1;for(var p=k;p<v;p++)y=y>>>8^c[255&(y^l.charCodeAt(p))];return-1^y}(0|h,s,s.length,0):0}},{"./utils":32}],5:[function(t,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,i,a){var r=null;r=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:r}},{lie:37}],7:[function(t,i,a){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),s=t("./utils"),h=t("./stream/GenericWorker"),y=r?"uint8array":"array";function l(w,k){h.call(this,"FlateWorker/"+w),this._pako=null,this._pakoAction=w,this._pakoOptions=k,this.meta={}}a.magic="\b\0",s.inherits(l,h),l.prototype.processChunk=function(w){this.meta=w.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(y,w.data),!1)},l.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var w=this;this._pako.onData=function(k){w.push({data:k,meta:w.meta})}},a.compressWorker=function(w){return new l("Deflate",w)},a.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,a){function r(c,v){var p,m="";for(p=0;p<v;p++)m+=String.fromCharCode(255&c),c>>>=8;return m}function o(c,v,p,m,g,C){var x,O,A=c.file,W=c.compression,j=C!==y.utf8encode,K=s.transformTo("string",C(A.name)),M=s.transformTo("string",y.utf8encode(A.name)),at=A.comment,lt=s.transformTo("string",C(at)),T=s.transformTo("string",y.utf8encode(at)),L=M.length!==A.name.length,f=T.length!==at.length,B="",pt="",Q="",ot=A.dir,et=A.date,mt={crc32:0,compressedSize:0,uncompressedSize:0};v&&!p||(mt.crc32=c.crc32,mt.compressedSize=c.compressedSize,mt.uncompressedSize=c.uncompressedSize);var U=0;v&&(U|=8),j||!L&&!f||(U|=2048);var R=0,J=0;ot&&(R|=16),g==="UNIX"?(J=798,R|=function(G,P){var bt=G;return G||(bt=P?16893:33204),(65535&bt)<<16}(A.unixPermissions,ot)):(J=20,R|=function(G){return 63&(G||0)}(A.dosPermissions)),x=et.getUTCHours(),x<<=6,x|=et.getUTCMinutes(),x<<=5,x|=et.getUTCSeconds()/2,O=et.getUTCFullYear()-1980,O<<=4,O|=et.getUTCMonth()+1,O<<=5,O|=et.getUTCDate(),L&&(pt=r(1,1)+r(l(K),4)+M,B+="up"+r(pt.length,2)+pt),f&&(Q=r(1,1)+r(l(lt),4)+T,B+="uc"+r(Q.length,2)+Q);var H="";return H+=`
\0`,H+=r(U,2),H+=W.magic,H+=r(x,2),H+=r(O,2),H+=r(mt.crc32,4),H+=r(mt.compressedSize,4),H+=r(mt.uncompressedSize,4),H+=r(K.length,2),H+=r(B.length,2),{fileRecord:w.LOCAL_FILE_HEADER+H+K+B,dirRecord:w.CENTRAL_FILE_HEADER+r(J,2)+H+r(lt.length,2)+"\0\0\0\0"+r(R,4)+r(m,4)+K+B+lt}}var s=t("../utils"),h=t("../stream/GenericWorker"),y=t("../utf8"),l=t("../crc32"),w=t("../signature");function k(c,v,p,m){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=p,this.encodeFileName=m,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(k,h),k.prototype.push=function(c){var v=c.meta.percent||0,p=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,h.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:p?(v+100*(p-m-1))/p:100}}))},k.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var v=this.streamFiles&&!c.file.dir;if(v){var p=o(c,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},k.prototype.closedSource=function(c){this.accumulate=!1;var v=this.streamFiles&&!c.file.dir,p=o(c,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),v)this.push({data:function(m){return w.DATA_DESCRIPTOR+r(m.crc32,4)+r(m.compressedSize,4)+r(m.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},k.prototype.flush=function(){for(var c=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var p=this.bytesWritten-c,m=function(g,C,x,O,A){var W=s.transformTo("string",A(O));return w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(g,2)+r(g,2)+r(C,4)+r(x,4)+r(W.length,2)+W}(this.dirRecords.length,p,c,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},k.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},k.prototype.registerPrevious=function(c){this._sources.push(c);var v=this;return c.on("data",function(p){v.processChunk(p)}),c.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),c.on("error",function(p){v.error(p)}),this},k.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},k.prototype.error=function(c){var v=this._sources;if(!h.prototype.error.call(this,c))return!1;for(var p=0;p<v.length;p++)try{v[p].error(c)}catch{}return!0},k.prototype.lock=function(){h.prototype.lock.call(this);for(var c=this._sources,v=0;v<c.length;v++)c[v].lock()},i.exports=k},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,a){var r=t("../compressions"),o=t("./ZipFileWorker");a.generateWorker=function(s,h,y){var l=new o(h.streamFiles,y,h.platform,h.encodeFileName),w=0;try{s.forEach(function(k,c){w++;var v=function(C,x){var O=C||x,A=r[O];if(!A)throw new Error(O+" is not a valid compression method !");return A}(c.options.compression,h.compression),p=c.options.compressionOptions||h.compressionOptions||{},m=c.dir,g=c.date;c._compressWorker(v,p).withStreamInfo("file",{name:k,dir:m,date:g,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(l)}),l.entriesCount=w}catch(k){l.error(k)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,a){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(o,s){return new r().loadAsync(o,s)},r.external=t("./external"),i.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,a){var r=t("./utils"),o=t("./external"),s=t("./utf8"),h=t("./zipEntries"),y=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function w(k){return new o.Promise(function(c,v){var p=k.decompressed.getContentWorker().pipe(new y);p.on("error",function(m){v(m)}).on("end",function(){p.streamInfo.crc32!==k.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}i.exports=function(k,c){var v=this;return c=r.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),l.isNode&&l.isStream(k)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",k,!0,c.optimizedBinaryString,c.base64).then(function(p){var m=new h(c);return m.load(p),m}).then(function(p){var m=[o.Promise.resolve(p)],g=p.files;if(c.checkCRC32)for(var C=0;C<g.length;C++)m.push(w(g[C]));return o.Promise.all(m)}).then(function(p){for(var m=p.shift(),g=m.files,C=0;C<g.length;C++){var x=g[C],O=x.fileNameStr,A=r.resolve(x.fileNameStr);v.file(A,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:c.createFolders}),x.dir||(v.file(A).unsafeOriginalName=O)}return m.zipComment.length&&(v.comment=m.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,a){var r=t("../utils"),o=t("../stream/GenericWorker");function s(h,y){o.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(y)}r.inherits(s,o),s.prototype._bindStream=function(h){var y=this;(this._stream=h).pause(),h.on("data",function(l){y.push({data:l,meta:{percent:0}})}).on("error",function(l){y.isPaused?this.generatedError=l:y.error(l)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,a){var r=t("readable-stream").Readable;function o(s,h,y){r.call(this,h),this._helper=s;var l=this;s.on("data",function(w,k){l.push(w)||l._helper.pause(),y&&y(k)}).on("error",function(w){l.emit("error",w)}).on("end",function(){l.push(null)})}t("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,i,a){function r(A,W,j){var K,M=s.getTypeOf(W),at=s.extend(j||{},l);at.date=at.date||new Date,at.compression!==null&&(at.compression=at.compression.toUpperCase()),typeof at.unixPermissions=="string"&&(at.unixPermissions=parseInt(at.unixPermissions,8)),at.unixPermissions&&16384&at.unixPermissions&&(at.dir=!0),at.dosPermissions&&16&at.dosPermissions&&(at.dir=!0),at.dir&&(A=g(A)),at.createFolders&&(K=m(A))&&C.call(this,K,!0);var lt=M==="string"&&at.binary===!1&&at.base64===!1;j&&j.binary!==void 0||(at.binary=!lt),(W instanceof w&&W.uncompressedSize===0||at.dir||!W||W.length===0)&&(at.base64=!1,at.binary=!0,W="",at.compression="STORE",M="string");var T=null;T=W instanceof w||W instanceof h?W:v.isNode&&v.isStream(W)?new p(A,W):s.prepareContent(A,W,at.binary,at.optimizedBinaryString,at.base64);var L=new k(A,T,at);this.files[A]=L}var o=t("./utf8"),s=t("./utils"),h=t("./stream/GenericWorker"),y=t("./stream/StreamHelper"),l=t("./defaults"),w=t("./compressedObject"),k=t("./zipObject"),c=t("./generate"),v=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),m=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var W=A.lastIndexOf("/");return 0<W?A.substring(0,W):""},g=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},C=function(A,W){return W=W!==void 0?W:l.createFolders,A=g(A),this.files[A]||r.call(this,A,null,{dir:!0,createFolders:W}),this.files[A]};function x(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var W,j,K;for(W in this.files)K=this.files[W],(j=W.slice(this.root.length,W.length))&&W.slice(0,this.root.length)===this.root&&A(j,K)},filter:function(A){var W=[];return this.forEach(function(j,K){A(j,K)&&W.push(K)}),W},file:function(A,W,j){if(arguments.length!==1)return A=this.root+A,r.call(this,A,W,j),this;if(x(A)){var K=A;return this.filter(function(at,lt){return!lt.dir&&K.test(at)})}var M=this.files[this.root+A];return M&&!M.dir?M:null},folder:function(A){if(!A)return this;if(x(A))return this.filter(function(M,at){return at.dir&&A.test(M)});var W=this.root+A,j=C.call(this,W),K=this.clone();return K.root=j.name,K},remove:function(A){A=this.root+A;var W=this.files[A];if(W||(A.slice(-1)!=="/"&&(A+="/"),W=this.files[A]),W&&!W.dir)delete this.files[A];else for(var j=this.filter(function(M,at){return at.name.slice(0,A.length)===A}),K=0;K<j.length;K++)delete this.files[j[K].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var W,j={};try{if((j=s.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");s.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var K=j.comment||this.comment||"";W=c.generateWorker(this,j,K)}catch(M){(W=new h("error")).error(M)}return new y(W,j.type||"string",j.mimeType)},generateAsync:function(A,W){return this.generateInternalStream(A).accumulate(W)},generateNodeStream:function(A,W){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(W)}};i.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,a){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,a){var r=t("./DataReader");function o(s){r.call(this,s);for(var h=0;h<this.data.length;h++)s[h]=255&s[h]}t("../utils").inherits(o,r),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var h=s.charCodeAt(0),y=s.charCodeAt(1),l=s.charCodeAt(2),w=s.charCodeAt(3),k=this.length-4;0<=k;--k)if(this.data[k]===h&&this.data[k+1]===y&&this.data[k+2]===l&&this.data[k+3]===w)return k-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var h=s.charCodeAt(0),y=s.charCodeAt(1),l=s.charCodeAt(2),w=s.charCodeAt(3),k=this.readData(4);return h===k[0]&&y===k[1]&&l===k[2]&&w===k[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,h},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,i,a){var r=t("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var h,y=0;for(this.checkOffset(s),h=this.index+s-1;h>=this.index;h--)y=(y<<8)+this.byteAt(h);return this.index+=s,y},readString:function(s){return r.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},i.exports=o},{"../utils":32}],19:[function(t,i,a){var r=t("./Uint8ArrayReader");function o(s){r.call(this,s)}t("../utils").inherits(o,r),o.prototype.readData=function(s){this.checkOffset(s);var h=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,h},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,a){var r=t("./DataReader");function o(s){r.call(this,s)}t("../utils").inherits(o,r),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var h=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,h},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,i,a){var r=t("./ArrayReader");function o(s){r.call(this,s)}t("../utils").inherits(o,r),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,h},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,a){var r=t("../utils"),o=t("../support"),s=t("./ArrayReader"),h=t("./StringReader"),y=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");i.exports=function(w){var k=r.getTypeOf(w);return r.checkSupport(k),k!=="string"||o.uint8array?k==="nodebuffer"?new y(w):o.uint8array?new l(r.transformTo("uint8array",w)):new s(r.transformTo("array",w)):new h(w)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,a){var r=t("./GenericWorker"),o=t("../utils");function s(h){r.call(this,"ConvertWorker to "+h),this.destType=h}o.inherits(s,r),s.prototype.processChunk=function(h){this.push({data:o.transformTo(this.destType,h.data),meta:h.meta})},i.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,a){var r=t("./GenericWorker"),o=t("../crc32");function s(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,r),s.prototype.processChunk=function(h){this.streamInfo.crc32=o(h.data,this.streamInfo.crc32||0),this.push(h)},i.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,a){var r=t("../utils"),o=t("./GenericWorker");function s(h){o.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}r.inherits(s,o),s.prototype.processChunk=function(h){if(h){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+h.data.length}o.prototype.processChunk.call(this,h)},i.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,a){var r=t("../utils"),o=t("./GenericWorker");function s(h){o.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(l){y.dataIsReady=!0,y.data=l,y.max=l&&l.length||0,y.type=r.getTypeOf(l),y.isPaused||y._tickAndRepeat()},function(l){y.error(l)})}r.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,y);break;case"uint8array":h=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":h=this.data.slice(this.index,y)}return this.index=y,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,a){function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var h=0;h<this._listeners[o].length;h++)this._listeners[o][h].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(h){s.processChunk(h)}),o.on("end",function(){s.end()}),o.on("error",function(h){s.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=r},{}],29:[function(t,i,a){var r=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),h=t("../base64"),y=t("../support"),l=t("../external"),w=null;if(y.nodestream)try{w=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function k(v,p){return new l.Promise(function(m,g){var C=[],x=v._internalType,O=v._outputType,A=v._mimeType;v.on("data",function(W,j){C.push(W),p&&p(j)}).on("error",function(W){C=[],g(W)}).on("end",function(){try{var W=function(j,K,M){switch(j){case"blob":return r.newBlob(r.transformTo("arraybuffer",K),M);case"base64":return h.encode(K);default:return r.transformTo(j,K)}}(O,function(j,K){var M,at=0,lt=null,T=0;for(M=0;M<K.length;M++)T+=K[M].length;switch(j){case"string":return K.join("");case"array":return Array.prototype.concat.apply([],K);case"uint8array":for(lt=new Uint8Array(T),M=0;M<K.length;M++)lt.set(K[M],at),at+=K[M].length;return lt;case"nodebuffer":return Buffer.concat(K);default:throw new Error("concat : unsupported type '"+j+"'")}}(x,C),A);m(W)}catch(j){g(j)}C=[]}).resume()})}function c(v,p,m){var g=p;switch(p){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=p,this._mimeType=m,r.checkSupport(g),this._worker=v.pipe(new o(g)),v.lock()}catch(C){this._worker=new s("error"),this._worker.error(C)}}c.prototype={accumulate:function(v){return k(this,v)},on:function(v,p){var m=this;return v==="data"?this._worker.on(v,function(g){p.call(m,g.data,g.meta)}):this._worker.on(v,function(){r.delay(p,arguments,m)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new w(this,{objectMode:this._outputType!=="nodebuffer"},v)}},i.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var r=new ArrayBuffer(0);try{a.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,a){for(var r=t("./utils"),o=t("./support"),s=t("./nodejsUtils"),h=t("./stream/GenericWorker"),y=new Array(256),l=0;l<256;l++)y[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;y[254]=y[254]=1;function w(){h.call(this,"utf-8 decode"),this.leftOver=null}function k(){h.call(this,"utf-8 encode")}a.utf8encode=function(c){return o.nodebuffer?s.newBufferFrom(c,"utf-8"):function(v){var p,m,g,C,x,O=v.length,A=0;for(C=0;C<O;C++)(64512&(m=v.charCodeAt(C)))==55296&&C+1<O&&(64512&(g=v.charCodeAt(C+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),C++),A+=m<128?1:m<2048?2:m<65536?3:4;for(p=o.uint8array?new Uint8Array(A):new Array(A),C=x=0;x<A;C++)(64512&(m=v.charCodeAt(C)))==55296&&C+1<O&&(64512&(g=v.charCodeAt(C+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),C++),m<128?p[x++]=m:(m<2048?p[x++]=192|m>>>6:(m<65536?p[x++]=224|m>>>12:(p[x++]=240|m>>>18,p[x++]=128|m>>>12&63),p[x++]=128|m>>>6&63),p[x++]=128|63&m);return p}(c)},a.utf8decode=function(c){return o.nodebuffer?r.transformTo("nodebuffer",c).toString("utf-8"):function(v){var p,m,g,C,x=v.length,O=new Array(2*x);for(p=m=0;p<x;)if((g=v[p++])<128)O[m++]=g;else if(4<(C=y[g]))O[m++]=65533,p+=C-1;else{for(g&=C===2?31:C===3?15:7;1<C&&p<x;)g=g<<6|63&v[p++],C--;1<C?O[m++]=65533:g<65536?O[m++]=g:(g-=65536,O[m++]=55296|g>>10&1023,O[m++]=56320|1023&g)}return O.length!==m&&(O.subarray?O=O.subarray(0,m):O.length=m),r.applyFromCharCode(O)}(c=r.transformTo(o.uint8array?"uint8array":"array",c))},r.inherits(w,h),w.prototype.processChunk=function(c){var v=r.transformTo(o.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var p=v;(v=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),v.set(p,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var m=function(C,x){var O;for((x=x||C.length)>C.length&&(x=C.length),O=x-1;0<=O&&(192&C[O])==128;)O--;return O<0||O===0?x:O+y[C[O]]>x?O:x}(v),g=v;m!==v.length&&(o.uint8array?(g=v.subarray(0,m),this.leftOver=v.subarray(m,v.length)):(g=v.slice(0,m),this.leftOver=v.slice(m,v.length))),this.push({data:a.utf8decode(g),meta:c.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=w,r.inherits(k,h),k.prototype.processChunk=function(c){this.push({data:a.utf8encode(c.data),meta:c.meta})},a.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,a){var r=t("./support"),o=t("./base64"),s=t("./nodejsUtils"),h=t("./external");function y(p){return p}function l(p,m){for(var g=0;g<p.length;++g)m[g]=255&p.charCodeAt(g);return m}t("setimmediate"),a.newBlob=function(p,m){a.checkSupport("blob");try{return new Blob([p],{type:m})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(p),g.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var w={stringifyByChunk:function(p,m,g){var C=[],x=0,O=p.length;if(O<=g)return String.fromCharCode.apply(null,p);for(;x<O;)m==="array"||m==="nodebuffer"?C.push(String.fromCharCode.apply(null,p.slice(x,Math.min(x+g,O)))):C.push(String.fromCharCode.apply(null,p.subarray(x,Math.min(x+g,O)))),x+=g;return C.join("")},stringifyByChar:function(p){for(var m="",g=0;g<p.length;g++)m+=String.fromCharCode(p[g]);return m},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function k(p){var m=65536,g=a.getTypeOf(p),C=!0;if(g==="uint8array"?C=w.applyCanBeUsed.uint8array:g==="nodebuffer"&&(C=w.applyCanBeUsed.nodebuffer),C)for(;1<m;)try{return w.stringifyByChunk(p,g,m)}catch{m=Math.floor(m/2)}return w.stringifyByChar(p)}function c(p,m){for(var g=0;g<p.length;g++)m[g]=p[g];return m}a.applyFromCharCode=k;var v={};v.string={string:y,array:function(p){return l(p,new Array(p.length))},arraybuffer:function(p){return v.string.uint8array(p).buffer},uint8array:function(p){return l(p,new Uint8Array(p.length))},nodebuffer:function(p){return l(p,s.allocBuffer(p.length))}},v.array={string:k,array:y,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return s.newBufferFrom(p)}},v.arraybuffer={string:function(p){return k(new Uint8Array(p))},array:function(p){return c(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:y,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return s.newBufferFrom(new Uint8Array(p))}},v.uint8array={string:k,array:function(p){return c(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:y,nodebuffer:function(p){return s.newBufferFrom(p)}},v.nodebuffer={string:k,array:function(p){return c(p,new Array(p.length))},arraybuffer:function(p){return v.nodebuffer.uint8array(p).buffer},uint8array:function(p){return c(p,new Uint8Array(p.length))},nodebuffer:y},a.transformTo=function(p,m){if(m=m||"",!p)return m;a.checkSupport(p);var g=a.getTypeOf(m);return v[g][p](m)},a.resolve=function(p){for(var m=p.split("/"),g=[],C=0;C<m.length;C++){var x=m[C];x==="."||x===""&&C!==0&&C!==m.length-1||(x===".."?g.pop():g.push(x))}return g.join("/")},a.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":r.nodebuffer&&s.isBuffer(p)?"nodebuffer":r.uint8array&&p instanceof Uint8Array?"uint8array":r.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(p){if(!r[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(p){var m,g,C="";for(g=0;g<(p||"").length;g++)C+="\\x"+((m=p.charCodeAt(g))<16?"0":"")+m.toString(16).toUpperCase();return C},a.delay=function(p,m,g){setImmediate(function(){p.apply(g||null,m||[])})},a.inherits=function(p,m){function g(){}g.prototype=m.prototype,p.prototype=new g},a.extend=function(){var p,m,g={};for(p=0;p<arguments.length;p++)for(m in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],m)&&g[m]===void 0&&(g[m]=arguments[p][m]);return g},a.prepareContent=function(p,m,g,C,x){return h.Promise.resolve(m).then(function(O){return r.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new h.Promise(function(A,W){var j=new FileReader;j.onload=function(K){A(K.target.result)},j.onerror=function(K){W(K.target.error)},j.readAsArrayBuffer(O)}):O}).then(function(O){var A=a.getTypeOf(O);return A?(A==="arraybuffer"?O=a.transformTo("uint8array",O):A==="string"&&(x?O=o.decode(O):g&&C!==!0&&(O=function(W){return l(W,r.uint8array?new Uint8Array(W.length):new Array(W.length))}(O))),O):h.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,a){var r=t("./reader/readerFor"),o=t("./utils"),s=t("./signature"),h=t("./zipEntry"),y=t("./support");function l(w){this.files=[],this.loadOptions=w}l.prototype={checkSignature:function(w){if(!this.reader.readAndCheckSignature(w)){this.reader.index-=4;var k=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(k)+", expected "+o.pretty(w)+")")}},isSignature:function(w,k){var c=this.reader.index;this.reader.setIndex(w);var v=this.reader.readString(4)===k;return this.reader.setIndex(c),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var w=this.reader.readData(this.zipCommentLength),k=y.uint8array?"uint8array":"array",c=o.transformTo(k,w);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var w,k,c,v=this.zip64EndOfCentralSize-44;0<v;)w=this.reader.readInt(2),k=this.reader.readInt(4),c=this.reader.readData(k),this.zip64ExtensibleData[w]={id:w,length:k,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var w,k;for(w=0;w<this.files.length;w++)k=this.files[w],this.reader.setIndex(k.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),k.readLocalPart(this.reader),k.handleUTF8(),k.processAttributes()},readCentralDir:function(){var w;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(w=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(w);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var w=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(w<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(w);var k=w;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(w=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(w),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var v=k-c;if(0<v)this.isSignature(k,s.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(w){this.reader=r(w)},load:function(w){this.prepareReader(w),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,a){var r=t("./reader/readerFor"),o=t("./utils"),s=t("./compressedObject"),h=t("./crc32"),y=t("./utf8"),l=t("./compressions"),w=t("./support");function k(c,v){this.options=c,this.loadOptions=v}k.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var v,p;if(c.skip(22),this.fileNameLength=c.readInt(2),p=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(m){for(var g in l)if(Object.prototype.hasOwnProperty.call(l,g)&&l[g].magic===m)return l[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,v,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var v=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(v),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var v,p,m,g=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<g;)v=c.readInt(2),p=c.readInt(2),m=c.readData(p),this.extraFields[v]={id:v,length:p,value:m};c.setIndex(g)},handleUTF8:function(){var c=w.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var p=o.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var g=o.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var v=r(c.value);return v.readInt(1)!==1||h(this.fileName)!==v.readInt(4)?null:y.utf8decode(v.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var v=r(c.value);return v.readInt(1)!==1||h(this.fileComment)!==v.readInt(4)?null:y.utf8decode(v.readData(c.length-5))}return null}},i.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,a){function r(v,p,m){this.name=v,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=p,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var o=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),h=t("./utf8"),y=t("./compressedObject"),l=t("./stream/GenericWorker");r.prototype={internalStream:function(v){var p=null,m="string";try{if(!v)throw new Error("No output type specified.");var g=(m=v.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),p=this._decompressWorker();var C=!this._dataBinary;C&&!g&&(p=p.pipe(new h.Utf8EncodeWorker)),!C&&g&&(p=p.pipe(new h.Utf8DecodeWorker))}catch(x){(p=new l("error")).error(x)}return new o(p,m,"")},async:function(v,p){return this.internalStream(v).accumulate(p)},nodeStream:function(v,p){return this.internalStream(v||"nodebuffer").toNodejsStream(p)},_compressWorker:function(v,p){if(this._data instanceof y&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new h.Utf8EncodeWorker)),y.createWorkerFrom(m,v,p)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof l?this._data:new s(this._data)}};for(var w=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<w.length;c++)r.prototype[w[c]]=k;i.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,a){(function(r){var o,s,h=r.MutationObserver||r.WebKitMutationObserver;if(h){var y=0,l=new h(v),w=r.document.createTextNode("");l.observe(w,{characterData:!0}),o=function(){w.data=y=++y%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var p=r.document.createElement("script");p.onreadystatechange=function(){v(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},r.document.documentElement.appendChild(p)}:function(){setTimeout(v,0)};else{var k=new r.MessageChannel;k.port1.onmessage=v,o=function(){k.port2.postMessage(0)}}var c=[];function v(){var p,m;s=!0;for(var g=c.length;g;){for(m=c,c=[],p=-1;++p<g;)m[p]();g=c.length}s=!1}i.exports=function(p){c.push(p)!==1||s||o()}}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,a){var r=t("immediate");function o(){}var s={},h=["REJECTED"],y=["FULFILLED"],l=["PENDING"];function w(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,g!==o&&p(this,g)}function k(g,C,x){this.promise=g,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function c(g,C,x){r(function(){var O;try{O=C(x)}catch(A){return s.reject(g,A)}O===g?s.reject(g,new TypeError("Cannot resolve promise with itself")):s.resolve(g,O)})}function v(g){var C=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof C=="function")return function(){C.apply(g,arguments)}}function p(g,C){var x=!1;function O(j){x||(x=!0,s.reject(g,j))}function A(j){x||(x=!0,s.resolve(g,j))}var W=m(function(){C(A,O)});W.status==="error"&&O(W.value)}function m(g,C){var x={};try{x.value=g(C),x.status="success"}catch(O){x.status="error",x.value=O}return x}(i.exports=w).prototype.finally=function(g){if(typeof g!="function")return this;var C=this.constructor;return this.then(function(x){return C.resolve(g()).then(function(){return x})},function(x){return C.resolve(g()).then(function(){throw x})})},w.prototype.catch=function(g){return this.then(null,g)},w.prototype.then=function(g,C){if(typeof g!="function"&&this.state===y||typeof C!="function"&&this.state===h)return this;var x=new this.constructor(o);return this.state!==l?c(x,this.state===y?g:C,this.outcome):this.queue.push(new k(x,g,C)),x},k.prototype.callFulfilled=function(g){s.resolve(this.promise,g)},k.prototype.otherCallFulfilled=function(g){c(this.promise,this.onFulfilled,g)},k.prototype.callRejected=function(g){s.reject(this.promise,g)},k.prototype.otherCallRejected=function(g){c(this.promise,this.onRejected,g)},s.resolve=function(g,C){var x=m(v,C);if(x.status==="error")return s.reject(g,x.value);var O=x.value;if(O)p(g,O);else{g.state=y,g.outcome=C;for(var A=-1,W=g.queue.length;++A<W;)g.queue[A].callFulfilled(C)}return g},s.reject=function(g,C){g.state=h,g.outcome=C;for(var x=-1,O=g.queue.length;++x<O;)g.queue[x].callRejected(C);return g},w.resolve=function(g){return g instanceof this?g:s.resolve(new this(o),g)},w.reject=function(g){var C=new this(o);return s.reject(C,g)},w.all=function(g){var C=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=g.length,O=!1;if(!x)return this.resolve([]);for(var A=new Array(x),W=0,j=-1,K=new this(o);++j<x;)M(g[j],j);return K;function M(at,lt){C.resolve(at).then(function(T){A[lt]=T,++W!==x||O||(O=!0,s.resolve(K,A))},function(T){O||(O=!0,s.reject(K,T))})}},w.race=function(g){var C=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=g.length,O=!1;if(!x)return this.resolve([]);for(var A=-1,W=new this(o);++A<x;)j=g[A],C.resolve(j).then(function(K){O||(O=!0,s.resolve(W,K))},function(K){O||(O=!0,s.reject(W,K))});var j;return W}},{immediate:36}],38:[function(t,i,a){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,a){var r=t("./zlib/deflate"),o=t("./utils/common"),s=t("./utils/strings"),h=t("./zlib/messages"),y=t("./zlib/zstream"),l=Object.prototype.toString,w=0,k=-1,c=0,v=8;function p(g){if(!(this instanceof p))return new p(g);this.options=o.assign({level:k,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},g||{});var C=this.options;C.raw&&0<C.windowBits?C.windowBits=-C.windowBits:C.gzip&&0<C.windowBits&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var x=r.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(x!==w)throw new Error(h[x]);if(C.header&&r.deflateSetHeader(this.strm,C.header),C.dictionary){var O;if(O=typeof C.dictionary=="string"?s.string2buf(C.dictionary):l.call(C.dictionary)==="[object ArrayBuffer]"?new Uint8Array(C.dictionary):C.dictionary,(x=r.deflateSetDictionary(this.strm,O))!==w)throw new Error(h[x]);this._dict_set=!0}}function m(g,C){var x=new p(C);if(x.push(g,!0),x.err)throw x.msg||h[x.err];return x.result}p.prototype.push=function(g,C){var x,O,A=this.strm,W=this.options.chunkSize;if(this.ended)return!1;O=C===~~C?C:C===!0?4:0,typeof g=="string"?A.input=s.string2buf(g):l.call(g)==="[object ArrayBuffer]"?A.input=new Uint8Array(g):A.input=g,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(W),A.next_out=0,A.avail_out=W),(x=r.deflate(A,O))!==1&&x!==w)return this.onEnd(x),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(A.output,A.next_out))):this.onData(o.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&x!==1);return O===4?(x=r.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===w):O!==2||(this.onEnd(w),!(A.avail_out=0))},p.prototype.onData=function(g){this.chunks.push(g)},p.prototype.onEnd=function(g){g===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},a.Deflate=p,a.deflate=m,a.deflateRaw=function(g,C){return(C=C||{}).raw=!0,m(g,C)},a.gzip=function(g,C){return(C=C||{}).gzip=!0,m(g,C)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,a){var r=t("./zlib/inflate"),o=t("./utils/common"),s=t("./utils/strings"),h=t("./zlib/constants"),y=t("./zlib/messages"),l=t("./zlib/zstream"),w=t("./zlib/gzheader"),k=Object.prototype.toString;function c(p){if(!(this instanceof c))return new c(p);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},p||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||p&&p.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&(15&m.windowBits)==0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var g=r.inflateInit2(this.strm,m.windowBits);if(g!==h.Z_OK)throw new Error(y[g]);this.header=new w,r.inflateGetHeader(this.strm,this.header)}function v(p,m){var g=new c(m);if(g.push(p,!0),g.err)throw g.msg||y[g.err];return g.result}c.prototype.push=function(p,m){var g,C,x,O,A,W,j=this.strm,K=this.options.chunkSize,M=this.options.dictionary,at=!1;if(this.ended)return!1;C=m===~~m?m:m===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof p=="string"?j.input=s.binstring2buf(p):k.call(p)==="[object ArrayBuffer]"?j.input=new Uint8Array(p):j.input=p,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(K),j.next_out=0,j.avail_out=K),(g=r.inflate(j,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&M&&(W=typeof M=="string"?s.string2buf(M):k.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,g=r.inflateSetDictionary(this.strm,W)),g===h.Z_BUF_ERROR&&at===!0&&(g=h.Z_OK,at=!1),g!==h.Z_STREAM_END&&g!==h.Z_OK)return this.onEnd(g),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&g!==h.Z_STREAM_END&&(j.avail_in!==0||C!==h.Z_FINISH&&C!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=s.utf8border(j.output,j.next_out),O=j.next_out-x,A=s.buf2string(j.output,x),j.next_out=O,j.avail_out=K-O,O&&o.arraySet(j.output,j.output,x,O,0),this.onData(A)):this.onData(o.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(at=!0)}while((0<j.avail_in||j.avail_out===0)&&g!==h.Z_STREAM_END);return g===h.Z_STREAM_END&&(C=h.Z_FINISH),C===h.Z_FINISH?(g=r.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===h.Z_OK):C!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(j.avail_out=0))},c.prototype.onData=function(p){this.chunks.push(p)},c.prototype.onEnd=function(p){p===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},a.Inflate=c,a.inflate=v,a.inflateRaw=function(p,m){return(m=m||{}).raw=!0,v(p,m)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,a){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(h){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var l=y.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var w in l)l.hasOwnProperty(w)&&(h[w]=l[w])}}return h},a.shrinkBuf=function(h,y){return h.length===y?h:h.subarray?h.subarray(0,y):(h.length=y,h)};var o={arraySet:function(h,y,l,w,k){if(y.subarray&&h.subarray)h.set(y.subarray(l,l+w),k);else for(var c=0;c<w;c++)h[k+c]=y[l+c]},flattenChunks:function(h){var y,l,w,k,c,v;for(y=w=0,l=h.length;y<l;y++)w+=h[y].length;for(v=new Uint8Array(w),y=k=0,l=h.length;y<l;y++)c=h[y],v.set(c,k),k+=c.length;return v}},s={arraySet:function(h,y,l,w,k){for(var c=0;c<w;c++)h[k+c]=y[l+c]},flattenChunks:function(h){return[].concat.apply([],h)}};a.setTyped=function(h){h?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(r)},{}],42:[function(t,i,a){var r=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var h=new r.Buf8(256),y=0;y<256;y++)h[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function l(w,k){if(k<65537&&(w.subarray&&s||!w.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(w,k));for(var c="",v=0;v<k;v++)c+=String.fromCharCode(w[v]);return c}h[254]=h[254]=1,a.string2buf=function(w){var k,c,v,p,m,g=w.length,C=0;for(p=0;p<g;p++)(64512&(c=w.charCodeAt(p)))==55296&&p+1<g&&(64512&(v=w.charCodeAt(p+1)))==56320&&(c=65536+(c-55296<<10)+(v-56320),p++),C+=c<128?1:c<2048?2:c<65536?3:4;for(k=new r.Buf8(C),p=m=0;m<C;p++)(64512&(c=w.charCodeAt(p)))==55296&&p+1<g&&(64512&(v=w.charCodeAt(p+1)))==56320&&(c=65536+(c-55296<<10)+(v-56320),p++),c<128?k[m++]=c:(c<2048?k[m++]=192|c>>>6:(c<65536?k[m++]=224|c>>>12:(k[m++]=240|c>>>18,k[m++]=128|c>>>12&63),k[m++]=128|c>>>6&63),k[m++]=128|63&c);return k},a.buf2binstring=function(w){return l(w,w.length)},a.binstring2buf=function(w){for(var k=new r.Buf8(w.length),c=0,v=k.length;c<v;c++)k[c]=w.charCodeAt(c);return k},a.buf2string=function(w,k){var c,v,p,m,g=k||w.length,C=new Array(2*g);for(c=v=0;c<g;)if((p=w[c++])<128)C[v++]=p;else if(4<(m=h[p]))C[v++]=65533,c+=m-1;else{for(p&=m===2?31:m===3?15:7;1<m&&c<g;)p=p<<6|63&w[c++],m--;1<m?C[v++]=65533:p<65536?C[v++]=p:(p-=65536,C[v++]=55296|p>>10&1023,C[v++]=56320|1023&p)}return l(C,v)},a.utf8border=function(w,k){var c;for((k=k||w.length)>w.length&&(k=w.length),c=k-1;0<=c&&(192&w[c])==128;)c--;return c<0||c===0?k:c+h[w[c]]>k?c:k}},{"./common":41}],43:[function(t,i,a){i.exports=function(r,o,s,h){for(var y=65535&r|0,l=r>>>16&65535|0,w=0;s!==0;){for(s-=w=2e3<s?2e3:s;l=l+(y=y+o[h++]|0)|0,--w;);y%=65521,l%=65521}return y|l<<16|0}},{}],44:[function(t,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,a){var r=function(){for(var o,s=[],h=0;h<256;h++){o=h;for(var y=0;y<8;y++)o=1&o?3988292384^o>>>1:o>>>1;s[h]=o}return s}();i.exports=function(o,s,h,y){var l=r,w=y+h;o^=-1;for(var k=y;k<w;k++)o=o>>>8^l[255&(o^s[k])];return-1^o}},{}],46:[function(t,i,a){var r,o=t("../utils/common"),s=t("./trees"),h=t("./adler32"),y=t("./crc32"),l=t("./messages"),w=0,k=4,c=0,v=-2,p=-1,m=4,g=2,C=8,x=9,O=286,A=30,W=19,j=2*O+1,K=15,M=3,at=258,lt=at+M+1,T=42,L=113,f=1,B=2,pt=3,Q=4;function ot(u,z){return u.msg=l[z],z}function et(u){return(u<<1)-(4<u?9:0)}function mt(u){for(var z=u.length;0<=--z;)u[z]=0}function U(u){var z=u.state,F=z.pending;F>u.avail_out&&(F=u.avail_out),F!==0&&(o.arraySet(u.output,z.pending_buf,z.pending_out,F,u.next_out),u.next_out+=F,z.pending_out+=F,u.total_out+=F,u.avail_out-=F,z.pending-=F,z.pending===0&&(z.pending_out=0))}function R(u,z){s._tr_flush_block(u,0<=u.block_start?u.block_start:-1,u.strstart-u.block_start,z),u.block_start=u.strstart,U(u.strm)}function J(u,z){u.pending_buf[u.pending++]=z}function H(u,z){u.pending_buf[u.pending++]=z>>>8&255,u.pending_buf[u.pending++]=255&z}function G(u,z){var F,S,b=u.max_chain_length,D=u.strstart,Z=u.prev_length,rt=u.nice_match,N=u.strstart>u.w_size-lt?u.strstart-(u.w_size-lt):0,it=u.window,V=u.w_mask,tt=u.prev,dt=u.strstart+at,Et=it[D+Z-1],Ct=it[D+Z];u.prev_length>=u.good_match&&(b>>=2),rt>u.lookahead&&(rt=u.lookahead);do if(it[(F=z)+Z]===Ct&&it[F+Z-1]===Et&&it[F]===it[D]&&it[++F]===it[D+1]){D+=2,F++;do;while(it[++D]===it[++F]&&it[++D]===it[++F]&&it[++D]===it[++F]&&it[++D]===it[++F]&&it[++D]===it[++F]&&it[++D]===it[++F]&&it[++D]===it[++F]&&it[++D]===it[++F]&&D<dt);if(S=at-(dt-D),D=dt-at,Z<S){if(u.match_start=z,rt<=(Z=S))break;Et=it[D+Z-1],Ct=it[D+Z]}}while((z=tt[z&V])>N&&--b!=0);return Z<=u.lookahead?Z:u.lookahead}function P(u){var z,F,S,b,D,Z,rt,N,it,V,tt=u.w_size;do{if(b=u.window_size-u.lookahead-u.strstart,u.strstart>=tt+(tt-lt)){for(o.arraySet(u.window,u.window,tt,tt,0),u.match_start-=tt,u.strstart-=tt,u.block_start-=tt,z=F=u.hash_size;S=u.head[--z],u.head[z]=tt<=S?S-tt:0,--F;);for(z=F=tt;S=u.prev[--z],u.prev[z]=tt<=S?S-tt:0,--F;);b+=tt}if(u.strm.avail_in===0)break;if(Z=u.strm,rt=u.window,N=u.strstart+u.lookahead,it=b,V=void 0,V=Z.avail_in,it<V&&(V=it),F=V===0?0:(Z.avail_in-=V,o.arraySet(rt,Z.input,Z.next_in,V,N),Z.state.wrap===1?Z.adler=h(Z.adler,rt,V,N):Z.state.wrap===2&&(Z.adler=y(Z.adler,rt,V,N)),Z.next_in+=V,Z.total_in+=V,V),u.lookahead+=F,u.lookahead+u.insert>=M)for(D=u.strstart-u.insert,u.ins_h=u.window[D],u.ins_h=(u.ins_h<<u.hash_shift^u.window[D+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[D+M-1])&u.hash_mask,u.prev[D&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=D,D++,u.insert--,!(u.lookahead+u.insert<M)););}while(u.lookahead<lt&&u.strm.avail_in!==0)}function bt(u,z){for(var F,S;;){if(u.lookahead<lt){if(P(u),u.lookahead<lt&&z===w)return f;if(u.lookahead===0)break}if(F=0,u.lookahead>=M&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+M-1])&u.hash_mask,F=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),F!==0&&u.strstart-F<=u.w_size-lt&&(u.match_length=G(u,F)),u.match_length>=M)if(S=s._tr_tally(u,u.strstart-u.match_start,u.match_length-M),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=M){for(u.match_length--;u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+M-1])&u.hash_mask,F=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart,--u.match_length!=0;);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else S=s._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(S&&(R(u,!1),u.strm.avail_out===0))return f}return u.insert=u.strstart<M-1?u.strstart:M-1,z===k?(R(u,!0),u.strm.avail_out===0?pt:Q):u.last_lit&&(R(u,!1),u.strm.avail_out===0)?f:B}function q(u,z){for(var F,S,b;;){if(u.lookahead<lt){if(P(u),u.lookahead<lt&&z===w)return f;if(u.lookahead===0)break}if(F=0,u.lookahead>=M&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+M-1])&u.hash_mask,F=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=M-1,F!==0&&u.prev_length<u.max_lazy_match&&u.strstart-F<=u.w_size-lt&&(u.match_length=G(u,F),u.match_length<=5&&(u.strategy===1||u.match_length===M&&4096<u.strstart-u.match_start)&&(u.match_length=M-1)),u.prev_length>=M&&u.match_length<=u.prev_length){for(b=u.strstart+u.lookahead-M,S=s._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-M),u.lookahead-=u.prev_length-1,u.prev_length-=2;++u.strstart<=b&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+M-1])&u.hash_mask,F=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),--u.prev_length!=0;);if(u.match_available=0,u.match_length=M-1,u.strstart++,S&&(R(u,!1),u.strm.avail_out===0))return f}else if(u.match_available){if((S=s._tr_tally(u,0,u.window[u.strstart-1]))&&R(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return f}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(S=s._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<M-1?u.strstart:M-1,z===k?(R(u,!0),u.strm.avail_out===0?pt:Q):u.last_lit&&(R(u,!1),u.strm.avail_out===0)?f:B}function ft(u,z,F,S,b){this.good_length=u,this.max_lazy=z,this.nice_length=F,this.max_chain=S,this.func=b}function gt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*j),this.dyn_dtree=new o.Buf16(2*(2*A+1)),this.bl_tree=new o.Buf16(2*(2*W+1)),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(K+1),this.heap=new o.Buf16(2*O+1),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*O+1),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _t(u){var z;return u&&u.state?(u.total_in=u.total_out=0,u.data_type=g,(z=u.state).pending=0,z.pending_out=0,z.wrap<0&&(z.wrap=-z.wrap),z.status=z.wrap?T:L,u.adler=z.wrap===2?0:1,z.last_flush=w,s._tr_init(z),c):ot(u,v)}function nt(u){var z=_t(u);return z===c&&function(F){F.window_size=2*F.w_size,mt(F.head),F.max_lazy_match=r[F.level].max_lazy,F.good_match=r[F.level].good_length,F.nice_match=r[F.level].nice_length,F.max_chain_length=r[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=M-1,F.match_available=0,F.ins_h=0}(u.state),z}function St(u,z,F,S,b,D){if(!u)return v;var Z=1;if(z===p&&(z=6),S<0?(Z=0,S=-S):15<S&&(Z=2,S-=16),b<1||x<b||F!==C||S<8||15<S||z<0||9<z||D<0||m<D)return ot(u,v);S===8&&(S=9);var rt=new gt;return(u.state=rt).strm=u,rt.wrap=Z,rt.gzhead=null,rt.w_bits=S,rt.w_size=1<<rt.w_bits,rt.w_mask=rt.w_size-1,rt.hash_bits=b+7,rt.hash_size=1<<rt.hash_bits,rt.hash_mask=rt.hash_size-1,rt.hash_shift=~~((rt.hash_bits+M-1)/M),rt.window=new o.Buf8(2*rt.w_size),rt.head=new o.Buf16(rt.hash_size),rt.prev=new o.Buf16(rt.w_size),rt.lit_bufsize=1<<b+6,rt.pending_buf_size=4*rt.lit_bufsize,rt.pending_buf=new o.Buf8(rt.pending_buf_size),rt.d_buf=1*rt.lit_bufsize,rt.l_buf=3*rt.lit_bufsize,rt.level=z,rt.strategy=D,rt.method=F,nt(u)}r=[new ft(0,0,0,0,function(u,z){var F=65535;for(F>u.pending_buf_size-5&&(F=u.pending_buf_size-5);;){if(u.lookahead<=1){if(P(u),u.lookahead===0&&z===w)return f;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var S=u.block_start+F;if((u.strstart===0||u.strstart>=S)&&(u.lookahead=u.strstart-S,u.strstart=S,R(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-lt&&(R(u,!1),u.strm.avail_out===0))return f}return u.insert=0,z===k?(R(u,!0),u.strm.avail_out===0?pt:Q):(u.strstart>u.block_start&&(R(u,!1),u.strm.avail_out),f)}),new ft(4,4,8,4,bt),new ft(4,5,16,8,bt),new ft(4,6,32,32,bt),new ft(4,4,16,16,q),new ft(8,16,32,32,q),new ft(8,16,128,128,q),new ft(8,32,128,256,q),new ft(32,128,258,1024,q),new ft(32,258,258,4096,q)],a.deflateInit=function(u,z){return St(u,z,C,15,8,0)},a.deflateInit2=St,a.deflateReset=nt,a.deflateResetKeep=_t,a.deflateSetHeader=function(u,z){return u&&u.state?u.state.wrap!==2?v:(u.state.gzhead=z,c):v},a.deflate=function(u,z){var F,S,b,D;if(!u||!u.state||5<z||z<0)return u?ot(u,v):v;if(S=u.state,!u.output||!u.input&&u.avail_in!==0||S.status===666&&z!==k)return ot(u,u.avail_out===0?-5:v);if(S.strm=u,F=S.last_flush,S.last_flush=z,S.status===T)if(S.wrap===2)u.adler=0,J(S,31),J(S,139),J(S,8),S.gzhead?(J(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),J(S,255&S.gzhead.time),J(S,S.gzhead.time>>8&255),J(S,S.gzhead.time>>16&255),J(S,S.gzhead.time>>24&255),J(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),J(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(J(S,255&S.gzhead.extra.length),J(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(u.adler=y(u.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=69):(J(S,0),J(S,0),J(S,0),J(S,0),J(S,0),J(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),J(S,3),S.status=L);else{var Z=C+(S.w_bits-8<<4)<<8;Z|=(2<=S.strategy||S.level<2?0:S.level<6?1:S.level===6?2:3)<<6,S.strstart!==0&&(Z|=32),Z+=31-Z%31,S.status=L,H(S,Z),S.strstart!==0&&(H(S,u.adler>>>16),H(S,65535&u.adler)),u.adler=1}if(S.status===69)if(S.gzhead.extra){for(b=S.pending;S.gzindex<(65535&S.gzhead.extra.length)&&(S.pending!==S.pending_buf_size||(S.gzhead.hcrc&&S.pending>b&&(u.adler=y(u.adler,S.pending_buf,S.pending-b,b)),U(u),b=S.pending,S.pending!==S.pending_buf_size));)J(S,255&S.gzhead.extra[S.gzindex]),S.gzindex++;S.gzhead.hcrc&&S.pending>b&&(u.adler=y(u.adler,S.pending_buf,S.pending-b,b)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=73)}else S.status=73;if(S.status===73)if(S.gzhead.name){b=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>b&&(u.adler=y(u.adler,S.pending_buf,S.pending-b,b)),U(u),b=S.pending,S.pending===S.pending_buf_size)){D=1;break}D=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,J(S,D)}while(D!==0);S.gzhead.hcrc&&S.pending>b&&(u.adler=y(u.adler,S.pending_buf,S.pending-b,b)),D===0&&(S.gzindex=0,S.status=91)}else S.status=91;if(S.status===91)if(S.gzhead.comment){b=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>b&&(u.adler=y(u.adler,S.pending_buf,S.pending-b,b)),U(u),b=S.pending,S.pending===S.pending_buf_size)){D=1;break}D=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,J(S,D)}while(D!==0);S.gzhead.hcrc&&S.pending>b&&(u.adler=y(u.adler,S.pending_buf,S.pending-b,b)),D===0&&(S.status=103)}else S.status=103;if(S.status===103&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&U(u),S.pending+2<=S.pending_buf_size&&(J(S,255&u.adler),J(S,u.adler>>8&255),u.adler=0,S.status=L)):S.status=L),S.pending!==0){if(U(u),u.avail_out===0)return S.last_flush=-1,c}else if(u.avail_in===0&&et(z)<=et(F)&&z!==k)return ot(u,-5);if(S.status===666&&u.avail_in!==0)return ot(u,-5);if(u.avail_in!==0||S.lookahead!==0||z!==w&&S.status!==666){var rt=S.strategy===2?function(N,it){for(var V;;){if(N.lookahead===0&&(P(N),N.lookahead===0)){if(it===w)return f;break}if(N.match_length=0,V=s._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,V&&(R(N,!1),N.strm.avail_out===0))return f}return N.insert=0,it===k?(R(N,!0),N.strm.avail_out===0?pt:Q):N.last_lit&&(R(N,!1),N.strm.avail_out===0)?f:B}(S,z):S.strategy===3?function(N,it){for(var V,tt,dt,Et,Ct=N.window;;){if(N.lookahead<=at){if(P(N),N.lookahead<=at&&it===w)return f;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=M&&0<N.strstart&&(tt=Ct[dt=N.strstart-1])===Ct[++dt]&&tt===Ct[++dt]&&tt===Ct[++dt]){Et=N.strstart+at;do;while(tt===Ct[++dt]&&tt===Ct[++dt]&&tt===Ct[++dt]&&tt===Ct[++dt]&&tt===Ct[++dt]&&tt===Ct[++dt]&&tt===Ct[++dt]&&tt===Ct[++dt]&&dt<Et);N.match_length=at-(Et-dt),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=M?(V=s._tr_tally(N,1,N.match_length-M),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(V=s._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),V&&(R(N,!1),N.strm.avail_out===0))return f}return N.insert=0,it===k?(R(N,!0),N.strm.avail_out===0?pt:Q):N.last_lit&&(R(N,!1),N.strm.avail_out===0)?f:B}(S,z):r[S.level].func(S,z);if(rt!==pt&&rt!==Q||(S.status=666),rt===f||rt===pt)return u.avail_out===0&&(S.last_flush=-1),c;if(rt===B&&(z===1?s._tr_align(S):z!==5&&(s._tr_stored_block(S,0,0,!1),z===3&&(mt(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),U(u),u.avail_out===0))return S.last_flush=-1,c}return z!==k?c:S.wrap<=0?1:(S.wrap===2?(J(S,255&u.adler),J(S,u.adler>>8&255),J(S,u.adler>>16&255),J(S,u.adler>>24&255),J(S,255&u.total_in),J(S,u.total_in>>8&255),J(S,u.total_in>>16&255),J(S,u.total_in>>24&255)):(H(S,u.adler>>>16),H(S,65535&u.adler)),U(u),0<S.wrap&&(S.wrap=-S.wrap),S.pending!==0?c:1)},a.deflateEnd=function(u){var z;return u&&u.state?(z=u.state.status)!==T&&z!==69&&z!==73&&z!==91&&z!==103&&z!==L&&z!==666?ot(u,v):(u.state=null,z===L?ot(u,-3):c):v},a.deflateSetDictionary=function(u,z){var F,S,b,D,Z,rt,N,it,V=z.length;if(!u||!u.state||(D=(F=u.state).wrap)===2||D===1&&F.status!==T||F.lookahead)return v;for(D===1&&(u.adler=h(u.adler,z,V,0)),F.wrap=0,V>=F.w_size&&(D===0&&(mt(F.head),F.strstart=0,F.block_start=0,F.insert=0),it=new o.Buf8(F.w_size),o.arraySet(it,z,V-F.w_size,F.w_size,0),z=it,V=F.w_size),Z=u.avail_in,rt=u.next_in,N=u.input,u.avail_in=V,u.next_in=0,u.input=z,P(F);F.lookahead>=M;){for(S=F.strstart,b=F.lookahead-(M-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[S+M-1])&F.hash_mask,F.prev[S&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=S,S++,--b;);F.strstart=S,F.lookahead=M-1,P(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=M-1,F.match_available=0,u.next_in=rt,u.input=N,u.avail_in=Z,F.wrap=D,c},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,a){i.exports=function(r,o){var s,h,y,l,w,k,c,v,p,m,g,C,x,O,A,W,j,K,M,at,lt,T,L,f,B;s=r.state,h=r.next_in,f=r.input,y=h+(r.avail_in-5),l=r.next_out,B=r.output,w=l-(o-r.avail_out),k=l+(r.avail_out-257),c=s.dmax,v=s.wsize,p=s.whave,m=s.wnext,g=s.window,C=s.hold,x=s.bits,O=s.lencode,A=s.distcode,W=(1<<s.lenbits)-1,j=(1<<s.distbits)-1;t:do{x<15&&(C+=f[h++]<<x,x+=8,C+=f[h++]<<x,x+=8),K=O[C&W];e:for(;;){if(C>>>=M=K>>>24,x-=M,(M=K>>>16&255)===0)B[l++]=65535&K;else{if(!(16&M)){if((64&M)==0){K=O[(65535&K)+(C&(1<<M)-1)];continue e}if(32&M){s.mode=12;break t}r.msg="invalid literal/length code",s.mode=30;break t}at=65535&K,(M&=15)&&(x<M&&(C+=f[h++]<<x,x+=8),at+=C&(1<<M)-1,C>>>=M,x-=M),x<15&&(C+=f[h++]<<x,x+=8,C+=f[h++]<<x,x+=8),K=A[C&j];n:for(;;){if(C>>>=M=K>>>24,x-=M,!(16&(M=K>>>16&255))){if((64&M)==0){K=A[(65535&K)+(C&(1<<M)-1)];continue n}r.msg="invalid distance code",s.mode=30;break t}if(lt=65535&K,x<(M&=15)&&(C+=f[h++]<<x,(x+=8)<M&&(C+=f[h++]<<x,x+=8)),c<(lt+=C&(1<<M)-1)){r.msg="invalid distance too far back",s.mode=30;break t}if(C>>>=M,x-=M,(M=l-w)<lt){if(p<(M=lt-M)&&s.sane){r.msg="invalid distance too far back",s.mode=30;break t}if(L=g,(T=0)===m){if(T+=v-M,M<at){for(at-=M;B[l++]=g[T++],--M;);T=l-lt,L=B}}else if(m<M){if(T+=v+m-M,(M-=m)<at){for(at-=M;B[l++]=g[T++],--M;);if(T=0,m<at){for(at-=M=m;B[l++]=g[T++],--M;);T=l-lt,L=B}}}else if(T+=m-M,M<at){for(at-=M;B[l++]=g[T++],--M;);T=l-lt,L=B}for(;2<at;)B[l++]=L[T++],B[l++]=L[T++],B[l++]=L[T++],at-=3;at&&(B[l++]=L[T++],1<at&&(B[l++]=L[T++]))}else{for(T=l-lt;B[l++]=B[T++],B[l++]=B[T++],B[l++]=B[T++],2<(at-=3););at&&(B[l++]=B[T++],1<at&&(B[l++]=B[T++]))}break}}break}}while(h<y&&l<k);h-=at=x>>3,C&=(1<<(x-=at<<3))-1,r.next_in=h,r.next_out=l,r.avail_in=h<y?y-h+5:5-(h-y),r.avail_out=l<k?k-l+257:257-(l-k),s.hold=C,s.bits=x}},{}],49:[function(t,i,a){var r=t("../utils/common"),o=t("./adler32"),s=t("./crc32"),h=t("./inffast"),y=t("./inftrees"),l=1,w=2,k=0,c=-2,v=1,p=852,m=592;function g(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(T){var L;return T&&T.state?(L=T.state,T.total_in=T.total_out=L.total=0,T.msg="",L.wrap&&(T.adler=1&L.wrap),L.mode=v,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new r.Buf32(p),L.distcode=L.distdyn=new r.Buf32(m),L.sane=1,L.back=-1,k):c}function O(T){var L;return T&&T.state?((L=T.state).wsize=0,L.whave=0,L.wnext=0,x(T)):c}function A(T,L){var f,B;return T&&T.state?(B=T.state,L<0?(f=0,L=-L):(f=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?c:(B.window!==null&&B.wbits!==L&&(B.window=null),B.wrap=f,B.wbits=L,O(T))):c}function W(T,L){var f,B;return T?(B=new C,(T.state=B).window=null,(f=A(T,L))!==k&&(T.state=null),f):c}var j,K,M=!0;function at(T){if(M){var L;for(j=new r.Buf32(512),K=new r.Buf32(32),L=0;L<144;)T.lens[L++]=8;for(;L<256;)T.lens[L++]=9;for(;L<280;)T.lens[L++]=7;for(;L<288;)T.lens[L++]=8;for(y(l,T.lens,0,288,j,0,T.work,{bits:9}),L=0;L<32;)T.lens[L++]=5;y(w,T.lens,0,32,K,0,T.work,{bits:5}),M=!1}T.lencode=j,T.lenbits=9,T.distcode=K,T.distbits=5}function lt(T,L,f,B){var pt,Q=T.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new r.Buf8(Q.wsize)),B>=Q.wsize?(r.arraySet(Q.window,L,f-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(B<(pt=Q.wsize-Q.wnext)&&(pt=B),r.arraySet(Q.window,L,f-B,pt,Q.wnext),(B-=pt)?(r.arraySet(Q.window,L,f-B,B,0),Q.wnext=B,Q.whave=Q.wsize):(Q.wnext+=pt,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=pt))),0}a.inflateReset=O,a.inflateReset2=A,a.inflateResetKeep=x,a.inflateInit=function(T){return W(T,15)},a.inflateInit2=W,a.inflate=function(T,L){var f,B,pt,Q,ot,et,mt,U,R,J,H,G,P,bt,q,ft,gt,_t,nt,St,u,z,F,S,b=0,D=new r.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return c;(f=T.state).mode===12&&(f.mode=13),ot=T.next_out,pt=T.output,mt=T.avail_out,Q=T.next_in,B=T.input,et=T.avail_in,U=f.hold,R=f.bits,J=et,H=mt,z=k;t:for(;;)switch(f.mode){case v:if(f.wrap===0){f.mode=13;break}for(;R<16;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}if(2&f.wrap&&U===35615){D[f.check=0]=255&U,D[1]=U>>>8&255,f.check=s(f.check,D,2,0),R=U=0,f.mode=2;break}if(f.flags=0,f.head&&(f.head.done=!1),!(1&f.wrap)||(((255&U)<<8)+(U>>8))%31){T.msg="incorrect header check",f.mode=30;break}if((15&U)!=8){T.msg="unknown compression method",f.mode=30;break}if(R-=4,u=8+(15&(U>>>=4)),f.wbits===0)f.wbits=u;else if(u>f.wbits){T.msg="invalid window size",f.mode=30;break}f.dmax=1<<u,T.adler=f.check=1,f.mode=512&U?10:12,R=U=0;break;case 2:for(;R<16;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}if(f.flags=U,(255&f.flags)!=8){T.msg="unknown compression method",f.mode=30;break}if(57344&f.flags){T.msg="unknown header flags set",f.mode=30;break}f.head&&(f.head.text=U>>8&1),512&f.flags&&(D[0]=255&U,D[1]=U>>>8&255,f.check=s(f.check,D,2,0)),R=U=0,f.mode=3;case 3:for(;R<32;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}f.head&&(f.head.time=U),512&f.flags&&(D[0]=255&U,D[1]=U>>>8&255,D[2]=U>>>16&255,D[3]=U>>>24&255,f.check=s(f.check,D,4,0)),R=U=0,f.mode=4;case 4:for(;R<16;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}f.head&&(f.head.xflags=255&U,f.head.os=U>>8),512&f.flags&&(D[0]=255&U,D[1]=U>>>8&255,f.check=s(f.check,D,2,0)),R=U=0,f.mode=5;case 5:if(1024&f.flags){for(;R<16;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}f.length=U,f.head&&(f.head.extra_len=U),512&f.flags&&(D[0]=255&U,D[1]=U>>>8&255,f.check=s(f.check,D,2,0)),R=U=0}else f.head&&(f.head.extra=null);f.mode=6;case 6:if(1024&f.flags&&(et<(G=f.length)&&(G=et),G&&(f.head&&(u=f.head.extra_len-f.length,f.head.extra||(f.head.extra=new Array(f.head.extra_len)),r.arraySet(f.head.extra,B,Q,G,u)),512&f.flags&&(f.check=s(f.check,B,G,Q)),et-=G,Q+=G,f.length-=G),f.length))break t;f.length=0,f.mode=7;case 7:if(2048&f.flags){if(et===0)break t;for(G=0;u=B[Q+G++],f.head&&u&&f.length<65536&&(f.head.name+=String.fromCharCode(u)),u&&G<et;);if(512&f.flags&&(f.check=s(f.check,B,G,Q)),et-=G,Q+=G,u)break t}else f.head&&(f.head.name=null);f.length=0,f.mode=8;case 8:if(4096&f.flags){if(et===0)break t;for(G=0;u=B[Q+G++],f.head&&u&&f.length<65536&&(f.head.comment+=String.fromCharCode(u)),u&&G<et;);if(512&f.flags&&(f.check=s(f.check,B,G,Q)),et-=G,Q+=G,u)break t}else f.head&&(f.head.comment=null);f.mode=9;case 9:if(512&f.flags){for(;R<16;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}if(U!==(65535&f.check)){T.msg="header crc mismatch",f.mode=30;break}R=U=0}f.head&&(f.head.hcrc=f.flags>>9&1,f.head.done=!0),T.adler=f.check=0,f.mode=12;break;case 10:for(;R<32;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}T.adler=f.check=g(U),R=U=0,f.mode=11;case 11:if(f.havedict===0)return T.next_out=ot,T.avail_out=mt,T.next_in=Q,T.avail_in=et,f.hold=U,f.bits=R,2;T.adler=f.check=1,f.mode=12;case 12:if(L===5||L===6)break t;case 13:if(f.last){U>>>=7&R,R-=7&R,f.mode=27;break}for(;R<3;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}switch(f.last=1&U,R-=1,3&(U>>>=1)){case 0:f.mode=14;break;case 1:if(at(f),f.mode=20,L!==6)break;U>>>=2,R-=2;break t;case 2:f.mode=17;break;case 3:T.msg="invalid block type",f.mode=30}U>>>=2,R-=2;break;case 14:for(U>>>=7&R,R-=7&R;R<32;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}if((65535&U)!=(U>>>16^65535)){T.msg="invalid stored block lengths",f.mode=30;break}if(f.length=65535&U,R=U=0,f.mode=15,L===6)break t;case 15:f.mode=16;case 16:if(G=f.length){if(et<G&&(G=et),mt<G&&(G=mt),G===0)break t;r.arraySet(pt,B,Q,G,ot),et-=G,Q+=G,mt-=G,ot+=G,f.length-=G;break}f.mode=12;break;case 17:for(;R<14;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}if(f.nlen=257+(31&U),U>>>=5,R-=5,f.ndist=1+(31&U),U>>>=5,R-=5,f.ncode=4+(15&U),U>>>=4,R-=4,286<f.nlen||30<f.ndist){T.msg="too many length or distance symbols",f.mode=30;break}f.have=0,f.mode=18;case 18:for(;f.have<f.ncode;){for(;R<3;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}f.lens[Z[f.have++]]=7&U,U>>>=3,R-=3}for(;f.have<19;)f.lens[Z[f.have++]]=0;if(f.lencode=f.lendyn,f.lenbits=7,F={bits:f.lenbits},z=y(0,f.lens,0,19,f.lencode,0,f.work,F),f.lenbits=F.bits,z){T.msg="invalid code lengths set",f.mode=30;break}f.have=0,f.mode=19;case 19:for(;f.have<f.nlen+f.ndist;){for(;ft=(b=f.lencode[U&(1<<f.lenbits)-1])>>>16&255,gt=65535&b,!((q=b>>>24)<=R);){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}if(gt<16)U>>>=q,R-=q,f.lens[f.have++]=gt;else{if(gt===16){for(S=q+2;R<S;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}if(U>>>=q,R-=q,f.have===0){T.msg="invalid bit length repeat",f.mode=30;break}u=f.lens[f.have-1],G=3+(3&U),U>>>=2,R-=2}else if(gt===17){for(S=q+3;R<S;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}R-=q,u=0,G=3+(7&(U>>>=q)),U>>>=3,R-=3}else{for(S=q+7;R<S;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}R-=q,u=0,G=11+(127&(U>>>=q)),U>>>=7,R-=7}if(f.have+G>f.nlen+f.ndist){T.msg="invalid bit length repeat",f.mode=30;break}for(;G--;)f.lens[f.have++]=u}}if(f.mode===30)break;if(f.lens[256]===0){T.msg="invalid code -- missing end-of-block",f.mode=30;break}if(f.lenbits=9,F={bits:f.lenbits},z=y(l,f.lens,0,f.nlen,f.lencode,0,f.work,F),f.lenbits=F.bits,z){T.msg="invalid literal/lengths set",f.mode=30;break}if(f.distbits=6,f.distcode=f.distdyn,F={bits:f.distbits},z=y(w,f.lens,f.nlen,f.ndist,f.distcode,0,f.work,F),f.distbits=F.bits,z){T.msg="invalid distances set",f.mode=30;break}if(f.mode=20,L===6)break t;case 20:f.mode=21;case 21:if(6<=et&&258<=mt){T.next_out=ot,T.avail_out=mt,T.next_in=Q,T.avail_in=et,f.hold=U,f.bits=R,h(T,H),ot=T.next_out,pt=T.output,mt=T.avail_out,Q=T.next_in,B=T.input,et=T.avail_in,U=f.hold,R=f.bits,f.mode===12&&(f.back=-1);break}for(f.back=0;ft=(b=f.lencode[U&(1<<f.lenbits)-1])>>>16&255,gt=65535&b,!((q=b>>>24)<=R);){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}if(ft&&(240&ft)==0){for(_t=q,nt=ft,St=gt;ft=(b=f.lencode[St+((U&(1<<_t+nt)-1)>>_t)])>>>16&255,gt=65535&b,!(_t+(q=b>>>24)<=R);){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}U>>>=_t,R-=_t,f.back+=_t}if(U>>>=q,R-=q,f.back+=q,f.length=gt,ft===0){f.mode=26;break}if(32&ft){f.back=-1,f.mode=12;break}if(64&ft){T.msg="invalid literal/length code",f.mode=30;break}f.extra=15&ft,f.mode=22;case 22:if(f.extra){for(S=f.extra;R<S;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}f.length+=U&(1<<f.extra)-1,U>>>=f.extra,R-=f.extra,f.back+=f.extra}f.was=f.length,f.mode=23;case 23:for(;ft=(b=f.distcode[U&(1<<f.distbits)-1])>>>16&255,gt=65535&b,!((q=b>>>24)<=R);){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}if((240&ft)==0){for(_t=q,nt=ft,St=gt;ft=(b=f.distcode[St+((U&(1<<_t+nt)-1)>>_t)])>>>16&255,gt=65535&b,!(_t+(q=b>>>24)<=R);){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}U>>>=_t,R-=_t,f.back+=_t}if(U>>>=q,R-=q,f.back+=q,64&ft){T.msg="invalid distance code",f.mode=30;break}f.offset=gt,f.extra=15&ft,f.mode=24;case 24:if(f.extra){for(S=f.extra;R<S;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}f.offset+=U&(1<<f.extra)-1,U>>>=f.extra,R-=f.extra,f.back+=f.extra}if(f.offset>f.dmax){T.msg="invalid distance too far back",f.mode=30;break}f.mode=25;case 25:if(mt===0)break t;if(G=H-mt,f.offset>G){if((G=f.offset-G)>f.whave&&f.sane){T.msg="invalid distance too far back",f.mode=30;break}P=G>f.wnext?(G-=f.wnext,f.wsize-G):f.wnext-G,G>f.length&&(G=f.length),bt=f.window}else bt=pt,P=ot-f.offset,G=f.length;for(mt<G&&(G=mt),mt-=G,f.length-=G;pt[ot++]=bt[P++],--G;);f.length===0&&(f.mode=21);break;case 26:if(mt===0)break t;pt[ot++]=f.length,mt--,f.mode=21;break;case 27:if(f.wrap){for(;R<32;){if(et===0)break t;et--,U|=B[Q++]<<R,R+=8}if(H-=mt,T.total_out+=H,f.total+=H,H&&(T.adler=f.check=f.flags?s(f.check,pt,H,ot-H):o(f.check,pt,H,ot-H)),H=mt,(f.flags?U:g(U))!==f.check){T.msg="incorrect data check",f.mode=30;break}R=U=0}f.mode=28;case 28:if(f.wrap&&f.flags){for(;R<32;){if(et===0)break t;et--,U+=B[Q++]<<R,R+=8}if(U!==(4294967295&f.total)){T.msg="incorrect length check",f.mode=30;break}R=U=0}f.mode=29;case 29:z=1;break t;case 30:z=-3;break t;case 31:return-4;case 32:default:return c}return T.next_out=ot,T.avail_out=mt,T.next_in=Q,T.avail_in=et,f.hold=U,f.bits=R,(f.wsize||H!==T.avail_out&&f.mode<30&&(f.mode<27||L!==4))&&lt(T,T.output,T.next_out,H-T.avail_out)?(f.mode=31,-4):(J-=T.avail_in,H-=T.avail_out,T.total_in+=J,T.total_out+=H,f.total+=H,f.wrap&&H&&(T.adler=f.check=f.flags?s(f.check,pt,H,T.next_out-H):o(f.check,pt,H,T.next_out-H)),T.data_type=f.bits+(f.last?64:0)+(f.mode===12?128:0)+(f.mode===20||f.mode===15?256:0),(J==0&&H===0||L===4)&&z===k&&(z=-5),z)},a.inflateEnd=function(T){if(!T||!T.state)return c;var L=T.state;return L.window&&(L.window=null),T.state=null,k},a.inflateGetHeader=function(T,L){var f;return T&&T.state?(2&(f=T.state).wrap)==0?c:((f.head=L).done=!1,k):c},a.inflateSetDictionary=function(T,L){var f,B=L.length;return T&&T.state?(f=T.state).wrap!==0&&f.mode!==11?c:f.mode===11&&o(1,L,B,0)!==f.check?-3:lt(T,L,B,B)?(f.mode=31,-4):(f.havedict=1,k):c},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,a){var r=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(l,w,k,c,v,p,m,g){var C,x,O,A,W,j,K,M,at,lt=g.bits,T=0,L=0,f=0,B=0,pt=0,Q=0,ot=0,et=0,mt=0,U=0,R=null,J=0,H=new r.Buf16(16),G=new r.Buf16(16),P=null,bt=0;for(T=0;T<=15;T++)H[T]=0;for(L=0;L<c;L++)H[w[k+L]]++;for(pt=lt,B=15;1<=B&&H[B]===0;B--);if(B<pt&&(pt=B),B===0)return v[p++]=20971520,v[p++]=20971520,g.bits=1,0;for(f=1;f<B&&H[f]===0;f++);for(pt<f&&(pt=f),T=et=1;T<=15;T++)if(et<<=1,(et-=H[T])<0)return-1;if(0<et&&(l===0||B!==1))return-1;for(G[1]=0,T=1;T<15;T++)G[T+1]=G[T]+H[T];for(L=0;L<c;L++)w[k+L]!==0&&(m[G[w[k+L]]++]=L);if(j=l===0?(R=P=m,19):l===1?(R=o,J-=257,P=s,bt-=257,256):(R=h,P=y,-1),T=f,W=p,ot=L=U=0,O=-1,A=(mt=1<<(Q=pt))-1,l===1&&852<mt||l===2&&592<mt)return 1;for(;;){for(K=T-ot,at=m[L]<j?(M=0,m[L]):m[L]>j?(M=P[bt+m[L]],R[J+m[L]]):(M=96,0),C=1<<T-ot,f=x=1<<Q;v[W+(U>>ot)+(x-=C)]=K<<24|M<<16|at|0,x!==0;);for(C=1<<T-1;U&C;)C>>=1;if(C!==0?(U&=C-1,U+=C):U=0,L++,--H[T]==0){if(T===B)break;T=w[k+m[L]]}if(pt<T&&(U&A)!==O){for(ot===0&&(ot=pt),W+=f,et=1<<(Q=T-ot);Q+ot<B&&!((et-=H[Q+ot])<=0);)Q++,et<<=1;if(mt+=1<<Q,l===1&&852<mt||l===2&&592<mt)return 1;v[O=U&A]=pt<<24|Q<<16|W-p|0}}return U!==0&&(v[W+U]=T-ot<<24|64<<16|0),g.bits=pt,0}},{"../utils/common":41}],51:[function(t,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,a){var r=t("../utils/common"),o=0,s=1;function h(b){for(var D=b.length;0<=--D;)b[D]=0}var y=0,l=29,w=256,k=w+1+l,c=30,v=19,p=2*k+1,m=15,g=16,C=7,x=256,O=16,A=17,W=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],K=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],at=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],lt=new Array(2*(k+2));h(lt);var T=new Array(2*c);h(T);var L=new Array(512);h(L);var f=new Array(256);h(f);var B=new Array(l);h(B);var pt,Q,ot,et=new Array(c);function mt(b,D,Z,rt,N){this.static_tree=b,this.extra_bits=D,this.extra_base=Z,this.elems=rt,this.max_length=N,this.has_stree=b&&b.length}function U(b,D){this.dyn_tree=b,this.max_code=0,this.stat_desc=D}function R(b){return b<256?L[b]:L[256+(b>>>7)]}function J(b,D){b.pending_buf[b.pending++]=255&D,b.pending_buf[b.pending++]=D>>>8&255}function H(b,D,Z){b.bi_valid>g-Z?(b.bi_buf|=D<<b.bi_valid&65535,J(b,b.bi_buf),b.bi_buf=D>>g-b.bi_valid,b.bi_valid+=Z-g):(b.bi_buf|=D<<b.bi_valid&65535,b.bi_valid+=Z)}function G(b,D,Z){H(b,Z[2*D],Z[2*D+1])}function P(b,D){for(var Z=0;Z|=1&b,b>>>=1,Z<<=1,0<--D;);return Z>>>1}function bt(b,D,Z){var rt,N,it=new Array(m+1),V=0;for(rt=1;rt<=m;rt++)it[rt]=V=V+Z[rt-1]<<1;for(N=0;N<=D;N++){var tt=b[2*N+1];tt!==0&&(b[2*N]=P(it[tt]++,tt))}}function q(b){var D;for(D=0;D<k;D++)b.dyn_ltree[2*D]=0;for(D=0;D<c;D++)b.dyn_dtree[2*D]=0;for(D=0;D<v;D++)b.bl_tree[2*D]=0;b.dyn_ltree[2*x]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function ft(b){8<b.bi_valid?J(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function gt(b,D,Z,rt){var N=2*D,it=2*Z;return b[N]<b[it]||b[N]===b[it]&&rt[D]<=rt[Z]}function _t(b,D,Z){for(var rt=b.heap[Z],N=Z<<1;N<=b.heap_len&&(N<b.heap_len&&gt(D,b.heap[N+1],b.heap[N],b.depth)&&N++,!gt(D,rt,b.heap[N],b.depth));)b.heap[Z]=b.heap[N],Z=N,N<<=1;b.heap[Z]=rt}function nt(b,D,Z){var rt,N,it,V,tt=0;if(b.last_lit!==0)for(;rt=b.pending_buf[b.d_buf+2*tt]<<8|b.pending_buf[b.d_buf+2*tt+1],N=b.pending_buf[b.l_buf+tt],tt++,rt===0?G(b,N,D):(G(b,(it=f[N])+w+1,D),(V=j[it])!==0&&H(b,N-=B[it],V),G(b,it=R(--rt),Z),(V=K[it])!==0&&H(b,rt-=et[it],V)),tt<b.last_lit;);G(b,x,D)}function St(b,D){var Z,rt,N,it=D.dyn_tree,V=D.stat_desc.static_tree,tt=D.stat_desc.has_stree,dt=D.stat_desc.elems,Et=-1;for(b.heap_len=0,b.heap_max=p,Z=0;Z<dt;Z++)it[2*Z]!==0?(b.heap[++b.heap_len]=Et=Z,b.depth[Z]=0):it[2*Z+1]=0;for(;b.heap_len<2;)it[2*(N=b.heap[++b.heap_len]=Et<2?++Et:0)]=1,b.depth[N]=0,b.opt_len--,tt&&(b.static_len-=V[2*N+1]);for(D.max_code=Et,Z=b.heap_len>>1;1<=Z;Z--)_t(b,it,Z);for(N=dt;Z=b.heap[1],b.heap[1]=b.heap[b.heap_len--],_t(b,it,1),rt=b.heap[1],b.heap[--b.heap_max]=Z,b.heap[--b.heap_max]=rt,it[2*N]=it[2*Z]+it[2*rt],b.depth[N]=(b.depth[Z]>=b.depth[rt]?b.depth[Z]:b.depth[rt])+1,it[2*Z+1]=it[2*rt+1]=N,b.heap[1]=N++,_t(b,it,1),2<=b.heap_len;);b.heap[--b.heap_max]=b.heap[1],function(Ct,jt){var re,Bt,kt,Rt,ie,Xt,Ft=jt.dyn_tree,_n=jt.max_code,Pe=jt.stat_desc.static_tree,ze=jt.stat_desc.has_stree,gn=jt.stat_desc.extra_bits,Fe=jt.stat_desc.extra_base,Gt=jt.stat_desc.max_length,Kt=0;for(Rt=0;Rt<=m;Rt++)Ct.bl_count[Rt]=0;for(Ft[2*Ct.heap[Ct.heap_max]+1]=0,re=Ct.heap_max+1;re<p;re++)Gt<(Rt=Ft[2*Ft[2*(Bt=Ct.heap[re])+1]+1]+1)&&(Rt=Gt,Kt++),Ft[2*Bt+1]=Rt,_n<Bt||(Ct.bl_count[Rt]++,ie=0,Fe<=Bt&&(ie=gn[Bt-Fe]),Xt=Ft[2*Bt],Ct.opt_len+=Xt*(Rt+ie),ze&&(Ct.static_len+=Xt*(Pe[2*Bt+1]+ie)));if(Kt!==0){do{for(Rt=Gt-1;Ct.bl_count[Rt]===0;)Rt--;Ct.bl_count[Rt]--,Ct.bl_count[Rt+1]+=2,Ct.bl_count[Gt]--,Kt-=2}while(0<Kt);for(Rt=Gt;Rt!==0;Rt--)for(Bt=Ct.bl_count[Rt];Bt!==0;)_n<(kt=Ct.heap[--re])||(Ft[2*kt+1]!==Rt&&(Ct.opt_len+=(Rt-Ft[2*kt+1])*Ft[2*kt],Ft[2*kt+1]=Rt),Bt--)}}(b,D),bt(it,Et,b.bl_count)}function u(b,D,Z){var rt,N,it=-1,V=D[1],tt=0,dt=7,Et=4;for(V===0&&(dt=138,Et=3),D[2*(Z+1)+1]=65535,rt=0;rt<=Z;rt++)N=V,V=D[2*(rt+1)+1],++tt<dt&&N===V||(tt<Et?b.bl_tree[2*N]+=tt:N!==0?(N!==it&&b.bl_tree[2*N]++,b.bl_tree[2*O]++):tt<=10?b.bl_tree[2*A]++:b.bl_tree[2*W]++,it=N,Et=(tt=0)===V?(dt=138,3):N===V?(dt=6,3):(dt=7,4))}function z(b,D,Z){var rt,N,it=-1,V=D[1],tt=0,dt=7,Et=4;for(V===0&&(dt=138,Et=3),rt=0;rt<=Z;rt++)if(N=V,V=D[2*(rt+1)+1],!(++tt<dt&&N===V)){if(tt<Et)for(;G(b,N,b.bl_tree),--tt!=0;);else N!==0?(N!==it&&(G(b,N,b.bl_tree),tt--),G(b,O,b.bl_tree),H(b,tt-3,2)):tt<=10?(G(b,A,b.bl_tree),H(b,tt-3,3)):(G(b,W,b.bl_tree),H(b,tt-11,7));it=N,Et=(tt=0)===V?(dt=138,3):N===V?(dt=6,3):(dt=7,4)}}h(et);var F=!1;function S(b,D,Z,rt){H(b,(y<<1)+(rt?1:0),3),function(N,it,V,tt){ft(N),tt&&(J(N,V),J(N,~V)),r.arraySet(N.pending_buf,N.window,it,V,N.pending),N.pending+=V}(b,D,Z,!0)}a._tr_init=function(b){F||(function(){var D,Z,rt,N,it,V=new Array(m+1);for(N=rt=0;N<l-1;N++)for(B[N]=rt,D=0;D<1<<j[N];D++)f[rt++]=N;for(f[rt-1]=N,N=it=0;N<16;N++)for(et[N]=it,D=0;D<1<<K[N];D++)L[it++]=N;for(it>>=7;N<c;N++)for(et[N]=it<<7,D=0;D<1<<K[N]-7;D++)L[256+it++]=N;for(Z=0;Z<=m;Z++)V[Z]=0;for(D=0;D<=143;)lt[2*D+1]=8,D++,V[8]++;for(;D<=255;)lt[2*D+1]=9,D++,V[9]++;for(;D<=279;)lt[2*D+1]=7,D++,V[7]++;for(;D<=287;)lt[2*D+1]=8,D++,V[8]++;for(bt(lt,k+1,V),D=0;D<c;D++)T[2*D+1]=5,T[2*D]=P(D,5);pt=new mt(lt,j,w+1,k,m),Q=new mt(T,K,0,c,m),ot=new mt(new Array(0),M,0,v,C)}(),F=!0),b.l_desc=new U(b.dyn_ltree,pt),b.d_desc=new U(b.dyn_dtree,Q),b.bl_desc=new U(b.bl_tree,ot),b.bi_buf=0,b.bi_valid=0,q(b)},a._tr_stored_block=S,a._tr_flush_block=function(b,D,Z,rt){var N,it,V=0;0<b.level?(b.strm.data_type===2&&(b.strm.data_type=function(tt){var dt,Et=4093624447;for(dt=0;dt<=31;dt++,Et>>>=1)if(1&Et&&tt.dyn_ltree[2*dt]!==0)return o;if(tt.dyn_ltree[18]!==0||tt.dyn_ltree[20]!==0||tt.dyn_ltree[26]!==0)return s;for(dt=32;dt<w;dt++)if(tt.dyn_ltree[2*dt]!==0)return s;return o}(b)),St(b,b.l_desc),St(b,b.d_desc),V=function(tt){var dt;for(u(tt,tt.dyn_ltree,tt.l_desc.max_code),u(tt,tt.dyn_dtree,tt.d_desc.max_code),St(tt,tt.bl_desc),dt=v-1;3<=dt&&tt.bl_tree[2*at[dt]+1]===0;dt--);return tt.opt_len+=3*(dt+1)+5+5+4,dt}(b),N=b.opt_len+3+7>>>3,(it=b.static_len+3+7>>>3)<=N&&(N=it)):N=it=Z+5,Z+4<=N&&D!==-1?S(b,D,Z,rt):b.strategy===4||it===N?(H(b,2+(rt?1:0),3),nt(b,lt,T)):(H(b,4+(rt?1:0),3),function(tt,dt,Et,Ct){var jt;for(H(tt,dt-257,5),H(tt,Et-1,5),H(tt,Ct-4,4),jt=0;jt<Ct;jt++)H(tt,tt.bl_tree[2*at[jt]+1],3);z(tt,tt.dyn_ltree,dt-1),z(tt,tt.dyn_dtree,Et-1)}(b,b.l_desc.max_code+1,b.d_desc.max_code+1,V+1),nt(b,b.dyn_ltree,b.dyn_dtree)),q(b),rt&&ft(b)},a._tr_tally=function(b,D,Z){return b.pending_buf[b.d_buf+2*b.last_lit]=D>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&D,b.pending_buf[b.l_buf+b.last_lit]=255&Z,b.last_lit++,D===0?b.dyn_ltree[2*Z]++:(b.matches++,D--,b.dyn_ltree[2*(f[Z]+w+1)]++,b.dyn_dtree[2*R(D)]++),b.last_lit===b.lit_bufsize-1},a._tr_align=function(b){H(b,2,3),G(b,x,lt),function(D){D.bi_valid===16?(J(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):8<=D.bi_valid&&(D.pending_buf[D.pending++]=255&D.bi_buf,D.bi_buf>>=8,D.bi_valid-=8)}(b)}},{"../utils/common":41}],53:[function(t,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,a){(function(r){(function(o,s){if(!o.setImmediate){var h,y,l,w,k=1,c={},v=!1,p=o.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(o);m=m&&m.setTimeout?m:o,h={}.toString.call(o.process)==="[object process]"?function(O){process.nextTick(function(){C(O)})}:function(){if(o.postMessage&&!o.importScripts){var O=!0,A=o.onmessage;return o.onmessage=function(){O=!1},o.postMessage("","*"),o.onmessage=A,O}}()?(w="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",x,!1):o.attachEvent("onmessage",x),function(O){o.postMessage(w+O,"*")}):o.MessageChannel?((l=new MessageChannel).port1.onmessage=function(O){C(O.data)},function(O){l.port2.postMessage(O)}):p&&"onreadystatechange"in p.createElement("script")?(y=p.documentElement,function(O){var A=p.createElement("script");A.onreadystatechange=function(){C(O),A.onreadystatechange=null,y.removeChild(A),A=null},y.appendChild(A)}):function(O){setTimeout(C,0,O)},m.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var A=new Array(arguments.length-1),W=0;W<A.length;W++)A[W]=arguments[W+1];var j={callback:O,args:A};return c[k]=j,h(k),k++},m.clearImmediate=g}function g(O){delete c[O]}function C(O){if(v)setTimeout(C,0,O);else{var A=c[O];if(A){v=!0;try{(function(W){var j=W.callback,K=W.args;switch(K.length){case 0:j();break;case 1:j(K[0]);break;case 2:j(K[0],K[1]);break;case 3:j(K[0],K[1],K[2]);break;default:j.apply(s,K)}})(A)}finally{g(O),v=!1}}}}function x(O){O.source===o&&typeof O.data=="string"&&O.data.indexOf(w)===0&&C(+O.data.slice(w.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(xa);const Ta={name:"@innovatrics/dot-common-auto-capture",private:!0,version:"4.0.1",scripts:{build:"tsc && vite build",lint:'eslint "src/**/*.{ts,tsx}" --max-warnings 0',test:"vitest run --coverage --passWithNoTests",tsc:"tsc","bump:version":"npm pkg set version=$VERSION"},dependencies:{"@innovatrics/dot-ui-common-auto-capture":"workspace:*",jszip:"^3.10.0",preact:"^10.9.0","styled-components":"^5.3.5"},devDependencies:{"@preact/preset-vite":"^2.4.0","@types/styled-components":"^5.1.26",typescript:"^4.8.4",vite:"^3.1.8",vitest:"^0.24.3"}},Oa=.8,Ia=.43,Ra=.03,Da=500,Na=250,Pa=900,za=100,Un={minDuration:1e3,maxDuration:2500,minFrames:10},Wr={max:100,min:10},Hr={shorterSide:720,longerSide:1280},Ln=()=>/iPhone|iPad|iPod|Android|Mobi|BlackBerry|Silk|Windows Phone/i.test(navigator.userAgent),Fa=()=>{const e=/Android/i.test(navigator.userAgent),n=/Firefox/i.test(navigator.userAgent);return e&&n},Ma=()=>{const e=navigator.userAgent.includes("Chrome"),n=new RegExp(/Version\/15.* Safari/).test(navigator.userAgent);return e&&n?!1:n},Vr=e=>new Promise(n=>{setTimeout(n,e)}),Yr=e=>Number.parseFloat(e.toFixed(3)),Te=e=>JSON.parse(JSON.stringify(e,(n,t)=>typeof t=="number"?Yr(t):t)),Ba=()=>Ta.version,Ua=e=>new URL(e).hostname.replace("www.",""),Qe=e=>Object.entries(e).map(([n,t])=>`${encodeURIComponent(n)}=${encodeURIComponent(t)}`).join("&"),La=()=>window.crypto.getRandomValues(new Uint32Array(1))[0].toString(16),Gr=e=>Math.round(e/500)*500/1e3,ye=e=>e<=1?Math.round(e*20)/20:Math.round(e/50)*50,ja=e=>Math.round(e/10)*10,Zr=e=>Math.round(e*2)/2,$a=(e,n)=>{const t=e&&performance.now()-e;return n>=Un.minFrames?t>Un.minDuration:t>Un.maxDuration},Wa=(e,n)=>JSON.stringify(e)===JSON.stringify(n)?n:e;var Xr=(e=>(e.AUTO_CAPTURE="auto-capture",e))(Xr||{});const tn={appKey:"",deviceId:"",async countlyFetch(e){if(!this.appKey||!this.deviceId)return;const n={method:"GET",headers:{Accept:"application/json"}},t="https://innovatrics.count.ly/i?",i=Qe({app_key:this.appKey,device_id:this.deviceId});await fetch(`${t}${i}&${e}`,n)},async init(e,n){if(!n)return;this.appKey=n,this.deviceId=e;const t={_app_version:Ba()},i={organization:Ua(window.location.href)},a=Qe({begin_session:"1",metrics:JSON.stringify(t),user_details:JSON.stringify(i)});await this.countlyFetch(a)},async endSession(){const e=Qe({end_session:"1"});await this.countlyFetch(e)},async sendAutoCaptureEvent(e){const n=[{key:Xr.AUTO_CAPTURE,count:1,dur:e.captureTime,segmentation:e}],t=Qe({events:JSON.stringify(n)});await this.countlyFetch(t)},async sendDocumentData({documentDetection:e,deviceName:n,...t}){if(e){const i={...t,hotspots:ye(e.hotspots),brightness:ye(e.brightness),confidence:ye(e.confidence),sharpness:ye(e.sharpness),smallestEdge:ye(e.smallestEdge),camera:n,imageResolution:`${t.imageResolution.width}x${t.imageResolution.height}`,averageFps:Zr(t.averageFps),captureTime:Gr(t.captureProcessDurationInMs)};this.sendAutoCaptureEvent(i)}},async sendFaceData({faceDetection:e,deviceName:n,...t}){if(e){const i={...t,faceSize:ja(e.faceSize)/1e3,confidence:ye(e.confidence),camera:n,imageResolution:`${t.imageResolution.width}x${t.imageResolution.height}`,averageFps:Zr(t.averageFps),captureTime:Gr(t.captureProcessDurationInMs)};this.sendAutoCaptureEvent(i)}}},Ha=()=>{const e=sessionStorage.getItem("dot-user-id");if(e)return e;{const n=La();return sessionStorage.setItem("dot-user-id",n),n}},Oe={init(e){const n=Ha();tn.init(n,e)},endSession(){tn.endSession()},sendDocumentData(e){tn.sendDocumentData(e)},sendFaceData(e){tn.sendFaceData(e)}};class Va{static async getVideoInputDeviceList(){return(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.kind==="videoinput")}}const Ya={width:1920,height:1080,facingMode:"user"};class en extends Va{constructor(t){super();Dt(this,"videoRef");Dt(this,"mediaStream",null);Dt(this,"videoTrack",null);this.videoRef=t}async initWebcam(t={}){const i=await this.getBestCamera(t.facingMode),a=this.getConstraints(t,i);await this.startWebcam(a),Ma()&&await this.startWebcam(a)}async startWebcam(t={}){var i;return this.stopCamera(),Fa()&&await Vr(450),this.mediaStream=await navigator.mediaDevices.getUserMedia(t),this.videoRef.srcObject=this.mediaStream,await this.videoRef.play(),this.videoTrack=(i=this.mediaStream)==null?void 0:i.getVideoTracks()[0],this.checkVideoTrackSettings(),this.videoTrack}checkVideoTrackSettings(){var r;const t=(r=this.videoTrack)==null?void 0:r.getSettings();if(!(t!=null&&t.height)||!(t!=null&&t.width))throw new zt("Could not init camera settings");const i=Math.min(t==null?void 0:t.width,t==null?void 0:t.height),a=Math.max(t==null?void 0:t.width,t==null?void 0:t.height);if(i<Hr.shorterSide||a<Hr.longerSide)throw this.stopCamera(),new zt(`Could not init video because of low camera resolution: ${t.width}x${t.height}.`)}async getBestCamera(t){if(Ln()&&t==="environment")return this.mediaStream=await navigator.mediaDevices.getUserMedia({video:!0}),this.stopCamera(),(await en.getVideoInputDeviceList()).find(r=>r.label.includes("back")&&r.label.includes("0"))}getConstraints(t,i){return{video:{...Ya,...t,deviceId:i?{exact:i.deviceId}:void 0},audio:!1}}takePhoto(){var r;const t=(r=this.videoTrack)==null?void 0:r.getSettings();if(!(t!=null&&t.width))throw new zt("Cant take photo - video width is undefined");if(!(t!=null&&t.height))throw new zt("Cant take photo - video height is undefined");const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const a=i.getContext("2d");if(!a)throw new zt("Cant take photo - cant create context");return a.drawImage(this.videoRef,0,0),i}getCameraResolution(){var i;const t=(i=this.videoTrack)==null?void 0:i.getSettings();if(!(t!=null&&t.width))throw new zt("Video width is undefined");if(!(t!=null&&t.height))throw new zt("Video height is undefined");return{width:t.width,height:t.height}}getCameraSettings(){if(!this.videoTrack)throw Error("Video track must be initialized to get settings");return this.videoTrack.getSettings()}async getDeviceName(){if(!this.videoTrack)throw Error("Video track must be initialized to get device name");const t=this.videoTrack.getSettings(),a=(await navigator.mediaDevices.enumerateDevices()).find(r=>r.deviceId===t.deviceId);return a==null?void 0:a.label}async applyNewConstraints(t){if(!this.videoTrack)throw Error("Video track must be initialized to set new constraints");await this.videoTrack.applyConstraints(t)}async switchCamera(){var h;if(!this.videoTrack)throw Error("Video track must be initialized to set new constraints");const t=this.videoTrack.getConstraints(),i=this.videoTrack.getSettings(),a=await en.getVideoInputDeviceList();if(a.length<=1)return;const r=a.findIndex(y=>y.deviceId===i.deviceId),o=(h=a[r+1])!=null?h:a[0],s=this.getConstraints(t,o);await this.startWebcam(s)}stopCamera(){if(!this.mediaStream)return;this.mediaStream.getTracks().forEach(i=>{i.stop()}),this.videoRef.srcObject=null}checkIfStreamIsRunning(){return!!this.videoRef.srcObject}}const Ga=()=>{var e;return((e={VITE_FACE_COUNTLY_APP_KEY:"5f83e83ee4cee1ab6e5bbf86e215644473299675",VITE_DOCUMENT_COUNTLY_APP_KEY:"065cf6e242fc5e785cd17eebfbfbbd212a33133b",VITE_COUNTLY_URL:"https://innovatrics.count.ly",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APP_ENV)==null?void 0:e.toLowerCase())==="dev"};class Za extends Array{constructor(t){super();Dt(this,"size");this.size=t}pushFixed(...t){this.length===this.size&&this.splice(0,t.length),this.push(...t)}}const Xa=(e,n,t)=>new Promise(i=>{e.toBlob(a=>{if(!a)throw new Error("Canvas to Blob failed");i(a)},n,t)}),Ka=(e,n)=>{const t=document.createElement("canvas");t.width=n.width,t.height=n.height;const i=t.getContext("2d");if(!i)throw new Error("cropImage ctx error");return i.drawImage(e,n.shiftX,n.shiftY,n.width,n.height,0,0,t.width,t.height),t},Ja=e=>{const n=e.getContext("2d");if(!n)throw new Error("getImageDataForSam ctx error");return n.getImageData(0,0,e.width,e.height).data},qa=(e,n,t,i)=>{const a=e.getContext("2d");!a||(a.beginPath(),i?(a.fillStyle=t,a.fillRect(n.topLeft.x,n.topLeft.y,n.width,n.height)):(a.strokeStyle=t,a.rect(n.topLeft.x,n.topLeft.y,n.width,n.height)),a.stroke())},jn=(e,n,t)=>{const{shiftX:i,shiftY:a,width:r,height:o}=n;qa(e,{topLeft:{x:i,y:a},width:r,height:o,color:t},t)},Qa=(e,n)=>{const{width:t,height:i,shiftX:a,shiftY:r}=n;return!(e.x<a||e.x>a+t||e.y<r||e.y>r+i)},to=(e,n)=>Object.values(e).every(t=>Qa(t,n)),Kr=Dn(null),Jr=()=>{const e=ve(Kr);if(!e)throw new Error("Missing provider for CameraOptionsContext");return e},eo=({children:e,cameraOptions:n})=>{const[t,i]=ee(null);return Lt(()=>{var k,c,v,p,m,g,C;const{onPhotoTaken:a,onError:r,imageType:o,cameraFacing:s,thresholds:h,samWasmUrl:y}=n,l=Ln()?"environment":"user",w={onPhotoTaken:a,onError:r,imageType:o!=null?o:"png",cameraFacing:s!=null?s:l,samWasmUrl:y,thresholds:{confidenceThreshold:(k=h==null?void 0:h.confidenceThreshold)!=null?k:Oa,sharpnessThreshold:(c=h==null?void 0:h.sharpnessThreshold)!=null?c:Da,brightnessLowThreshold:(v=h==null?void 0:h.brightnessLowThreshold)!=null?v:Na,brightnessHighThreshold:(p=h==null?void 0:h.brightnessHighThreshold)!=null?p:Pa,hotspotsScoreThreshold:(m=h==null?void 0:h.hotspotsScoreThreshold)!=null?m:za,sizeSmallThreshold:(g=h==null?void 0:h.sizeSmallThreshold)!=null?g:Ia,outOfBoundsThreshold:(C=h==null?void 0:h.outOfBoundsThreshold)!=null?C:Ra}};i(w)},[n]),t?Mt(Kr.Provider,{value:{documentCameraOptions:t},children:e}):null};var Ie={exports:{}},Tt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr;function no(){if(qr)return Tt;qr=1;var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,t=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,r=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,h=e?Symbol.for("react.async_mode"):60111,y=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,w=e?Symbol.for("react.suspense"):60113,k=e?Symbol.for("react.suspense_list"):60120,c=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,p=e?Symbol.for("react.block"):60121,m=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function x(A){if(typeof A=="object"&&A!==null){var W=A.$$typeof;switch(W){case n:switch(A=A.type,A){case h:case y:case i:case r:case a:case w:return A;default:switch(A=A&&A.$$typeof,A){case s:case l:case v:case c:case o:return A;default:return W}}case t:return W}}}function O(A){return x(A)===y}return Tt.AsyncMode=h,Tt.ConcurrentMode=y,Tt.ContextConsumer=s,Tt.ContextProvider=o,Tt.Element=n,Tt.ForwardRef=l,Tt.Fragment=i,Tt.Lazy=v,Tt.Memo=c,Tt.Portal=t,Tt.Profiler=r,Tt.StrictMode=a,Tt.Suspense=w,Tt.isAsyncMode=function(A){return O(A)||x(A)===h},Tt.isConcurrentMode=O,Tt.isContextConsumer=function(A){return x(A)===s},Tt.isContextProvider=function(A){return x(A)===o},Tt.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===n},Tt.isForwardRef=function(A){return x(A)===l},Tt.isFragment=function(A){return x(A)===i},Tt.isLazy=function(A){return x(A)===v},Tt.isMemo=function(A){return x(A)===c},Tt.isPortal=function(A){return x(A)===t},Tt.isProfiler=function(A){return x(A)===r},Tt.isStrictMode=function(A){return x(A)===a},Tt.isSuspense=function(A){return x(A)===w},Tt.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===i||A===y||A===r||A===a||A===w||A===k||typeof A=="object"&&A!==null&&(A.$$typeof===v||A.$$typeof===c||A.$$typeof===o||A.$$typeof===s||A.$$typeof===l||A.$$typeof===m||A.$$typeof===g||A.$$typeof===C||A.$$typeof===p)},Tt.typeOf=x,Tt}var Ot={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qr;function ro(){return Qr||(Qr=1,{}.NODE_ENV!=="production"&&function(){var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,t=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,r=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,h=e?Symbol.for("react.async_mode"):60111,y=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,w=e?Symbol.for("react.suspense"):60113,k=e?Symbol.for("react.suspense_list"):60120,c=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,p=e?Symbol.for("react.block"):60121,m=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function x(nt){return typeof nt=="string"||typeof nt=="function"||nt===i||nt===y||nt===r||nt===a||nt===w||nt===k||typeof nt=="object"&&nt!==null&&(nt.$$typeof===v||nt.$$typeof===c||nt.$$typeof===o||nt.$$typeof===s||nt.$$typeof===l||nt.$$typeof===m||nt.$$typeof===g||nt.$$typeof===C||nt.$$typeof===p)}function O(nt){if(typeof nt=="object"&&nt!==null){var St=nt.$$typeof;switch(St){case n:var u=nt.type;switch(u){case h:case y:case i:case r:case a:case w:return u;default:var z=u&&u.$$typeof;switch(z){case s:case l:case v:case c:case o:return z;default:return St}}case t:return St}}}var A=h,W=y,j=s,K=o,M=n,at=l,lt=i,T=v,L=c,f=t,B=r,pt=a,Q=w,ot=!1;function et(nt){return ot||(ot=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),mt(nt)||O(nt)===h}function mt(nt){return O(nt)===y}function U(nt){return O(nt)===s}function R(nt){return O(nt)===o}function J(nt){return typeof nt=="object"&&nt!==null&&nt.$$typeof===n}function H(nt){return O(nt)===l}function G(nt){return O(nt)===i}function P(nt){return O(nt)===v}function bt(nt){return O(nt)===c}function q(nt){return O(nt)===t}function ft(nt){return O(nt)===r}function gt(nt){return O(nt)===a}function _t(nt){return O(nt)===w}Ot.AsyncMode=A,Ot.ConcurrentMode=W,Ot.ContextConsumer=j,Ot.ContextProvider=K,Ot.Element=M,Ot.ForwardRef=at,Ot.Fragment=lt,Ot.Lazy=T,Ot.Memo=L,Ot.Portal=f,Ot.Profiler=B,Ot.StrictMode=pt,Ot.Suspense=Q,Ot.isAsyncMode=et,Ot.isConcurrentMode=mt,Ot.isContextConsumer=U,Ot.isContextProvider=R,Ot.isElement=J,Ot.isForwardRef=H,Ot.isFragment=G,Ot.isLazy=P,Ot.isMemo=bt,Ot.isPortal=q,Ot.isProfiler=ft,Ot.isStrictMode=gt,Ot.isSuspense=_t,Ot.isValidElementType=x,Ot.typeOf=O}()),Ot}(function(e){({}).NODE_ENV==="production"?e.exports=no():e.exports=ro()})(Ie);function ti(e,n){for(var t in n)e[t]=n[t];return e}function $n(e,n){for(var t in e)if(t!=="__source"&&!(t in n))return!0;for(var i in n)if(i!=="__source"&&e[i]!==n[i])return!0;return!1}function Wn(e){this.props=e}function io(e,n){function t(a){var r=this.props.ref,o=r==a.ref;return!o&&r&&(r.call?r(null):r.current=null),n?!n(this.props,a)||!o:$n(this.props,a)}function i(a){return this.shouldComponentUpdate=t,$t(e,a)}return i.displayName="Memo("+(e.displayName||e.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i}(Wn.prototype=new Yt).isPureReactComponent=!0,Wn.prototype.shouldComponentUpdate=function(e,n){return $n(this.props,e)||$n(this.state,n)};var ei=ht.__b;ht.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ei&&ei(e)};var ao=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ni(e){function n(t){var i=ti({},t);return delete i.ref,e(i,t.ref||null)}return n.$$typeof=ao,n.render=n,n.prototype.isReactComponent=n.__f=!0,n.displayName="ForwardRef("+(e.displayName||e.name)+")",n}var ri=function(e,n){return e==null?null:Qt(Qt(e).map(n))},oo={map:ri,forEach:ri,count:function(e){return e?Qt(e).length:0},only:function(e){var n=Qt(e);if(n.length!==1)throw"Children.only";return n[0]},toArray:Qt},so=ht.__e;ht.__e=function(e,n,t,i){if(e.then){for(var a,r=n;r=r.__;)if((a=r.__c)&&a.__c)return n.__e==null&&(n.__e=t.__e,n.__k=t.__k),a.__c(e,n)}so(e,n,t,i)};var ii=ht.unmount;function ai(e,n,t){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=ti({},e)).__c!=null&&(e.__c.__P===t&&(e.__c.__P=n),e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return ai(i,n,t)})),e}function oi(e,n,t){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return oi(i,n,t)}),e.__c&&e.__c.__P===n&&(e.__e&&t.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=t)),e}function nn(){this.__u=0,this.t=null,this.__b=null}function si(e){var n=e.__.__c;return n&&n.__a&&n.__a(e)}function uo(e){var n,t,i;function a(r){if(n||(n=e()).then(function(o){t=o.default||o},function(o){i=o}),i)throw i;if(!t)throw n;return $t(t,r)}return a.displayName="Lazy",a.__f=!0,a}function Re(){this.u=null,this.o=null}ht.unmount=function(e){var n=e.__c;n&&n.__R&&n.__R(),n&&e.__h===!0&&(e.type=null),ii&&ii(e)},(nn.prototype=new Yt).__c=function(e,n){var t=n.__c,i=this;i.t==null&&(i.t=[]),i.t.push(t);var a=si(i.__v),r=!1,o=function(){r||(r=!0,t.__R=null,a?a(s):s())};t.__R=o;var s=function(){if(!--i.__u){if(i.state.__a){var y=i.state.__a;i.__v.__k[0]=oi(y,y.__c.__P,y.__c.__O)}var l;for(i.setState({__a:i.__b=null});l=i.t.pop();)l.forceUpdate()}},h=n.__h===!0;i.__u++||h||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(o,o)},nn.prototype.componentWillUnmount=function(){this.t=[]},nn.prototype.render=function(e,n){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=ai(this.__b,t,i.__O=i.__P)}this.__b=null}var a=n.__a&&$t(Vt,null,e.fallback);return a&&(a.__h=null),[$t(Vt,null,n.__a?null:e.children),a]};var ui=function(e,n,t){if(++t[1]===t[0]&&e.o.delete(n),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(t=e.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.u=t=t[2]}};function co(e){return this.getChildContext=function(){return e.context},e.children}function lo(e){var n=this,t=e.i;n.componentWillUnmount=function(){ue(null,n.l),n.l=null,n.i=null},n.i&&n.i!==t&&n.componentWillUnmount(),e.__v?(n.l||(n.i=t,n.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(i){this.childNodes.push(i),n.i.appendChild(i)},insertBefore:function(i,a){this.childNodes.push(i),n.i.appendChild(i)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),n.i.removeChild(i)}}),ue($t(co,{context:n.context},e.__v),n.l)):n.l&&n.componentWillUnmount()}function ho(e,n){var t=$t(lo,{__v:e,i:n});return t.containerInfo=n,t}(Re.prototype=new Yt).__a=function(e){var n=this,t=si(n.__v),i=n.o.get(e);return i[0]++,function(a){var r=function(){n.props.revealOrder?(i.push(a),ui(n,e,i)):a()};t?t(r):r()}},Re.prototype.render=function(e){this.u=null,this.o=new Map;var n=Qt(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&n.reverse();for(var t=n.length;t--;)this.o.set(n[t],this.u=[1,0,this.u]);return e.children},Re.prototype.componentDidUpdate=Re.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(n,t){ui(e,t,n)})};var ci=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,fo=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,po=typeof document<"u",mo=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};function _o(e,n,t){return n.__k==null&&(n.textContent=""),ue(e,n),typeof t=="function"&&t(),e?e.__c:null}function go(e,n,t){return In(e,n),typeof t=="function"&&t(),e?e.__c:null}Yt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Yt.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(n){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:n})}})});var li=ht.event;function vo(){}function yo(){return this.cancelBubble}function wo(){return this.defaultPrevented}ht.event=function(e){return li&&(e=li(e)),e.persist=vo,e.isPropagationStopped=yo,e.isDefaultPrevented=wo,e.nativeEvent=e};var hi,fi={configurable:!0,get:function(){return this.class}},di=ht.vnode;ht.vnode=function(e){var n=e.type,t=e.props,i=t;if(typeof n=="string"){var a=n.indexOf("-")===-1;for(var r in i={},t){var o=t[r];po&&r==="children"&&n==="noscript"||r==="value"&&"defaultValue"in t&&o==null||(r==="defaultValue"&&"value"in t&&t.value==null?r="value":r==="download"&&o===!0?o="":/ondoubleclick/i.test(r)?r="ondblclick":/^onchange(textarea|input)/i.test(r+n)&&!mo(t.type)?r="oninput":/^onfocus$/i.test(r)?r="onfocusin":/^onblur$/i.test(r)?r="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(r)?r=r.toLowerCase():a&&fo.test(r)?r=r.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(r)&&(r=r.toLowerCase(),i[r]&&(r="oninputCapture")),i[r]=o)}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Qt(t.children).forEach(function(s){s.props.selected=i.value.indexOf(s.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=Qt(t.children).forEach(function(s){s.props.selected=i.multiple?i.defaultValue.indexOf(s.props.value)!=-1:i.defaultValue==s.props.value})),e.props=i,t.class!=t.className&&(fi.enumerable="className"in t,t.className!=null&&(i.class=t.className),Object.defineProperty(i,"className",fi))}e.$$typeof=ci,di&&di(e)};var pi=ht.__r;ht.__r=function(e){pi&&pi(e),hi=e.__c};var bo={ReactCurrentDispatcher:{current:{readContext:function(e){return hi.__n[e.__c].props.value}}}};function Co(e){return $t.bind(null,e)}function mi(e){return!!e&&e.$$typeof===ci}function ko(e){return mi(e)?Rn.apply(null,arguments):e}function So(e){return!!e.__k&&(ue(null,e),!0)}function Eo(e){return e&&(e.base||e.nodeType===1&&e)||null}var Ao=function(e,n){return e(n)},xo=function(e,n){return e(n)},To=Vt;function _i(e){e()}function Oo(e){return e}function Io(){return[!1,_i]}var Ro=Ye;function Do(e,n){var t=n(),i=ee({h:{__:t,v:n}}),a=i[0].h,r=i[1];return Ye(function(){a.__=t,a.v=n,a.__!==n()&&r({h:a})},[e,t,n]),Lt(function(){return a.__!==a.v()&&r({h:a}),e(function(){a.__!==a.v()&&r({h:a})})},[e]),t}var rn={useState:ee,useId:Ca,useReducer:Ur,useEffect:Lt,useLayoutEffect:Ye,useInsertionEffect:Ro,useTransition:Io,useDeferredValue:Oo,useSyncExternalStore:Do,startTransition:_i,useRef:de,useImperativeHandle:ba,useMemo:Ge,useCallback:Ze,useContext:ve,useDebugValue:zn,version:"17.0.2",Children:oo,render:_o,hydrate:go,unmountComponentAtNode:So,createPortal:ho,createElement:$t,createContext:Dn,createFactory:Co,cloneElement:ko,createRef:aa,Fragment:Vt,isValidElement:mi,findDOMNode:Eo,Component:Yt,PureComponent:Wn,memo:io,forwardRef:ni,flushSync:xo,unstable_batchedUpdates:Ao,StrictMode:To,Suspense:nn,SuspenseList:Re,lazy:uo,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:bo};function No(e){function n(R,J,H,G,P){for(var bt=0,q=0,ft=0,gt=0,_t,nt,St=0,u=0,z,F=z=_t=0,S=0,b=0,D=0,Z=0,rt=H.length,N=rt-1,it,V="",tt="",dt="",Et="",Ct;S<rt;){if(nt=H.charCodeAt(S),S===N&&q+gt+ft+bt!==0&&(q!==0&&(nt=q===47?10:47),gt=ft=bt=0,rt++,N++),q+gt+ft+bt===0){if(S===N&&(0<b&&(V=V.replace(k,"")),0<V.trim().length)){switch(nt){case 32:case 9:case 59:case 13:case 10:break;default:V+=H.charAt(S)}nt=59}switch(nt){case 123:for(V=V.trim(),_t=V.charCodeAt(0),z=1,Z=++S;S<rt;){switch(nt=H.charCodeAt(S)){case 123:z++;break;case 125:z--;break;case 47:switch(nt=H.charCodeAt(S+1)){case 42:case 47:t:{for(F=S+1;F<N;++F)switch(H.charCodeAt(F)){case 47:if(nt===42&&H.charCodeAt(F-1)===42&&S+2!==F){S=F+1;break t}break;case 10:if(nt===47){S=F+1;break t}}S=F}}break;case 91:nt++;case 40:nt++;case 34:case 39:for(;S++<N&&H.charCodeAt(S)!==nt;);}if(z===0)break;S++}switch(z=H.substring(Z,S),_t===0&&(_t=(V=V.replace(w,"").trim()).charCodeAt(0)),_t){case 64:switch(0<b&&(V=V.replace(k,"")),nt=V.charCodeAt(1),nt){case 100:case 109:case 115:case 45:b=J;break;default:b=pt}if(z=n(J,b,z,nt,P+1),Z=z.length,0<ot&&(b=t(pt,V,D),Ct=s(3,z,b,J,L,T,Z,nt,P,G),V=b.join(""),Ct!==void 0&&(Z=(z=Ct.trim()).length)===0&&(nt=0,z="")),0<Z)switch(nt){case 115:V=V.replace(W,o);case 100:case 109:case 45:z=V+"{"+z+"}";break;case 107:V=V.replace(C,"$1 $2"),z=V+"{"+z+"}",z=B===1||B===2&&r("@"+z,3)?"@-webkit-"+z+"@"+z:"@"+z;break;default:z=V+z,G===112&&(z=(tt+=z,""))}else z="";break;default:z=n(J,t(J,V,D),z,G,P+1)}dt+=z,z=D=b=F=_t=0,V="",nt=H.charCodeAt(++S);break;case 125:case 59:if(V=(0<b?V.replace(k,""):V).trim(),1<(Z=V.length))switch(F===0&&(_t=V.charCodeAt(0),_t===45||96<_t&&123>_t)&&(Z=(V=V.replace(" ",":")).length),0<ot&&(Ct=s(1,V,J,R,L,T,tt.length,G,P,G))!==void 0&&(Z=(V=Ct.trim()).length)===0&&(V="\0\0"),_t=V.charCodeAt(0),nt=V.charCodeAt(1),_t){case 0:break;case 64:if(nt===105||nt===99){Et+=V+H.charAt(S);break}default:V.charCodeAt(Z-1)!==58&&(tt+=a(V,_t,nt,V.charCodeAt(2)))}D=b=F=_t=0,V="",nt=H.charCodeAt(++S)}}switch(nt){case 13:case 10:q===47?q=0:1+_t===0&&G!==107&&0<V.length&&(b=1,V+="\0"),0<ot*mt&&s(0,V,J,R,L,T,tt.length,G,P,G),T=1,L++;break;case 59:case 125:if(q+gt+ft+bt===0){T++;break}default:switch(T++,it=H.charAt(S),nt){case 9:case 32:if(gt+bt+q===0)switch(St){case 44:case 58:case 9:case 32:it="";break;default:nt!==32&&(it=" ")}break;case 0:it="\\0";break;case 12:it="\\f";break;case 11:it="\\v";break;case 38:gt+q+bt===0&&(b=D=1,it="\f"+it);break;case 108:if(gt+q+bt+f===0&&0<F)switch(S-F){case 2:St===112&&H.charCodeAt(S-3)===58&&(f=St);case 8:u===111&&(f=u)}break;case 58:gt+q+bt===0&&(F=S);break;case 44:q+ft+gt+bt===0&&(b=1,it+="\r");break;case 34:case 39:q===0&&(gt=gt===nt?0:gt===0?nt:gt);break;case 91:gt+q+ft===0&&bt++;break;case 93:gt+q+ft===0&&bt--;break;case 41:gt+q+bt===0&&ft--;break;case 40:if(gt+q+bt===0){if(_t===0)switch(2*St+3*u){case 533:break;default:_t=1}ft++}break;case 64:q+ft+gt+bt+F+z===0&&(z=1);break;case 42:case 47:if(!(0<gt+bt+ft))switch(q){case 0:switch(2*nt+3*H.charCodeAt(S+1)){case 235:q=47;break;case 220:Z=S,q=42}break;case 42:nt===47&&St===42&&Z+2!==S&&(H.charCodeAt(Z+2)===33&&(tt+=H.substring(Z,S+1)),it="",q=0)}}q===0&&(V+=it)}u=St,St=nt,S++}if(Z=tt.length,0<Z){if(b=J,0<ot&&(Ct=s(2,tt,b,R,L,T,Z,G,P,G),Ct!==void 0&&(tt=Ct).length===0))return Et+tt+dt;if(tt=b.join(",")+"{"+tt+"}",B*f!==0){switch(B!==2||r(tt,2)||(f=0),f){case 111:tt=tt.replace(O,":-moz-$1")+tt;break;case 112:tt=tt.replace(x,"::-webkit-input-$1")+tt.replace(x,"::-moz-$1")+tt.replace(x,":-ms-input-$1")+tt}f=0}}return Et+tt+dt}function t(R,J,H){var G=J.trim().split(m);J=G;var P=G.length,bt=R.length;switch(bt){case 0:case 1:var q=0;for(R=bt===0?"":R[0]+" ";q<P;++q)J[q]=i(R,J[q],H).trim();break;default:var ft=q=0;for(J=[];q<P;++q)for(var gt=0;gt<bt;++gt)J[ft++]=i(R[gt]+" ",G[q],H).trim()}return J}function i(R,J,H){var G=J.charCodeAt(0);switch(33>G&&(G=(J=J.trim()).charCodeAt(0)),G){case 38:return J.replace(g,"$1"+R.trim());case 58:return R.trim()+J.replace(g,"$1"+R.trim());default:if(0<1*H&&0<J.indexOf("\f"))return J.replace(g,(R.charCodeAt(0)===58?"":"$1")+R.trim())}return R+J}function a(R,J,H,G){var P=R+";",bt=2*J+3*H+4*G;if(bt===944){R=P.indexOf(":",9)+1;var q=P.substring(R,P.length-1).trim();return q=P.substring(0,R).trim()+q+";",B===1||B===2&&r(q,1)?"-webkit-"+q+q:q}if(B===0||B===2&&!r(P,1))return P;switch(bt){case 1015:return P.charCodeAt(10)===97?"-webkit-"+P+P:P;case 951:return P.charCodeAt(3)===116?"-webkit-"+P+P:P;case 963:return P.charCodeAt(5)===110?"-webkit-"+P+P:P;case 1009:if(P.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+P+P;case 978:return"-webkit-"+P+"-moz-"+P+P;case 1019:case 983:return"-webkit-"+P+"-moz-"+P+"-ms-"+P+P;case 883:if(P.charCodeAt(8)===45)return"-webkit-"+P+P;if(0<P.indexOf("image-set(",11))return P.replace(lt,"$1-webkit-$2")+P;break;case 932:if(P.charCodeAt(4)===45)switch(P.charCodeAt(5)){case 103:return"-webkit-box-"+P.replace("-grow","")+"-webkit-"+P+"-ms-"+P.replace("grow","positive")+P;case 115:return"-webkit-"+P+"-ms-"+P.replace("shrink","negative")+P;case 98:return"-webkit-"+P+"-ms-"+P.replace("basis","preferred-size")+P}return"-webkit-"+P+"-ms-"+P+P;case 964:return"-webkit-"+P+"-ms-flex-"+P+P;case 1023:if(P.charCodeAt(8)!==99)break;return q=P.substring(P.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+q+"-webkit-"+P+"-ms-flex-pack"+q+P;case 1005:return v.test(P)?P.replace(c,":-webkit-")+P.replace(c,":-moz-")+P:P;case 1e3:switch(q=P.substring(13).trim(),J=q.indexOf("-")+1,q.charCodeAt(0)+q.charCodeAt(J)){case 226:q=P.replace(A,"tb");break;case 232:q=P.replace(A,"tb-rl");break;case 220:q=P.replace(A,"lr");break;default:return P}return"-webkit-"+P+"-ms-"+q+P;case 1017:if(P.indexOf("sticky",9)===-1)break;case 975:switch(J=(P=R).length-10,q=(P.charCodeAt(J)===33?P.substring(0,J):P).substring(R.indexOf(":",7)+1).trim(),bt=q.charCodeAt(0)+(q.charCodeAt(7)|0)){case 203:if(111>q.charCodeAt(8))break;case 115:P=P.replace(q,"-webkit-"+q)+";"+P;break;case 207:case 102:P=P.replace(q,"-webkit-"+(102<bt?"inline-":"")+"box")+";"+P.replace(q,"-webkit-"+q)+";"+P.replace(q,"-ms-"+q+"box")+";"+P}return P+";";case 938:if(P.charCodeAt(5)===45)switch(P.charCodeAt(6)){case 105:return q=P.replace("-items",""),"-webkit-"+P+"-webkit-box-"+q+"-ms-flex-"+q+P;case 115:return"-webkit-"+P+"-ms-flex-item-"+P.replace(K,"")+P;default:return"-webkit-"+P+"-ms-flex-line-pack"+P.replace("align-content","").replace(K,"")+P}break;case 973:case 989:if(P.charCodeAt(3)!==45||P.charCodeAt(4)===122)break;case 931:case 953:if(at.test(R)===!0)return(q=R.substring(R.indexOf(":")+1)).charCodeAt(0)===115?a(R.replace("stretch","fill-available"),J,H,G).replace(":fill-available",":stretch"):P.replace(q,"-webkit-"+q)+P.replace(q,"-moz-"+q.replace("fill-",""))+P;break;case 962:if(P="-webkit-"+P+(P.charCodeAt(5)===102?"-ms-"+P:"")+P,H+G===211&&P.charCodeAt(13)===105&&0<P.indexOf("transform",10))return P.substring(0,P.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+P}return P}function r(R,J){var H=R.indexOf(J===1?":":"{"),G=R.substring(0,J!==3?H:10);return H=R.substring(H+1,R.length-1),et(J!==2?G:G.replace(M,"$1"),H,J)}function o(R,J){var H=a(J,J.charCodeAt(0),J.charCodeAt(1),J.charCodeAt(2));return H!==J+";"?H.replace(j," or ($1)").substring(4):"("+J+")"}function s(R,J,H,G,P,bt,q,ft,gt,_t){for(var nt=0,St=J,u;nt<ot;++nt)switch(u=Q[nt].call(l,R,St,H,G,P,bt,q,ft,gt,_t)){case void 0:case!1:case!0:case null:break;default:St=u}if(St!==J)return St}function h(R){switch(R){case void 0:case null:ot=Q.length=0;break;default:if(typeof R=="function")Q[ot++]=R;else if(typeof R=="object")for(var J=0,H=R.length;J<H;++J)h(R[J]);else mt=!!R|0}return h}function y(R){return R=R.prefix,R!==void 0&&(et=null,R?typeof R!="function"?B=1:(B=2,et=R):B=0),y}function l(R,J){var H=R;if(33>H.charCodeAt(0)&&(H=H.trim()),U=H,H=[U],0<ot){var G=s(-1,J,H,H,L,T,0,0,0,0);G!==void 0&&typeof G=="string"&&(J=G)}var P=n(pt,H,J,0,0);return 0<ot&&(G=s(-2,P,H,H,L,T,P.length,0,0,0),G!==void 0&&(P=G)),U="",f=0,T=L=1,P}var w=/^\0+/g,k=/[\0\r\f]/g,c=/: */g,v=/zoo|gra/,p=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,C=/@(k\w+)\s*(\S*)\s*/,x=/::(place)/g,O=/:(read-only)/g,A=/[svh]\w+-[tblr]{2}/,W=/\(\s*(.*)\s*\)/g,j=/([\s\S]*?);/g,K=/-self|flex-/g,M=/[^]*?(:[rp][el]a[\w-]+)[^]*/,at=/stretch|:\s*\w+\-(?:conte|avail)/,lt=/([^-])(image-set\()/,T=1,L=1,f=0,B=1,pt=[],Q=[],ot=0,et=null,mt=0,U="";return l.use=h,l.set=y,e!==void 0&&y(e),l}var Po={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function zo(e){var n=Object.create(null);return function(t){return n[t]===void 0&&(n[t]=e(t)),n[t]}}var Fo=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,gi=zo(function(e){return Fo.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Hn=Ie.exports,Mo={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Bo={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Uo={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},vi={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Vn={};Vn[Hn.ForwardRef]=Uo,Vn[Hn.Memo]=vi;function yi(e){return Hn.isMemo(e)?vi:Vn[e.$$typeof]||Mo}var Lo=Object.defineProperty,jo=Object.getOwnPropertyNames,wi=Object.getOwnPropertySymbols,$o=Object.getOwnPropertyDescriptor,Wo=Object.getPrototypeOf,bi=Object.prototype;function Ci(e,n,t){if(typeof n!="string"){if(bi){var i=Wo(n);i&&i!==bi&&Ci(e,i,t)}var a=jo(n);wi&&(a=a.concat(wi(n)));for(var r=yi(e),o=yi(n),s=0;s<a.length;++s){var h=a[s];if(!Bo[h]&&!(t&&t[h])&&!(o&&o[h])&&!(r&&r[h])){var y=$o(n,h);try{Lo(e,h,y)}catch{}}}}return e}var Ho=Ci;function ne(){return(ne=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var ki=function(e,n){for(var t=[e[0]],i=0,a=n.length;i<a;i+=1)t.push(n[i],e[i+1]);return t},Yn=function(e){return e!==null&&typeof e=="object"&&(e.toString?e.toString():Object.prototype.toString.call(e))==="[object Object]"&&!Ie.exports.typeOf(e)},an=Object.freeze([]),le=Object.freeze({});function De(e){return typeof e=="function"}function Gn(e){return{}.NODE_ENV!=="production"&&typeof e=="string"&&e||e.displayName||e.name||"Component"}function Zn(e){return e&&typeof e.styledComponentId=="string"}var we=typeof process<"u"&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Xn=typeof window<"u"&&"HTMLElement"in window,Vo=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:{}.NODE_ENV!=="production"),Yo={}.NODE_ENV!=="production"?{1:`Cannot create styled-component for component: %s.

`,2:`Can't collect styles once you've consumed a \`ServerStyleSheet\`'s styles! \`ServerStyleSheet\` is a one off instance for each server-side render cycle.

- Are you trying to reuse it across renders?
- Are you accidentally calling collectStyles twice?

`,3:`Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.

`,4:`The \`StyleSheetManager\` expects a valid target or sheet prop!

- Does this error occur on the client and is your target falsy?
- Does this error occur on the server and is the sheet falsy?

`,5:`The clone method cannot be used on the client!

- Are you running in a client-like environment on the server?
- Are you trying to run SSR on the client?

`,6:`Trying to insert a new style tag, but the given Node is unmounted!

- Are you using a custom target that isn't mounted?
- Does your document not have a valid head element?
- Have you accidentally removed a style tag manually?

`,7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:`ThemeProvider: Please make your "theme" prop an object.

`,9:"Missing document `<head>`\n\n",10:`Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021

`,11:`_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.

`,12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:`%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.

`,14:`ThemeProvider: "theme" prop is required.

`,15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:`Reached the limit of how many styled components may be created at group %s.
You may only create up to 1,073,741,824 components. If you're creating components dynamically,
as for instance in your render method then you may be running into this limitation.

`,17:`CSSStyleSheet could not be found on HTMLStyleElement.
Has styled-components' style tag been unmounted or altered by another script?
`}:{};function Go(){for(var e=arguments.length<=0?void 0:arguments[0],n=[],t=1,i=arguments.length;t<i;t+=1)n.push(t<0||arguments.length<=t?void 0:arguments[t]);return n.forEach(function(a){e=e.replace(/%[a-z]/,a)}),e}function be(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];throw{}.NODE_ENV==="production"?new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(t.length>0?" Args: "+t.join(", "):"")):new Error(Go.apply(void 0,[Yo[e]].concat(t)).trim())}var Zo=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var n=e.prototype;return n.indexOfGroup=function(t){for(var i=0,a=0;a<t;a++)i+=this.groupSizes[a];return i},n.insertRules=function(t,i){if(t>=this.groupSizes.length){for(var a=this.groupSizes,r=a.length,o=r;t>=o;)(o<<=1)<0&&be(16,""+t);this.groupSizes=new Uint32Array(o),this.groupSizes.set(a),this.length=o;for(var s=r;s<o;s++)this.groupSizes[s]=0}for(var h=this.indexOfGroup(t+1),y=0,l=i.length;y<l;y++)this.tag.insertRule(h,i[y])&&(this.groupSizes[t]++,h++)},n.clearGroup=function(t){if(t<this.length){var i=this.groupSizes[t],a=this.indexOfGroup(t),r=a+i;this.groupSizes[t]=0;for(var o=a;o<r;o++)this.tag.deleteRule(a)}},n.getGroup=function(t){var i="";if(t>=this.length||this.groupSizes[t]===0)return i;for(var a=this.groupSizes[t],r=this.indexOfGroup(t),o=r+a,s=r;s<o;s++)i+=this.tag.getRule(s)+`/*!sc*/
`;return i},e}(),on=new Map,sn=new Map,Ne=1,un=function(e){if(on.has(e))return on.get(e);for(;sn.has(Ne);)Ne++;var n=Ne++;return{}.NODE_ENV!=="production"&&((0|n)<0||n>1<<30)&&be(16,""+n),on.set(e,n),sn.set(n,e),n},Xo=function(e){return sn.get(e)},Ko=function(e,n){n>=Ne&&(Ne=n+1),on.set(e,n),sn.set(n,e)},Jo="style["+we+'][data-styled-version="5.3.6"]',qo=new RegExp("^"+we+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Qo=function(e,n,t){for(var i,a=t.split(","),r=0,o=a.length;r<o;r++)(i=a[r])&&e.registerName(n,i)},ts=function(e,n){for(var t=(n.textContent||"").split(`/*!sc*/
`),i=[],a=0,r=t.length;a<r;a++){var o=t[a].trim();if(o){var s=o.match(qo);if(s){var h=0|parseInt(s[1],10),y=s[2];h!==0&&(Ko(y,h),Qo(e,y,s[3]),e.getTag().insertRules(h,i)),i.length=0}else i.push(o)}}},es=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},Si=function(e){var n=document.head,t=e||n,i=document.createElement("style"),a=function(s){for(var h=s.childNodes,y=h.length;y>=0;y--){var l=h[y];if(l&&l.nodeType===1&&l.hasAttribute(we))return l}}(t),r=a!==void 0?a.nextSibling:null;i.setAttribute(we,"active"),i.setAttribute("data-styled-version","5.3.6");var o=es();return o&&i.setAttribute("nonce",o),t.insertBefore(i,r),i},ns=function(){function e(t){var i=this.element=Si(t);i.appendChild(document.createTextNode("")),this.sheet=function(a){if(a.sheet)return a.sheet;for(var r=document.styleSheets,o=0,s=r.length;o<s;o++){var h=r[o];if(h.ownerNode===a)return h}be(17)}(i),this.length=0}var n=e.prototype;return n.insertRule=function(t,i){try{return this.sheet.insertRule(i,t),this.length++,!0}catch{return!1}},n.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},n.getRule=function(t){var i=this.sheet.cssRules[t];return i!==void 0&&typeof i.cssText=="string"?i.cssText:""},e}(),rs=function(){function e(t){var i=this.element=Si(t);this.nodes=i.childNodes,this.length=0}var n=e.prototype;return n.insertRule=function(t,i){if(t<=this.length&&t>=0){var a=document.createTextNode(i),r=this.nodes[t];return this.element.insertBefore(a,r||null),this.length++,!0}return!1},n.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},n.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),is=function(){function e(t){this.rules=[],this.length=0}var n=e.prototype;return n.insertRule=function(t,i){return t<=this.length&&(this.rules.splice(t,0,i),this.length++,!0)},n.deleteRule=function(t){this.rules.splice(t,1),this.length--},n.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),Ei=Xn,as={isServer:!Xn,useCSSOMInjection:!Vo},Ai=function(){function e(t,i,a){t===void 0&&(t=le),i===void 0&&(i={}),this.options=ne({},as,{},t),this.gs=i,this.names=new Map(a),this.server=!!t.isServer,!this.server&&Xn&&Ei&&(Ei=!1,function(r){for(var o=document.querySelectorAll(Jo),s=0,h=o.length;s<h;s++){var y=o[s];y&&y.getAttribute(we)!=="active"&&(ts(r,y),y.parentNode&&y.parentNode.removeChild(y))}}(this))}e.registerId=function(t){return un(t)};var n=e.prototype;return n.reconstructWithOptions=function(t,i){return i===void 0&&(i=!0),new e(ne({},this.options,{},t),this.gs,i&&this.names||void 0)},n.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},n.getTag=function(){return this.tag||(this.tag=(a=(i=this.options).isServer,r=i.useCSSOMInjection,o=i.target,t=a?new is(o):r?new ns(o):new rs(o),new Zo(t)));var t,i,a,r,o},n.hasNameForId=function(t,i){return this.names.has(t)&&this.names.get(t).has(i)},n.registerName=function(t,i){if(un(t),this.names.has(t))this.names.get(t).add(i);else{var a=new Set;a.add(i),this.names.set(t,a)}},n.insertRules=function(t,i,a){this.registerName(t,i),this.getTag().insertRules(un(t),a)},n.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},n.clearRules=function(t){this.getTag().clearGroup(un(t)),this.clearNames(t)},n.clearTag=function(){this.tag=void 0},n.toString=function(){return function(t){for(var i=t.getTag(),a=i.length,r="",o=0;o<a;o++){var s=Xo(o);if(s!==void 0){var h=t.names.get(s),y=i.getGroup(o);if(h&&y&&h.size){var l=we+".g"+o+'[id="'+s+'"]',w="";h!==void 0&&h.forEach(function(k){k.length>0&&(w+=k+",")}),r+=""+y+l+'{content:"'+w+`"}/*!sc*/
`}}}return r}(this)},e}(),os=/(a)(d)/gi,xi=function(e){return String.fromCharCode(e+(e>25?39:97))};function Kn(e){var n,t="";for(n=Math.abs(e);n>52;n=n/52|0)t=xi(n%52)+t;return(xi(n%52)+t).replace(os,"$1-$2")}var pe=function(e,n){for(var t=n.length;t;)e=33*e^n.charCodeAt(--t);return e},Ti=function(e){return pe(5381,e)};function ss(e){for(var n=0;n<e.length;n+=1){var t=e[n];if(De(t)&&!Zn(t))return!1}return!0}var us=Ti("5.3.6"),cs=function(){function e(n,t,i){this.rules=n,this.staticRulesId="",this.isStatic={}.NODE_ENV==="production"&&(i===void 0||i.isStatic)&&ss(n),this.componentId=t,this.baseHash=pe(us,t),this.baseStyle=i,Ai.registerId(t)}return e.prototype.generateAndInjectStyles=function(n,t,i){var a=this.componentId,r=[];if(this.baseStyle&&r.push(this.baseStyle.generateAndInjectStyles(n,t,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(a,this.staticRulesId))r.push(this.staticRulesId);else{var o=Ce(this.rules,n,t,i).join(""),s=Kn(pe(this.baseHash,o)>>>0);if(!t.hasNameForId(a,s)){var h=i(o,"."+s,void 0,a);t.insertRules(a,s,h)}r.push(s),this.staticRulesId=s}else{for(var y=this.rules.length,l=pe(this.baseHash,i.hash),w="",k=0;k<y;k++){var c=this.rules[k];if(typeof c=="string")w+=c,{}.NODE_ENV!=="production"&&(l=pe(l,c+k));else if(c){var v=Ce(c,n,t,i),p=Array.isArray(v)?v.join(""):v;l=pe(l,p+k),w+=p}}if(w){var m=Kn(l>>>0);if(!t.hasNameForId(a,m)){var g=i(w,"."+m,void 0,a);t.insertRules(a,m,g)}r.push(m)}}return r.join(" ")},e}(),ls=/^\s*\/\/.*$/gm,hs=[":","[",".","#"];function fs(e){var n,t,i,a,r=e===void 0?le:e,o=r.options,s=o===void 0?le:o,h=r.plugins,y=h===void 0?an:h,l=new No(s),w=[],k=function(p){function m(g){if(g)try{p(g+"}")}catch{}}return function(g,C,x,O,A,W,j,K,M,at){switch(g){case 1:if(M===0&&C.charCodeAt(0)===64)return p(C+";"),"";break;case 2:if(K===0)return C+"/*|*/";break;case 3:switch(K){case 102:case 112:return p(x[0]+C),"";default:return C+(at===0?"/*|*/":"")}case-2:C.split("/*|*/}").forEach(m)}}}(function(p){w.push(p)}),c=function(p,m,g){return m===0&&hs.indexOf(g[t.length])!==-1||g.match(a)?p:"."+n};function v(p,m,g,C){C===void 0&&(C="&");var x=p.replace(ls,""),O=m&&g?g+" "+m+" { "+x+" }":x;return n=C,t=m,i=new RegExp("\\"+t+"\\b","g"),a=new RegExp("(\\"+t+"\\b){2,}"),l(g||!m?"":m,O)}return l.use([].concat(y,[function(p,m,g){p===2&&g.length&&g[0].lastIndexOf(t)>0&&(g[0]=g[0].replace(i,c))},k,function(p){if(p===-2){var m=w;return w=[],m}}])),v.hash=y.length?y.reduce(function(p,m){return m.name||be(15),pe(p,m.name)},5381).toString():"",v}var Oi=rn.createContext();Oi.Consumer;var Ii=rn.createContext(),ds=(Ii.Consumer,new Ai),Jn=fs();function ps(){return ve(Oi)||ds}function ms(){return ve(Ii)||Jn}var _s=function(){function e(n,t){var i=this;this.inject=function(a,r){r===void 0&&(r=Jn);var o=i.name+r.hash;a.hasNameForId(i.id,o)||a.insertRules(i.id,o,r(i.rules,o,"@keyframes"))},this.toString=function(){return be(12,String(i.name))},this.name=n,this.id="sc-keyframes-"+n,this.rules=t}return e.prototype.getName=function(n){return n===void 0&&(n=Jn),this.name+n.hash},e}(),gs=/([A-Z])/,vs=/([A-Z])/g,ys=/^ms-/,ws=function(e){return"-"+e.toLowerCase()};function Ri(e){return gs.test(e)?e.replace(vs,ws).replace(ys,"-ms-"):e}var Di=function(e){return e==null||e===!1||e===""};function Ce(e,n,t,i){if(Array.isArray(e)){for(var a,r=[],o=0,s=e.length;o<s;o+=1)(a=Ce(e[o],n,t,i))!==""&&(Array.isArray(a)?r.push.apply(r,a):r.push(a));return r}if(Di(e))return"";if(Zn(e))return"."+e.styledComponentId;if(De(e)){if(typeof(y=e)!="function"||y.prototype&&y.prototype.isReactComponent||!n)return e;var h=e(n);return{}.NODE_ENV!=="production"&&Ie.exports.isElement(h)&&console.warn(Gn(e)+" is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details."),Ce(h,n,t,i)}var y;return e instanceof _s?t?(e.inject(t,i),e.getName(i)):e:Yn(e)?function l(w,k){var c,v,p=[];for(var m in w)w.hasOwnProperty(m)&&!Di(w[m])&&(Array.isArray(w[m])&&w[m].isCss||De(w[m])?p.push(Ri(m)+":",w[m],";"):Yn(w[m])?p.push.apply(p,l(w[m],m)):p.push(Ri(m)+": "+(c=m,(v=w[m])==null||typeof v=="boolean"||v===""?"":typeof v!="number"||v===0||c in Po?String(v).trim():v+"px")+";"));return k?[k+" {"].concat(p,["}"]):p}(e):e.toString()}var Ni=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function bs(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];return De(e)||Yn(e)?Ni(Ce(ki(an,[e].concat(t)))):t.length===0&&e.length===1&&typeof e[0]=="string"?e:Ni(Ce(ki(e,t)))}var Pi=/invalid hook call/i,cn=new Set,Cs=function(e,n){if({}.NODE_ENV!=="production"){var t="The component "+e+(n?' with the id of "'+n+'"':"")+` has been created dynamically.
You may see this warning because you've called styled inside another component.
To resolve this only create new StyledComponents outside of any render method and function component.`,i=console.error;try{var a=!0;console.error=function(r){if(Pi.test(r))a=!1,cn.delete(t);else{for(var o=arguments.length,s=new Array(o>1?o-1:0),h=1;h<o;h++)s[h-1]=arguments[h];i.apply(void 0,[r].concat(s))}},de(),a&&!cn.has(t)&&(console.warn(t),cn.add(t))}catch(r){Pi.test(r.message)&&cn.delete(t)}finally{console.error=i}}},ks=function(e,n,t){return t===void 0&&(t=le),e.theme!==t.theme&&e.theme||n||t.theme},Ss=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Es=/(^-|-$)/g;function qn(e){return e.replace(Ss,"-").replace(Es,"")}var As=function(e){return Kn(Ti(e)>>>0)};function ln(e){return typeof e=="string"&&({}.NODE_ENV==="production"||e.charAt(0)===e.charAt(0).toLowerCase())}var Qn=function(e){return typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)},xs=function(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"};function Ts(e,n,t){var i=e[t];Qn(n)&&Qn(i)?zi(i,n):e[t]=n}function zi(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];for(var a=0,r=t;a<r.length;a++){var o=r[a];if(Qn(o))for(var s in o)xs(s)&&Ts(e,o[s],s)}return e}var Fi=rn.createContext();Fi.Consumer;var tr={};function Mi(e,n,t){var i=Zn(e),a=!ln(e),r=n.attrs,o=r===void 0?an:r,s=n.componentId,h=s===void 0?function(C,x){var O=typeof C!="string"?"sc":qn(C);tr[O]=(tr[O]||0)+1;var A=O+"-"+As("5.3.6"+O+tr[O]);return x?x+"-"+A:A}(n.displayName,n.parentComponentId):s,y=n.displayName,l=y===void 0?function(C){return ln(C)?"styled."+C:"Styled("+Gn(C)+")"}(e):y,w=n.displayName&&n.componentId?qn(n.displayName)+"-"+n.componentId:n.componentId||h,k=i&&e.attrs?Array.prototype.concat(e.attrs,o).filter(Boolean):o,c=n.shouldForwardProp;i&&e.shouldForwardProp&&(c=n.shouldForwardProp?function(C,x,O){return e.shouldForwardProp(C,x,O)&&n.shouldForwardProp(C,x,O)}:e.shouldForwardProp);var v,p=new cs(t,w,i?e.componentStyle:void 0),m=p.isStatic&&o.length===0,g=function(C,x){return function(O,A,W,j){var K=O.attrs,M=O.componentStyle,at=O.defaultProps,lt=O.foldedComponentIds,T=O.shouldForwardProp,L=O.styledComponentId,f=O.target;({}).NODE_ENV!=="production"&&zn(L);var B=function(G,P,bt){G===void 0&&(G=le);var q=ne({},P,{theme:G}),ft={};return bt.forEach(function(gt){var _t,nt,St,u=gt;for(_t in De(u)&&(u=u(q)),u)q[_t]=ft[_t]=_t==="className"?(nt=ft[_t],St=u[_t],nt&&St?nt+" "+St:nt||St):u[_t]}),[q,ft]}(ks(A,ve(Fi),at)||le,A,K),pt=B[0],Q=B[1],ot=function(G,P,bt,q){var ft=ps(),gt=ms(),_t=P?G.generateAndInjectStyles(le,ft,gt):G.generateAndInjectStyles(bt,ft,gt);return{}.NODE_ENV!=="production"&&zn(_t),{}.NODE_ENV!=="production"&&!P&&q&&q(_t),_t}(M,j,pt,{}.NODE_ENV!=="production"?O.warnTooManyClasses:void 0),et=W,mt=Q.$as||A.$as||Q.as||A.as||f,U=ln(mt),R=Q!==A?ne({},A,{},Q):A,J={};for(var H in R)H[0]!=="$"&&H!=="as"&&(H==="forwardedAs"?J.as=R[H]:(T?T(H,gi,mt):!U||gi(H))&&(J[H]=R[H]));return A.style&&Q.style!==A.style&&(J.style=ne({},A.style,{},Q.style)),J.className=Array.prototype.concat(lt,L,ot!==L?ot:null,A.className,Q.className).filter(Boolean).join(" "),J.ref=et,$t(mt,J)}(v,C,x,m)};return g.displayName=l,(v=rn.forwardRef(g)).attrs=k,v.componentStyle=p,v.displayName=l,v.shouldForwardProp=c,v.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):an,v.styledComponentId=w,v.target=i?e.target:e,v.withComponent=function(C){var x=n.componentId,O=function(W,j){if(W==null)return{};var K,M,at={},lt=Object.keys(W);for(M=0;M<lt.length;M++)K=lt[M],j.indexOf(K)>=0||(at[K]=W[K]);return at}(n,["componentId"]),A=x&&x+"-"+(ln(C)?C:qn(Gn(C)));return Mi(C,ne({},O,{attrs:k,componentId:A}),t)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(C){this._foldedDefaultProps=i?zi({},e.defaultProps,C):C}}),{}.NODE_ENV!=="production"&&(Cs(l,w),v.warnTooManyClasses=function(C,x){var O={},A=!1;return function(W){if(!A&&(O[W]=!0,Object.keys(O).length>=200)){var j=x?' with the id of "'+x+'"':"";console.warn("Over 200 classes were generated for component "+C+j+`.
Consider using the attrs method, together with a style object for frequently changed styles.
Example:
  const Component = styled.div.attrs(props => ({
    style: {
      background: props.background,
    },
  }))\`width: 100%;\`

  <Component />`),A=!0,O={}}}}(l,w)),v.toString=function(){return"."+v.styledComponentId},a&&Ho(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var er=function(e){return function n(t,i,a){if(a===void 0&&(a=le),!Ie.exports.isValidElementType(i))return be(1,String(i));var r=function(){return t(i,a,bs.apply(void 0,arguments))};return r.withConfig=function(o){return n(t,i,ne({},a,{},o))},r.attrs=function(o){return n(t,i,ne({},a,{attrs:Array.prototype.concat(a.attrs,o).filter(Boolean)}))},r}(Mi,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){er[e]=er(e)}),{}.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn(`It looks like you've imported 'styled-components' on React Native.
Perhaps you're looking to import 'styled-components/native'?
Read more about this at https://www.styled-components.com/docs/basics#react-native`),{}.NODE_ENV!=="production"&&{}.NODE_ENV!=="test"&&typeof window<"u"&&(window["__styled-components-init__"]=window["__styled-components-init__"]||0,window["__styled-components-init__"]===1&&console.warn(`It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.

See https://s-c.sh/2BAXzed for more info.`),window["__styled-components-init__"]+=1);const hn=er,Os=hn.div`
  position: relative;
`,Is=hn.video`
  transform: ${e=>e.isImageMirror?"rotateY(180deg)":"none"};
  display: block;
  width: 100%;
`;class Bi extends Yt{componentDidCatch(){const n=new zt("An unknown error has occurred");this.context.handleError(n)}render(){return this.context.appState===Ht.ERROR?null:this.props.children}}Bi.contextType=Bn;const Rs=hn.canvas`
  transform: ${e=>e.isImageMirror?"rotateY(180deg)":"none"};
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,Ds=hn.div`
  background-color: #00000060;
  color: #fff;
  font-size: 13px;
  width: 300px;
  padding: 10px;
  z-index: 1;
  word-break: break-word;
  position: absolute;
  top: 0;
`,Ns=ni(({detectionDetails:e,isImageMirror:n},t)=>Mt(Vt,{children:[Mt(Rs,{ref:t,isImageMirror:n}),Mt(Ds,{children:Mt(Vt,{children:Object.entries(e).map(([i,a])=>Mt("div",{children:[i,": ",Mt("strong",{children:a})]},i))})})]})),Ps=(e,n)=>{const{cameraResolution:t,shouldMirror:i}=n;Lt(()=>{!t||va(e,{cameraResolution:t,isMirroring:i})},[t,i,e])},zs=e=>e===te.CONTROL?!Ln():!0,Fs=(e,n)=>{const{appState:t,handleAppStateChange:i,handleError:a}=Ke(),[r,o]=ee(),s=Ge(()=>{const h=n==null?void 0:n.getCameraSettings().facingMode;return h==null?r!=null?r:zs(e):r!=null?r:h==="user"},[n,r,e]);return Lt(()=>{const h=()=>{t===Ht.WAITING&&i(Ht.RUNNING)},y=()=>{o(r===void 0?!s:!r)},l=async()=>{if(!!n){i(Ht.LOADING);try{await n.switchCamera(),i(Ht.RUNNING)}catch(k){if(k instanceof Error){a(zt.fromCameraError(k));return}}o(void 0)}},w=k=>{var c;switch((c=k.detail)==null?void 0:c.instruction){case He.CONTINUE_DETECTION:h();break;case He.TOGGLE_MIRROR:y();break;case He.SWITCH_CAMERA:l();break;default:return}};return document.addEventListener(e,w),()=>{document.removeEventListener(e,w)}},[t,n,a,r,i,s,e]),{shouldMirror:s}},Ms=(e,n)=>{var h;const t=de(),{handleError:i,setIsCameraReady:a}=Ke(),[r,o]=ee(),s=Ze(y=>{o(l=>Wa(y,l))},[]);return Lt(()=>((async()=>{if(!(e!=null&&e.current)){i(new zt("Something went wrong during video initialization"));return}const l=new en(e.current);try{await l.initWebcam({facingMode:n})}catch(w){if(w instanceof Error){i(zt.fromCameraError(w));return}}a(!0),s(l.getCameraResolution()),t.current=l})(),function(){t.current&&t.current.stopCamera()}),[n,i,a,e,s]),{cameraHandler:t.current,cameraSettings:(h=t.current)==null?void 0:h.getCameraSettings(),cameraResolution:r,onCameraResolutionChange:s}},Bs=(e,n,t)=>{const{handleError:i}=Ke(),a=de();return Lt(()=>{(async()=>{e.setThresholds(n);try{await e.initDetector(t)}catch{i(new zt("Cannot init document detector"));return}a.current=e})()},[i,e,n,t]),{controller:a.current}},Us=e=>{const[n,t]=ee(!1);return Lt(()=>{t(!!window.DOT_DEBUG_MODE)},[window.DOT_DEBUG_MODE]),Lt(()=>{n&&e&&console.log(e)}),n},Ls=()=>{Lt(()=>(window.addEventListener("beforeunload",Oe.endSession),()=>{Oe.endSession(),window.removeEventListener("beforeunload",Oe.endSession)}),[])},js=(e,n)=>{Lt(()=>{const t=()=>{!e.current||ya(n,e.current.getBoundingClientRect())};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e,n])},$s=(e,n)=>{if(Ga()){const t={candidateSelectionImages:n};me.getInstance().dispatchCustomEventOnChange(e,t)}},fn=(e,n)=>Math.hypot(n.x-e.x,n.y-e.y),Ws=e=>e.length<1?0:e.reduce((t,i)=>t+i,0)/e.length,Hs=e=>{const n=e.getContext("2d");!n||n.clearRect(0,0,n.canvas.width,n.canvas.height)},Vs=e=>e<Or?Or:e,Ys=(e,n)=>e<n?e:n,nr=({width:e,height:n})=>{let t;return e>n?t=Vs(n):t=e,{width:t,height:Ys(n,t)}},Gs=e=>{const t=nr(e).width*ma,i=(e.width-t)/2,a=t/pa,r=(e.height-a)/2;return{shiftX:i,shiftY:r,width:t,height:a}},Ui=e=>{const{topLeft:n,bottomLeft:t,topRight:i,bottomRight:a}=e,r=fn(n,i),o=fn(i,a),s=fn(t,a),h=fn(n,t);return Math.min(r,o,s,h)},rr=e=>{const{width:n,height:t}=nr(e),i=(e.width-n)/2,a=(e.height-t)/2;return{shiftX:i,shiftY:a,width:n,height:t}},Li=(e,n)=>{const t=nr(e),i=t.width-t.width*2*n,a=t.height-t.height*2*n,r=(e.width-i)/2,o=(e.height-a)/2;return{width:i,height:a,shiftX:r,shiftY:o}},dn=(e,n)=>{const{shiftX:t,shiftY:i}=rr(e);return{x:n.x+t,y:n.y+i}},Zs=(e,n)=>({...n,topLeft:dn(e,n.topLeft),topRight:dn(e,n.topRight),bottomRight:dn(e,n.bottomRight),bottomLeft:dn(e,n.bottomLeft)}),Xs=(e,{topLeft:n,topRight:t,bottomLeft:i,bottomRight:a},r)=>{const o=e.getContext("2d");!o||(o.beginPath(),o.strokeStyle=r,o.moveTo(n.x,n.y),o.lineTo(t.x,t.y),o.lineTo(a.x,a.y),o.lineTo(i.x,i.y),o.closePath(),o.stroke())},Ks=({detectionDetails:e,isImageMirror:n,cameraResolution:t})=>{const{documentCameraOptions:{thresholds:i}}=Jr(),a=de(null);Lt(()=>{if(!(a!=null&&a.current))return;a.current.width=t.width,a.current.height=t.height,Hs(a.current);const k=rr(t),c=Li(t,i.outOfBoundsThreshold),v=Gs(t);Xs(a.current,e.document,"red"),jn(a.current,k,"green"),jn(a.current,c,"yellow"),jn(a.current,v,"blue")},[t,e.document,i.outOfBoundsThreshold]);const{document:r,detectionTime:o,fps:s,instructionCode:h,resolution:y,samVersion:l}=e,w={Confidence:r.confidence,"Smallest edge":r.smallestEdge,Brightness:r.brightness,Hotspots:r.hotspots,Sharpness:r.sharpness,"Detection time":o,FPS:s,Instruction:h,Resolution:JSON.stringify(y)};return l&&(w["SAM version"]=l),Mt(Ns,{isImageMirror:n,cameraResolution:t,detectionDetails:w,ref:a})};class Js{constructor(){Dt(this,"isDetectorInitialized",!1);Dt(this,"isInCandidateSelection",!1);Dt(this,"lastImage",null);Dt(this,"bestImage",null);Dt(this,"record",[]);Dt(this,"candidateSelectionImages",[]);Dt(this,"thresholds",null)}async initDetector(n){await this.detector.initSamModule(n),this.isDetectorInitialized=!0}getCandidateSelectionImages(){return this.candidateSelectionImages}getBestImage(){return this.bestImage}getRecord(){return this.record}getThresholds(){if(!this.thresholds)throw new zt(`Thresholds for ${this.className} are not provided`);return this.thresholds}setThresholds(n){this.thresholds=n}restart(){this.isInCandidateSelection=!1,this.lastImage=null,this.bestImage=null,this.candidateSelectionImages=[]}isDetectionValid(n){return Object.values(n).every(i=>i===!0)}isNewImageBetter(n,t){return t.sharpness>n.sharpness}getSamVersion(){return this.detector.getSamVersion()}}var qs=function(){var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(n){n=n||{};var t;t||(t=typeof n<"u"?n:{});var i,a;t.ready=new Promise(function(d,_){i=d,a=_});var r={},o;for(o in t)t.hasOwnProperty(o)&&(r[o]=t[o]);var s="./this.program",h=!1,y=!1;h=typeof window=="object",y=typeof importScripts=="function";var l="",w;(h||y)&&(y?l=self.location.href:document.currentScript&&(l=document.currentScript.src),e&&(l=e),l.indexOf("blob:")!==0?l=l.substr(0,l.lastIndexOf("/")+1):l="",y&&(w=function(d){var _=new XMLHttpRequest;return _.open("GET",d,!1),_.responseType="arraybuffer",_.send(null),new Uint8Array(_.response)}));var k=t.print||console.log.bind(console),c=t.printErr||console.warn.bind(console);for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);r=null,t.thisProgram&&(s=t.thisProgram);var v;t.wasmBinary&&(v=t.wasmBinary),t.noExitRuntime&&t.noExitRuntime,typeof WebAssembly!="object"&&_t("no native wasm support detected");var p,m=!1;function g(d){d||_t("Assertion failed: undefined")}var C=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function x(d,_,E){var I=_+E;for(E=_;d[E]&&!(E>=I);)++E;if(16<E-_&&d.subarray&&C)return C.decode(d.subarray(_,E));for(I="";_<E;){var Y=d[_++];if(Y&128){var X=d[_++]&63;if((Y&224)==192)I+=String.fromCharCode((Y&31)<<6|X);else{var ct=d[_++]&63;Y=(Y&240)==224?(Y&15)<<12|X<<6|ct:(Y&7)<<18|X<<12|ct<<6|d[_++]&63,65536>Y?I+=String.fromCharCode(Y):(Y-=65536,I+=String.fromCharCode(55296|Y>>10,56320|Y&1023))}}else I+=String.fromCharCode(Y)}return I}function O(d,_,E,I){if(0<I){I=E+I-1;for(var Y=0;Y<d.length;++Y){var X=d.charCodeAt(Y);if(55296<=X&&57343>=X){var ct=d.charCodeAt(++Y);X=65536+((X&1023)<<10)|ct&1023}if(127>=X){if(E>=I)break;_[E++]=X}else{if(2047>=X){if(E+1>=I)break;_[E++]=192|X>>6}else{if(65535>=X){if(E+2>=I)break;_[E++]=224|X>>12}else{if(E+3>=I)break;_[E++]=240|X>>18,_[E++]=128|X>>12&63}_[E++]=128|X>>6&63}_[E++]=128|X&63}}_[E]=0}}function A(d){for(var _=0,E=0;E<d.length;++E){var I=d.charCodeAt(E);55296<=I&&57343>=I&&(I=65536+((I&1023)<<10)|d.charCodeAt(++E)&1023),127>=I?++_:_=2047>=I?_+2:65535>=I?_+3:_+4}return _}var W=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function j(d,_){for(var E=d>>1,I=E+_/2;!(E>=I)&&Q[E];)++E;if(E<<=1,32<E-d&&W)return W.decode(B.subarray(d,E));for(E=0,I="";;){var Y=pt[d+2*E>>1];if(Y==0||E==_/2)return I;++E,I+=String.fromCharCode(Y)}}function K(d,_,E){if(E===void 0&&(E=2147483647),2>E)return 0;E-=2;var I=_;E=E<2*d.length?E/2:d.length;for(var Y=0;Y<E;++Y)pt[_>>1]=d.charCodeAt(Y),_+=2;return pt[_>>1]=0,_-I}function M(d){return 2*d.length}function at(d,_){for(var E=0,I="";!(E>=_/4);){var Y=ot[d+4*E>>2];if(Y==0)break;++E,65536<=Y?(Y-=65536,I+=String.fromCharCode(55296|Y>>10,56320|Y&1023)):I+=String.fromCharCode(Y)}return I}function lt(d,_,E){if(E===void 0&&(E=2147483647),4>E)return 0;var I=_;E=I+E-4;for(var Y=0;Y<d.length;++Y){var X=d.charCodeAt(Y);if(55296<=X&&57343>=X){var ct=d.charCodeAt(++Y);X=65536+((X&1023)<<10)|ct&1023}if(ot[_>>2]=X,_+=4,_+4>E)break}return ot[_>>2]=0,_-I}function T(d){for(var _=0,E=0;E<d.length;++E){var I=d.charCodeAt(E);55296<=I&&57343>=I&&++E,_+=4}return _}var L,f,B,pt,Q,ot,et,mt,U;function R(d){L=d,t.HEAP8=f=new Int8Array(d),t.HEAP16=pt=new Int16Array(d),t.HEAP32=ot=new Int32Array(d),t.HEAPU8=B=new Uint8Array(d),t.HEAPU16=Q=new Uint16Array(d),t.HEAPU32=et=new Uint32Array(d),t.HEAPF32=mt=new Float32Array(d),t.HEAPF64=U=new Float64Array(d)}var J=t.INITIAL_MEMORY||16777216;t.wasmMemory?p=t.wasmMemory:p=new WebAssembly.Memory({initial:J/65536,maximum:32768}),p&&(L=p.buffer),J=L.byteLength,R(L);var H=[],G=[],P=[],bt=[];function q(){var d=t.preRun.shift();H.unshift(d)}var ft=0,gt=null;t.preloadedImages={},t.preloadedAudios={};function _t(d){throw t.onAbort&&t.onAbort(d),c(d),m=!0,d=new WebAssembly.RuntimeError("abort("+d+"). Build with -s ASSERTIONS=1 for more info."),a(d),d}function nt(d){var _=u;return String.prototype.startsWith?_.startsWith(d):_.indexOf(d)===0}function St(){return nt("data:application/octet-stream;base64,")}var u="sam.wasm";if(!St()){var z=u;u=t.locateFile?t.locateFile(z,l):l+z}function F(){try{if(v)return new Uint8Array(v);if(w)return w(u);throw"both async and sync fetching of the wasm failed"}catch(d){_t(d)}}function S(){return v||!h&&!y||typeof fetch!="function"||nt("file://")?Promise.resolve().then(F):fetch(u,{credentials:"same-origin"}).then(function(d){if(!d.ok)throw"failed to load wasm binary file at '"+u+"'";return d.arrayBuffer()}).catch(function(){return F()})}function b(d){for(;0<d.length;){var _=d.shift();if(typeof _=="function")_(t);else{var E=_.Ka;typeof E=="number"?_.Ca===void 0?D("v",E)():D("vi",E)(_.Ca):E(_.Ca===void 0?null:_.Ca)}}}function D(d,_){var E=[];return function(){E.length=arguments.length;for(var I=0;I<arguments.length;I++)E[I]=arguments[I];return E&&E.length?t["dynCall_"+d].apply(null,[_].concat(E)):t["dynCall_"+d].call(null,_)}}function Z(d){this.ga=d-16,this.Xa=function(_){ot[this.ga+8>>2]=_},this.Ua=function(_){ot[this.ga+0>>2]=_},this.Va=function(){ot[this.ga+4>>2]=0},this.Ta=function(){f[this.ga+12>>0]=0},this.Wa=function(){f[this.ga+13>>0]=0},this.Oa=function(_,E){this.Xa(_),this.Ua(E),this.Va(),this.Ta(),this.Wa()}}function rt(){return 0<rt.Ga}function N(d){switch(d){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+d)}}var it=void 0;function V(d){for(var _="";B[d];)_+=it[B[d++]];return _}var tt={},dt={},Et={};function Ct(d){if(d===void 0)return"_unknown";d=d.replace(/[^a-zA-Z0-9_]/g,"$");var _=d.charCodeAt(0);return 48<=_&&57>=_?"_"+d:d}function jt(d,_){return d=Ct(d),new Function("body","return function "+d+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(_)}function re(d){var _=Error,E=jt(d,function(I){this.name=d,this.message=I,I=Error(I).stack,I!==void 0&&(this.stack=this.toString()+`
`+I.replace(/^Error(:[^\n]*)?\n/,""))});return E.prototype=Object.create(_.prototype),E.prototype.constructor=E,E.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},E}var Bt=void 0;function kt(d){throw new Bt(d)}var Rt=void 0;function ie(d){throw new Rt(d)}function Xt(d,_,E){function I(st){st=E(st),st.length!==d.length&&ie("Mismatched type converter count");for(var wt=0;wt<d.length;++wt)Ft(d[wt],st[wt])}d.forEach(function(st){Et[st]=_});var Y=Array(_.length),X=[],ct=0;_.forEach(function(st,wt){dt.hasOwnProperty(st)?Y[wt]=dt[st]:(X.push(st),tt.hasOwnProperty(st)||(tt[st]=[]),tt[st].push(function(){Y[wt]=dt[st],++ct,ct===X.length&&I(Y)}))}),X.length===0&&I(Y)}function Ft(d,_,E){if(E=E||{},!("argPackAdvance"in _))throw new TypeError("registerType registeredInstance requires argPackAdvance");var I=_.name;if(d||kt('type "'+I+'" must have a positive integer typeid pointer'),dt.hasOwnProperty(d)){if(E.Na)return;kt("Cannot register type '"+I+"' twice")}dt[d]=_,delete Et[d],tt.hasOwnProperty(d)&&(_=tt[d],delete tt[d],_.forEach(function(Y){Y()}))}function _n(d){return{count:d.count,sa:d.sa,ua:d.ua,ga:d.ga,ia:d.ia,ka:d.ka,la:d.la}}function Pe(d){kt(d.A.ia.ha.name+" instance already deleted")}var ze=!1;function gn(){}function Fe(d){--d.count.value,d.count.value===0&&(d.ka?d.la.ra(d.ka):d.ia.ha.ra(d.ga))}function Gt(d){return typeof FinalizationGroup>"u"?(Gt=function(_){return _},d):(ze=new FinalizationGroup(function(_){for(var E=_.next();!E.done;E=_.next())E=E.value,E.ga?Fe(E):console.warn("object already deleted: "+E.ga)}),Gt=function(_){return ze.register(_,_.A,_.A),_},gn=function(_){ze.unregister(_.A)},Gt(d))}var Kt=void 0,Me=[];function sr(){for(;Me.length;){var d=Me.pop();d.A.sa=!1,d.delete()}}function he(){}var ji={};function ru(d,_){var E=t;if(E[d].na===void 0){var I=E[d];E[d]=function(){return E[d].na.hasOwnProperty(arguments.length)||kt("Function '"+_+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+E[d].na+")!"),E[d].na[arguments.length].apply(this,arguments)},E[d].na=[],E[d].na[I.Ha]=I}}function $i(d,_,E){t.hasOwnProperty(d)?((E===void 0||t[d].na!==void 0&&t[d].na[E]!==void 0)&&kt("Cannot register public name '"+d+"' twice"),ru(d,d),t.hasOwnProperty(E)&&kt("Cannot register multiple overloads of a function with the same number of arguments ("+E+")!"),t[d].na[E]=_):(t[d]=_,E!==void 0&&(t[d].gb=E))}function iu(d,_,E,I,Y,X,ct,st){this.name=d,this.constructor=_,this.qa=E,this.ra=I,this.ma=Y,this.La=X,this.wa=ct,this.Ja=st}function vn(d,_,E){for(;_!==E;)_.wa||kt("Expected null or instance of "+E.name+", got an instance of "+_.name),d=_.wa(d),_=_.ma;return d}function au(d,_){return _===null?(this.Da&&kt("null is not a valid "+this.name),0):(_.A||kt('Cannot pass "'+ke(_)+'" as a '+this.name),_.A.ga||kt("Cannot pass deleted object as a pointer of type "+this.name),vn(_.A.ga,_.A.ia.ha,this.ha))}function ou(d,_){if(_===null){if(this.Da&&kt("null is not a valid "+this.name),this.ya){var E=this.Qa();return d!==null&&d.push(this.ra,E),E}return 0}if(_.A||kt('Cannot pass "'+ke(_)+'" as a '+this.name),_.A.ga||kt("Cannot pass deleted object as a pointer of type "+this.name),!this.xa&&_.A.ia.xa&&kt("Cannot convert argument of type "+(_.A.la?_.A.la.name:_.A.ia.name)+" to parameter type "+this.name),E=vn(_.A.ga,_.A.ia.ha,this.ha),this.ya)switch(_.A.ka===void 0&&kt("Passing raw pointer to smart pointer is illegal"),this.Ya){case 0:_.A.la===this?E=_.A.ka:kt("Cannot convert argument of type "+(_.A.la?_.A.la.name:_.A.ia.name)+" to parameter type "+this.name);break;case 1:E=_.A.ka;break;case 2:if(_.A.la===this)E=_.A.ka;else{var I=_.clone();E=this.Ra(E,Zi(function(){I.delete()})),d!==null&&d.push(this.ra,E)}break;default:kt("Unsupporting sharing policy")}return E}function su(d,_){return _===null?(this.Da&&kt("null is not a valid "+this.name),0):(_.A||kt('Cannot pass "'+ke(_)+'" as a '+this.name),_.A.ga||kt("Cannot pass deleted object as a pointer of type "+this.name),_.A.ia.xa&&kt("Cannot convert argument of type "+_.A.ia.name+" to parameter type "+this.name),vn(_.A.ga,_.A.ia.ha,this.ha))}function yn(d){return this.fromWireType(et[d>>2])}function Wi(d,_,E){return _===E?d:E.ma===void 0?null:(d=Wi(d,_,E.ma),d===null?null:E.Ja(d))}var Be={};function uu(d,_){for(_===void 0&&kt("ptr should not be undefined");d.ma;)_=d.wa(_),d=d.ma;return Be[_]}function wn(d,_){return _.ia&&_.ga||ie("makeClassHandle requires ptr and ptrType"),!!_.la!=!!_.ka&&ie("Both smartPtrType and smartPtr must be specified"),_.count={value:1},Gt(Object.create(d,{A:{value:_}}))}function ae(d,_,E,I){this.name=d,this.ha=_,this.Da=E,this.xa=I,this.ya=!1,this.ra=this.Ra=this.Qa=this.Fa=this.Ya=this.Pa=void 0,_.ma!==void 0?this.toWireType=ou:(this.toWireType=I?au:su,this.oa=null)}function Hi(d,_,E){t.hasOwnProperty(d)||ie("Replacing nonexistant public symbol"),t[d].na!==void 0&&E!==void 0?t[d].na[E]=_:(t[d]=_,t[d].Ha=E)}function fe(d,_){d=V(d);var E=D(d,_);return typeof E!="function"&&kt("unknown function pointer with signature "+d+": "+_),E}var Vi=void 0;function cu(d){d=na(d);var _=V(d);return oe(d),_}function Ue(d,_){function E(X){Y[X]||dt[X]||(Et[X]?Et[X].forEach(E):(I.push(X),Y[X]=!0))}var I=[],Y={};throw _.forEach(E),new Vi(d+": "+I.map(cu).join([", "]))}function Yi(d,_){for(var E=[],I=0;I<d;I++)E.push(ot[(_>>2)+I]);return E}function ur(d){for(;d.length;){var _=d.pop();d.pop()(_)}}function Gi(d,_,E){return d instanceof Object||kt(E+' with invalid "this": '+d),d instanceof _.ha.constructor||kt(E+' incompatible with "this" of type '+d.constructor.name),d.A.ga||kt("cannot call emscripten binding method "+E+" on deleted object"),vn(d.A.ga,d.A.ia.ha,_.ha)}var cr=[],Jt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Zi(d){switch(d){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var _=cr.length?cr.pop():Jt.length;return Jt[_]={Sa:1,value:d},_}}function ke(d){if(d===null)return"null";var _=typeof d;return _==="object"||_==="array"||_==="function"?d.toString():""+d}function lu(d,_){switch(_){case 2:return function(E){return this.fromWireType(mt[E>>2])};case 3:return function(E){return this.fromWireType(U[E>>3])};default:throw new TypeError("Unknown float type: "+d)}}function hu(d){var _=Function;if(!(_ instanceof Function))throw new TypeError("new_ called with constructor type "+typeof _+" which is not a function");var E=jt(_.name||"unknownFunctionName",function(){});return E.prototype=_.prototype,E=new E,d=_.apply(E,d),d instanceof Object?d:E}function fu(d,_,E){switch(_){case 0:return E?function(I){return f[I]}:function(I){return B[I]};case 1:return E?function(I){return pt[I>>1]}:function(I){return Q[I>>1]};case 2:return E?function(I){return ot[I>>2]}:function(I){return et[I>>2]};default:throw new TypeError("Unknown integer type: "+d)}}var Xi={};function Ki(){if(!lr){var d={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},_;for(_ in Xi)d[_]=Xi[_];var E=[];for(_ in d)E.push(_+"="+d[_]);lr=E}return lr}var lr,du=[null,[],[]],Ji={};function bn(d){return d%4===0&&(d%100!==0||d%400===0)}function hr(d,_){for(var E=0,I=0;I<=_;E+=d[I++]);return E}var Cn=[31,29,31,30,31,30,31,31,30,31,30,31],kn=[31,28,31,30,31,30,31,31,30,31,30,31];function Sn(d,_){for(d=new Date(d.getTime());0<_;){var E=d.getMonth(),I=(bn(d.getFullYear())?Cn:kn)[E];if(_>I-d.getDate())_-=I-d.getDate()+1,d.setDate(1),11>E?d.setMonth(E+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+_);break}}return d}function pu(d,_,E,I){function Y($,ut,xt){for($=typeof $=="number"?$.toString():$||"";$.length<ut;)$=xt[0]+$;return $}function X($,ut){return Y($,ut,"0")}function ct($,ut){function xt(Ut){return 0>Ut?-1:0<Ut?1:0}var Pt;return(Pt=xt($.getFullYear()-ut.getFullYear()))===0&&(Pt=xt($.getMonth()-ut.getMonth()))===0&&(Pt=xt($.getDate()-ut.getDate())),Pt}function st($){switch($.getDay()){case 0:return new Date($.getFullYear()-1,11,29);case 1:return $;case 2:return new Date($.getFullYear(),0,3);case 3:return new Date($.getFullYear(),0,2);case 4:return new Date($.getFullYear(),0,1);case 5:return new Date($.getFullYear()-1,11,31);case 6:return new Date($.getFullYear()-1,11,30)}}function wt($){$=Sn(new Date($.ja+1900,0,1),$.Ba);var ut=new Date($.getFullYear()+1,0,4),xt=st(new Date($.getFullYear(),0,4));return ut=st(ut),0>=ct(xt,$)?0>=ct(ut,$)?$.getFullYear()+1:$.getFullYear():$.getFullYear()-1}var yt=ot[I+40>>2];I={ab:ot[I>>2],$a:ot[I+4>>2],za:ot[I+8>>2],va:ot[I+12>>2],ta:ot[I+16>>2],ja:ot[I+20>>2],Aa:ot[I+24>>2],Ba:ot[I+28>>2],hb:ot[I+32>>2],Za:ot[I+36>>2],bb:yt&&yt?x(B,yt,void 0):""},E=E?x(B,E,void 0):"",yt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var vt in yt)E=E.replace(new RegExp(vt,"g"),yt[vt]);var At="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),It="January February March April May June July August September October November December".split(" ");yt={"%a":function($){return At[$.Aa].substring(0,3)},"%A":function($){return At[$.Aa]},"%b":function($){return It[$.ta].substring(0,3)},"%B":function($){return It[$.ta]},"%C":function($){return X(($.ja+1900)/100|0,2)},"%d":function($){return X($.va,2)},"%e":function($){return Y($.va,2," ")},"%g":function($){return wt($).toString().substring(2)},"%G":function($){return wt($)},"%H":function($){return X($.za,2)},"%I":function($){return $=$.za,$==0?$=12:12<$&&($-=12),X($,2)},"%j":function($){return X($.va+hr(bn($.ja+1900)?Cn:kn,$.ta-1),3)},"%m":function($){return X($.ta+1,2)},"%M":function($){return X($.$a,2)},"%n":function(){return`
`},"%p":function($){return 0<=$.za&&12>$.za?"AM":"PM"},"%S":function($){return X($.ab,2)},"%t":function(){return"	"},"%u":function($){return $.Aa||7},"%U":function($){var ut=new Date($.ja+1900,0,1),xt=ut.getDay()===0?ut:Sn(ut,7-ut.getDay());return $=new Date($.ja+1900,$.ta,$.va),0>ct(xt,$)?X(Math.ceil((31-xt.getDate()+(hr(bn($.getFullYear())?Cn:kn,$.getMonth()-1)-31)+$.getDate())/7),2):ct(xt,ut)===0?"01":"00"},"%V":function($){var ut=new Date($.ja+1901,0,4),xt=st(new Date($.ja+1900,0,4));ut=st(ut);var Pt=Sn(new Date($.ja+1900,0,1),$.Ba);return 0>ct(Pt,xt)?"53":0>=ct(ut,Pt)?"01":X(Math.ceil((xt.getFullYear()<$.ja+1900?$.Ba+32-xt.getDate():$.Ba+1-xt.getDate())/7),2)},"%w":function($){return $.Aa},"%W":function($){var ut=new Date($.ja,0,1),xt=ut.getDay()===1?ut:Sn(ut,ut.getDay()===0?1:7-ut.getDay()+1);return $=new Date($.ja+1900,$.ta,$.va),0>ct(xt,$)?X(Math.ceil((31-xt.getDate()+(hr(bn($.getFullYear())?Cn:kn,$.getMonth()-1)-31)+$.getDate())/7),2):ct(xt,ut)===0?"01":"00"},"%y":function($){return($.ja+1900).toString().substring(2)},"%Y":function($){return $.ja+1900},"%z":function($){$=$.Za;var ut=0<=$;return $=Math.abs($)/60,(ut?"+":"-")+String("0000"+($/60*100+$%60)).slice(-4)},"%Z":function($){return $.bb},"%%":function(){return"%"}};for(vt in yt)0<=E.indexOf(vt)&&(E=E.replace(new RegExp(vt,"g"),yt[vt](I)));return vt=mu(E),vt.length>_?0:(f.set(vt,d),vt.length-1)}var qi=[];function Qi(d){var _={},E;for(E in d)(function(I){var Y=d[I];_[I]=typeof Y=="function"?function(){qi.push(I);try{return Y.apply(null,arguments)}finally{if(m)return;var X=qi.pop();g(X===I)}}:Y})(E);return _}for(var ta=Array(256),En=0;256>En;++En)ta[En]=String.fromCharCode(En);it=ta,Bt=t.BindingError=re("BindingError"),Rt=t.InternalError=re("InternalError"),he.prototype.isAliasOf=function(d){if(!(this instanceof he&&d instanceof he))return!1;var _=this.A.ia.ha,E=this.A.ga,I=d.A.ia.ha;for(d=d.A.ga;_.ma;)E=_.wa(E),_=_.ma;for(;I.ma;)d=I.wa(d),I=I.ma;return _===I&&E===d},he.prototype.clone=function(){if(this.A.ga||Pe(this),this.A.ua)return this.A.count.value+=1,this;var d=Gt(Object.create(Object.getPrototypeOf(this),{A:{value:_n(this.A)}}));return d.A.count.value+=1,d.A.sa=!1,d},he.prototype.delete=function(){this.A.ga||Pe(this),this.A.sa&&!this.A.ua&&kt("Object already scheduled for deletion"),gn(this),Fe(this.A),this.A.ua||(this.A.ka=void 0,this.A.ga=void 0)},he.prototype.isDeleted=function(){return!this.A.ga},he.prototype.deleteLater=function(){return this.A.ga||Pe(this),this.A.sa&&!this.A.ua&&kt("Object already scheduled for deletion"),Me.push(this),Me.length===1&&Kt&&Kt(sr),this.A.sa=!0,this},ae.prototype.Ma=function(d){return this.Fa&&(d=this.Fa(d)),d},ae.prototype.Ea=function(d){this.ra&&this.ra(d)},ae.prototype.argPackAdvance=8,ae.prototype.readValueFromPointer=yn,ae.prototype.deleteObject=function(d){d!==null&&d.delete()},ae.prototype.fromWireType=function(d){function _(){return this.ya?wn(this.ha.qa,{ia:this.Pa,ga:E,la:this,ka:d}):wn(this.ha.qa,{ia:this,ga:d})}var E=this.Ma(d);if(!E)return this.Ea(d),null;var I=uu(this.ha,E);if(I!==void 0)return I.A.count.value===0?(I.A.ga=E,I.A.ka=d,I.clone()):(I=I.clone(),this.Ea(d),I);if(I=this.ha.La(E),I=ji[I],!I)return _.call(this);I=this.xa?I.Ia:I.pointerType;var Y=Wi(E,this.ha,I.ha);return Y===null?_.call(this):this.ya?wn(I.ha.qa,{ia:I,ga:Y,la:this,ka:d}):wn(I.ha.qa,{ia:I,ga:Y})},t.getInheritedInstanceCount=function(){return Object.keys(Be).length},t.getLiveInheritedInstances=function(){var d=[],_;for(_ in Be)Be.hasOwnProperty(_)&&d.push(Be[_]);return d},t.flushPendingDeletes=sr,t.setDelayFunction=function(d){Kt=d,Me.length&&Kt&&Kt(sr)},Vi=t.UnboundTypeError=re("UnboundTypeError"),t.count_emval_handles=function(){for(var d=0,_=5;_<Jt.length;++_)Jt[_]!==void 0&&++d;return d},t.get_first_emval=function(){for(var d=5;d<Jt.length;++d)if(Jt[d]!==void 0)return Jt[d];return null};function mu(d){var _=Array(A(d)+1);return O(d,_,0,_.length),_}G.push({Ka:function(){ea()}});var _u={m:function(d){return An(d+16)+16},j:function(d,_,E){throw new Z(d).Oa(_,E),"uncaught_exception"in rt?rt.Ga++:rt.Ga=1,d},o:function(d,_,E,I,Y){var X=N(E);_=V(_),Ft(d,{name:_,fromWireType:function(ct){return!!ct},toWireType:function(ct,st){return st?I:Y},argPackAdvance:8,readValueFromPointer:function(ct){if(E===1)var st=f;else if(E===2)st=pt;else if(E===4)st=ot;else throw new TypeError("Unknown boolean type size: "+_);return this.fromWireType(st[ct>>X])},oa:null})},g:function(d,_,E,I,Y,X,ct,st,wt,yt,vt,At,It){vt=V(vt),X=fe(Y,X),st&&(st=fe(ct,st)),yt&&(yt=fe(wt,yt)),It=fe(At,It);var $=Ct(vt);$i($,function(){Ue("Cannot construct "+vt+" due to unbound types",[I])}),Xt([d,_,E],I?[I]:[],function(ut){if(ut=ut[0],I)var xt=ut.ha,Pt=xt.qa;else Pt=he.prototype;ut=jt($,function(){if(Object.getPrototypeOf(this)!==Ut)throw new Bt("Use 'new' to construct "+vt);if(Zt.pa===void 0)throw new Bt(vt+" has no accessible constructor");var ra=Zt.pa[arguments.length];if(ra===void 0)throw new Bt("Tried to invoke ctor of "+vt+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Zt.pa).toString()+") parameters instead!");return ra.apply(this,arguments)});var Ut=Object.create(Pt,{constructor:{value:ut}});ut.prototype=Ut;var Zt=new iu(vt,ut,Ut,It,xt,X,st,yt);xt=new ae(vt,Zt,!0,!1),Pt=new ae(vt+"*",Zt,!1,!1);var Le=new ae(vt+" const*",Zt,!1,!0);return ji[d]={pointerType:Pt,Ia:Le},Hi($,ut),[xt,Pt,Le]})},f:function(d,_,E,I,Y,X){g(0<_);var ct=Yi(_,E);Y=fe(I,Y);var st=[X],wt=[];Xt([],[d],function(yt){yt=yt[0];var vt="constructor "+yt.name;if(yt.ha.pa===void 0&&(yt.ha.pa=[]),yt.ha.pa[_-1]!==void 0)throw new Bt("Cannot register multiple constructors with identical number of parameters ("+(_-1)+") for class '"+yt.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return yt.ha.pa[_-1]=function(){Ue("Cannot construct "+yt.name+" due to unbound types",ct)},Xt([],ct,function(At){return yt.ha.pa[_-1]=function(){arguments.length!==_-1&&kt(vt+" called with "+arguments.length+" arguments, expected "+(_-1)),wt.length=0,st.length=_;for(var It=1;It<_;++It)st[It]=At[It].toWireType(wt,arguments[It-1]);return It=Y.apply(null,st),ur(wt),At[0].fromWireType(It)},[]}),[]})},b:function(d,_,E,I,Y,X,ct,st,wt,yt){_=V(_),Y=fe(I,Y),Xt([],[d],function(vt){vt=vt[0];var At=vt.name+"."+_,It={get:function(){Ue("Cannot access "+At+" due to unbound types",[E,ct])},enumerable:!0,configurable:!0};return wt?It.set=function(){Ue("Cannot access "+At+" due to unbound types",[E,ct])}:It.set=function(){kt(At+" is a read-only property")},Object.defineProperty(vt.ha.qa,_,It),Xt([],wt?[E,ct]:[E],function($){var ut=$[0],xt={get:function(){var Ut=Gi(this,vt,At+" getter");return ut.fromWireType(Y(X,Ut))},enumerable:!0};if(wt){wt=fe(st,wt);var Pt=$[1];xt.set=function(Ut){var Zt=Gi(this,vt,At+" setter"),Le=[];wt(yt,Zt,Pt.toWireType(Le,Ut)),ur(Le)}}return Object.defineProperty(vt.ha.qa,_,xt),[]}),[]})},z:function(d,_){_=V(_),Ft(d,{name:_,fromWireType:function(E){var I=Jt[E].value;return 4<E&&--Jt[E].Sa===0&&(Jt[E]=void 0,cr.push(E)),I},toWireType:function(E,I){return Zi(I)},argPackAdvance:8,readValueFromPointer:yn,oa:null})},l:function(d,_,E){E=N(E),_=V(_),Ft(d,{name:_,fromWireType:function(I){return I},toWireType:function(I,Y){if(typeof Y!="number"&&typeof Y!="boolean")throw new TypeError('Cannot convert "'+ke(Y)+'" to '+this.name);return Y},argPackAdvance:8,readValueFromPointer:lu(_,E),oa:null})},e:function(d,_,E,I,Y,X){var ct=Yi(_,E);d=V(d),Y=fe(I,Y),$i(d,function(){Ue("Cannot call "+d+" due to unbound types",ct)},_-1),Xt([],ct,function(st){var wt=d,yt=d;st=[st[0],null].concat(st.slice(1));var vt=Y,At=st.length;2>At&&kt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var It=st[1]!==null&&!1,$=!1,ut=1;ut<st.length;++ut)if(st[ut]!==null&&st[ut].oa===void 0){$=!0;break}var xt=st[0].name!=="void",Pt="",Ut="";for(ut=0;ut<At-2;++ut)Pt+=(ut!==0?", ":"")+"arg"+ut,Ut+=(ut!==0?", ":"")+"arg"+ut+"Wired";yt="return function "+Ct(yt)+"("+Pt+`) {
if (arguments.length !== `+(At-2)+`) {
throwBindingError('function `+yt+" called with ' + arguments.length + ' arguments, expected "+(At-2)+` args!');
}
`,$&&(yt+=`var destructors = [];
`);var Zt=$?"destructors":"null";for(Pt="throwBindingError invoker fn runDestructors retType classParam".split(" "),vt=[kt,vt,X,ur,st[0],st[1]],It&&(yt+="var thisWired = classParam.toWireType("+Zt+`, this);
`),ut=0;ut<At-2;++ut)yt+="var arg"+ut+"Wired = argType"+ut+".toWireType("+Zt+", arg"+ut+"); // "+st[ut+2].name+`
`,Pt.push("argType"+ut),vt.push(st[ut+2]);if(It&&(Ut="thisWired"+(0<Ut.length?", ":"")+Ut),yt+=(xt?"var rv = ":"")+"invoker(fn"+(0<Ut.length?", ":"")+Ut+`);
`,$)yt+=`runDestructors(destructors);
`;else for(ut=It?1:2;ut<st.length;++ut)At=ut===1?"thisWired":"arg"+(ut-2)+"Wired",st[ut].oa!==null&&(yt+=At+"_dtor("+At+"); // "+st[ut].name+`
`,Pt.push(At+"_dtor"),vt.push(st[ut].oa));return xt&&(yt+=`var ret = retType.fromWireType(rv);
return ret;
`),Pt.push(yt+`}
`),st=hu(Pt).apply(null,vt),Hi(wt,st,_-1),[]})},d:function(d,_,E,I,Y){function X(yt){return yt}_=V(_),Y===-1&&(Y=4294967295);var ct=N(E);if(I===0){var st=32-8*E;X=function(yt){return yt<<st>>>st}}var wt=_.indexOf("unsigned")!=-1;Ft(d,{name:_,fromWireType:X,toWireType:function(yt,vt){if(typeof vt!="number"&&typeof vt!="boolean")throw new TypeError('Cannot convert "'+ke(vt)+'" to '+this.name);if(vt<I||vt>Y)throw new TypeError('Passing a number "'+ke(vt)+'" from JS side to C/C++ side to an argument of type "'+_+'", which is outside the valid range ['+I+", "+Y+"]!");return wt?vt>>>0:vt|0},argPackAdvance:8,readValueFromPointer:fu(_,ct,I!==0),oa:null})},c:function(d,_,E){function I(X){X>>=2;var ct=et;return new Y(L,ct[X+1],ct[X])}var Y=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][_];E=V(E),Ft(d,{name:E,fromWireType:I,argPackAdvance:8,readValueFromPointer:I},{Na:!0})},i:function(d,_){_=V(_);var E=_==="std::string";Ft(d,{name:_,fromWireType:function(I){var Y=et[I>>2];if(E)for(var X=I+4,ct=0;ct<=Y;++ct){var st=I+4+ct;if(ct==Y||B[st]==0){if(X=X?x(B,X,st-X):"",wt===void 0)var wt=X;else wt+=String.fromCharCode(0),wt+=X;X=st+1}}else{for(wt=Array(Y),ct=0;ct<Y;++ct)wt[ct]=String.fromCharCode(B[I+4+ct]);wt=wt.join("")}return oe(I),wt},toWireType:function(I,Y){Y instanceof ArrayBuffer&&(Y=new Uint8Array(Y));var X=typeof Y=="string";X||Y instanceof Uint8Array||Y instanceof Uint8ClampedArray||Y instanceof Int8Array||kt("Cannot pass non-string to std::string");var ct=(E&&X?function(){return A(Y)}:function(){return Y.length})(),st=An(4+ct+1);if(et[st>>2]=ct,E&&X)O(Y,B,st+4,ct+1);else if(X)for(X=0;X<ct;++X){var wt=Y.charCodeAt(X);255<wt&&(oe(st),kt("String has UTF-16 code units that do not fit in 8 bits")),B[st+4+X]=wt}else for(X=0;X<ct;++X)B[st+4+X]=Y[X];return I!==null&&I.push(oe,st),st},argPackAdvance:8,readValueFromPointer:yn,oa:function(I){oe(I)}})},h:function(d,_,E){if(E=V(E),_===2)var I=j,Y=K,X=M,ct=function(){return Q},st=1;else _===4&&(I=at,Y=lt,X=T,ct=function(){return et},st=2);Ft(d,{name:E,fromWireType:function(wt){for(var yt=et[wt>>2],vt=ct(),At,It=wt+4,$=0;$<=yt;++$){var ut=wt+4+$*_;($==yt||vt[ut>>st]==0)&&(It=I(It,ut-It),At===void 0?At=It:(At+=String.fromCharCode(0),At+=It),It=ut+_)}return oe(wt),At},toWireType:function(wt,yt){typeof yt!="string"&&kt("Cannot pass non-string to C++ string type "+E);var vt=X(yt),At=An(4+vt+_);return et[At>>2]=vt>>st,Y(yt,At+4,vt+_),wt!==null&&wt.push(oe,At),At},argPackAdvance:8,readValueFromPointer:yn,oa:function(wt){oe(wt)}})},p:function(d,_){_=V(_),Ft(d,{fb:!0,name:_,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},n:function(){_t()},s:function(d,_,E){B.copyWithin(d,_,_+E)},t:function(d){d>>>=0;var _=B.length;if(2147483648<d)return!1;for(var E=1;4>=E;E*=2){var I=_*(1+.2/E);I=Math.min(I,d+100663296),I=Math.max(16777216,d,I),0<I%65536&&(I+=65536-I%65536);t:{try{p.grow(Math.min(2147483648,I)-L.byteLength+65535>>>16),R(p.buffer);var Y=1;break t}catch{}Y=void 0}if(Y)return!0}return!1},v:function(d,_){var E=0;return Ki().forEach(function(I,Y){var X=_+E;for(Y=ot[d+4*Y>>2]=X,X=0;X<I.length;++X)f[Y++>>0]=I.charCodeAt(X);f[Y>>0]=0,E+=I.length+1}),0},w:function(d,_){var E=Ki();ot[d>>2]=E.length;var I=0;return E.forEach(function(Y){I+=Y.length+1}),ot[_>>2]=I,0},x:function(){return 0},y:function(d,_,E,I){return d=Ji.eb(d),_=Ji.cb(d,_,E),ot[I>>2]=_,0},q:function(){},k:function(d,_,E,I){for(var Y=0,X=0;X<E;X++){for(var ct=ot[_+8*X>>2],st=ot[_+(8*X+4)>>2],wt=0;wt<st;wt++){var yt=B[ct+wt],vt=du[d];yt===0||yt===10?((d===1?k:c)(x(vt,0)),vt.length=0):vt.push(yt)}Y+=st}return ot[I>>2]=Y,0},a:p,r:function(){},u:function(d,_,E,I){return pu(d,_,E,I)}};(function(){function d(X){X=X.exports,X=Qi(X),t.asm=X,ft--,t.monitorRunDependencies&&t.monitorRunDependencies(ft),ft==0&&gt&&(X=gt,gt=null,X())}function _(X){d(X.instance)}function E(X){return S().then(function(ct){return WebAssembly.instantiate(ct,I)}).then(X,function(ct){c("failed to asynchronously prepare wasm: "+ct),_t(ct)})}var I={a:_u};if(ft++,t.monitorRunDependencies&&t.monitorRunDependencies(ft),t.instantiateWasm)try{var Y=t.instantiateWasm(I,d);return Y=Qi(Y)}catch(X){return c("Module.instantiateWasm callback failed with error: "+X),!1}return function(){if(v||typeof WebAssembly.instantiateStreaming!="function"||St()||nt("file://")||typeof fetch!="function")return E(_);fetch(u,{credentials:"same-origin"}).then(function(X){return WebAssembly.instantiateStreaming(X,I).then(_,function(ct){return c("wasm streaming compile failed: "+ct),c("falling back to ArrayBuffer instantiation"),E(_)})})}(),{}})();var ea=t.___wasm_call_ctors=function(){return(ea=t.___wasm_call_ctors=t.asm.B).apply(null,arguments)},An=t._malloc=function(){return(An=t._malloc=t.asm.C).apply(null,arguments)},oe=t._free=function(){return(oe=t._free=t.asm.D).apply(null,arguments)},na=t.___getTypeName=function(){return(na=t.___getTypeName=t.asm.E).apply(null,arguments)};t.___embind_register_native_and_builtin_types=function(){return(t.___embind_register_native_and_builtin_types=t.asm.F).apply(null,arguments)},t.dynCall_ii=function(){return(t.dynCall_ii=t.asm.G).apply(null,arguments)},t.dynCall_vi=function(){return(t.dynCall_vi=t.asm.H).apply(null,arguments)},t.dynCall_iii=function(){return(t.dynCall_iii=t.asm.I).apply(null,arguments)},t.dynCall_viii=function(){return(t.dynCall_viii=t.asm.J).apply(null,arguments)},t.dynCall_fii=function(){return(t.dynCall_fii=t.asm.K).apply(null,arguments)},t.dynCall_viif=function(){return(t.dynCall_viif=t.asm.L).apply(null,arguments)},t.dynCall_viiii=function(){return(t.dynCall_viiii=t.asm.M).apply(null,arguments)},t.dynCall_viiiiii=function(){return(t.dynCall_viiiiii=t.asm.N).apply(null,arguments)},t.dynCall_i=function(){return(t.dynCall_i=t.asm.O).apply(null,arguments)},t.dynCall_iiiii=function(){return(t.dynCall_iiiii=t.asm.P).apply(null,arguments)},t.dynCall_iiiiiii=function(){return(t.dynCall_iiiiiii=t.asm.Q).apply(null,arguments)},t.dynCall_iiii=function(){return(t.dynCall_iiii=t.asm.R).apply(null,arguments)},t.dynCall_vii=function(){return(t.dynCall_vii=t.asm.S).apply(null,arguments)},t.dynCall_viijii=function(){return(t.dynCall_viijii=t.asm.T).apply(null,arguments)},t.dynCall_jiji=function(){return(t.dynCall_jiji=t.asm.U).apply(null,arguments)},t.dynCall_iiiiiiiii=function(){return(t.dynCall_iiiiiiiii=t.asm.V).apply(null,arguments)},t.dynCall_iiiiii=function(){return(t.dynCall_iiiiii=t.asm.W).apply(null,arguments)},t.dynCall_iiiiiiii=function(){return(t.dynCall_iiiiiiii=t.asm.X).apply(null,arguments)},t.dynCall_iiiiiijj=function(){return(t.dynCall_iiiiiijj=t.asm.Y).apply(null,arguments)},t.dynCall_iiiiij=function(){return(t.dynCall_iiiiij=t.asm.Z).apply(null,arguments)},t.dynCall_iiiiid=function(){return(t.dynCall_iiiiid=t.asm._).apply(null,arguments)},t.dynCall_iiiiijj=function(){return(t.dynCall_iiiiijj=t.asm.$).apply(null,arguments)},t.dynCall_v=function(){return(t.dynCall_v=t.asm.aa).apply(null,arguments)},t.dynCall_viiiii=function(){return(t.dynCall_viiiii=t.asm.ba).apply(null,arguments)},t._asyncify_start_unwind=function(){return(t._asyncify_start_unwind=t.asm.ca).apply(null,arguments)},t._asyncify_stop_unwind=function(){return(t._asyncify_stop_unwind=t.asm.da).apply(null,arguments)},t._asyncify_start_rewind=function(){return(t._asyncify_start_rewind=t.asm.ea).apply(null,arguments)},t._asyncify_stop_rewind=function(){return(t._asyncify_stop_rewind=t.asm.fa).apply(null,arguments)};var xn;gt=function d(){xn||fr(),xn||(gt=d)};function fr(){function d(){if(!xn&&(xn=!0,t.calledRun=!0,!m)){if(b(G),b(P),i(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var _=t.postRun.shift();bt.unshift(_)}b(bt)}}if(!(0<ft)){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)q();b(H),0<ft||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),d()},1)):d())}}if(t.run=fr,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return fr(),n.ready}}();class Qs{constructor(){Dt(this,"samWasmModule")}getOverriddenModules(n){return{locateFile:t=>n||t}}async initSamModule(n){this.samWasmModule||(this.samWasmModule=await qs(this.getOverriddenModules(n)))}getSamVersion(){var n;return(n=this.samWasmModule)==null?void 0:n.getInfoString()}}const tu=(e,n,t)=>{const i=Li(t,e),{topLeft:a,topRight:r,bottomLeft:o,bottomRight:s}=n;return to({topLeft:a,topRight:r,bottomLeft:o,bottomRight:s},i)},ar=class extends Qs{static getInstance(){return this._instance||(this._instance=new ar),this._instance}parseRawData(n){const{brightness:t,hotspots:i,sharpness:a}=n.params,r={confidence:n.score/1e3,topLeft:{x:n.x0,y:n.y0},topRight:{x:n.x1,y:n.y1},bottomRight:{x:n.x2,y:n.y2},bottomLeft:{x:n.x3,y:n.y3},brightness:t,hotspots:i,sharpness:a};return{...r,smallestEdge:Ui(r)}}detect(n){if(this.samWasmModule==null)throw new zt("SAM WASM module is not initialized");const t=Ja(n),i=this.samWasmModule.detectDocumentWithImageParameters(n.width,n.height,t,0,0);return this.parseRawData(i)}};let pn=ar;Dt(pn,"_instance");const or=class extends Js{constructor(){super(...arguments);Dt(this,"detector",pn.getInstance());Dt(this,"className","DocumentController");Dt(this,"fallbackInstruction","document_not_present");Dt(this,"getInstructionCode",(t,i)=>{var a;if(this.isInCandidateSelection)return"candidate_selection";if(((a=this.lastImage)==null?void 0:a.isValid)&&i)return"candidate_selection";if(this.lastImage&&i)return this.lastImage.instructionCode;if(t.isPresent)if(t.isNotSmall)if(t.isNotOutOfBounds)if(t.isSharp)if(t.isNotDim)if(t.isNotBright){if(!t.noHotspots)return"hotspots_present"}else return"brightness_too_high";else return"brightness_too_low";else return"sharpness_too_low";else return"document_centering";else return"document_too_far";else return"document_not_present";return this.fallbackInstruction});Dt(this,"transformSmallestEdgeRelativeToDetectionFrameWidth",(t,i)=>{const r=Ui(t)/i.width;return{...t,smallestEdge:r}})}static getInstance(){return this._instance||(this._instance=new or),this._instance}restart(){super.restart(),Ir(te.INSTRUCTION_CHANGED,this.fallbackInstruction)}validateDetectedObject(t,i){const{confidenceThreshold:a,sharpnessThreshold:r,brightnessHighThreshold:o,brightnessLowThreshold:s,hotspotsScoreThreshold:h,outOfBoundsThreshold:y,sizeSmallThreshold:l}=this.getThresholds(),w=t.confidence>a,k=t.sharpness>r,c=t.brightness>s,v=t.brightness<o,p=t.hotspots<h,m=tu(y,t,i),g=t.smallestEdge>l;return{isPresent:w,isSharp:k,isNotDim:c,isNotBright:v,noHotspots:p,isNotOutOfBounds:m,isNotSmall:g}}processImage(t){var k;const i={width:t.width,height:t.height},a=rr(i),r=Ka(t,a),o={width:r.width,height:r.height};let s=this.detector.detect(r);s=Zs(i,s),s=this.transformSmallestEdgeRelativeToDetectionFrameWidth(s,o);const h=this.validateDetectedObject(s,i),y=this.isDetectionValid(h),l=this.getInstructionCode(h,y);if(this.isInCandidateSelection){if(this.bestImage&&y&&this.isNewImageBetter(this.bestImage.detection,s)){const c={image:t,detection:Te(s)};this.bestImage=c,this.candidateSelectionImages.push(c)}}else if(((k=this.lastImage)==null?void 0:k.isValid)&&y){const c={image:t,detection:Te(s)},v={image:this.lastImage.image,detection:this.lastImage.detection};this.isNewImageBetter(v.detection,c.detection)?this.bestImage=c:this.bestImage=v,this.candidateSelectionImages.push(v,c),this.isInCandidateSelection=!0}else y?this.lastImage={instructionCode:l,isValid:!0,image:t,detection:Te(s)}:this.lastImage={instructionCode:l,isValid:!1,image:t,detection:Te(s)};const w={detectedDocument:Te(s),instructionCode:l,isInCandidateSelection:this.isInCandidateSelection};return this.record.push(w.detectedDocument),Ir(te.INSTRUCTION_CHANGED,l),wa(te.DETECTED_DOCUMENT_CHANGED,w.detectedDocument,this.getThresholds().confidenceThreshold),w}};let mn=or;Dt(mn,"_instance");const eu=()=>{const{appState:e,handleAppStateChange:n,handleError:t}=Ke(),{documentCameraOptions:i}=Jr(),{samWasmUrl:a,thresholds:r,cameraFacing:o,imageType:s,onPhotoTaken:h}=i,y=de(),[l,w]=ee(),k=Us(l),{cameraHandler:c,cameraResolution:v,onCameraResolutionChange:p}=Ms(y,o),{controller:m}=Bs(mn.getInstance(),r,a),{shouldMirror:g}=Fs(te.CONTROL,c);return Ps(te.CAMERA_PROPS_CHANGED,{cameraResolution:v,shouldMirror:g}),Ls(),Lt(()=>()=>{me.getInstance().restart()},[]),Lt(()=>{(c==null?void 0:c.videoTrack)&&(m==null?void 0:m.isDetectorInitialized)&&n(Ht.RUNNING)},[c==null?void 0:c.videoTrack,m==null?void 0:m.isDetectorInitialized,n]),Lt(()=>{if(e!==Ht.RUNNING)return;if(!c||!m)throw new zt("Cannot start detection");const C=m.getSamVersion(),x=async(M,at,lt)=>{const T={width:M.width,height:M.height},L=`image/${s}`,f=await Xa(M,L,90),B={cameraSettings:{...c==null?void 0:c.getCameraSettings(),deviceName:await(c==null?void 0:c.getDeviceName())},detection:at,imageResolution:T,record:k?lt:void 0};$s($r.DOCUMENT,m.getCandidateSelectionImages()),h(f,B)};let O=0,A=!1,W=0;const j=new Za(30);return(async()=>{const M=Date.now();for(;c.checkIfStreamIsRunning()&&!A;){if($a(O,W)){const{image:ot,detection:et}=m.getBestImage()||{},mt=m.getRecord();if(ot&&et){const U=Date.now();Oe.sendDocumentData({documentDetection:et,imageResolution:{width:ot.width,height:ot.height},deviceName:await c.getDeviceName(),averageFps:Ws(j),captureProcessDurationInMs:U-M}),await x(ot,et,mt),n(Ht.WAITING),m.restart()}else t(new zt("Something went wrong during capturing an image"));return}const at=Date.now(),lt=c.takePhoto(),T={width:lt.width,height:lt.height};let L;try{L=m.processImage(lt)}catch(ot){ot instanceof Error&&t(zt.fromCameraError(ot));return}const B=Date.now()-at,pt=Yr(1e3/B);j.pushFixed(pt);const Q={document:L.detectedDocument,detectionTime:B,fps:pt,resolution:T,instructionCode:L.instructionCode,samVersion:C};w(Q),L.isInCandidateSelection&&(O===0&&(O=performance.now()),W++),p(T),await Vr(Math.max(Wr.max-B,Wr.min))}})(),()=>{A=!0}},[e,c,m,k,i,n,t,s,h,r.confidenceThreshold,p]),Mt(Vt,{children:[Mt(Is,{ref:y,autoPlay:!0,muted:!0,playsInline:!0,isImageMirror:g}),k&&l&&v&&e===Ht.RUNNING&&Mt(Ks,{detectionDetails:l,isImageMirror:g,cameraResolution:v})]})},nu=()=>{const e=de(null);return js(e,te.VIDEO_ELEMENT_SIZE),Mt(Bi,{children:Mt(Os,{ref:e,children:Mt(eu,{})})})};da(({cameraOptions:e})=>(Lt(()=>{Oe.init("065cf6e242fc5e785cd17eebfbfbbd212a33133b")},[]),e?Mt(eo,{cameraOptions:e,children:Mt(Aa,{onError:e.onError,eventName:te.STATE_CHANGED,children:Mt(nu,{})})}):null),"x-dot-document-auto-capture",["cameraOptions"])});
